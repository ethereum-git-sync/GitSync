{
  "url": "https://api.github.com/repos/ethereum/pm/issues/495",
  "repository_url": "https://api.github.com/repos/ethereum/pm",
  "labels_url": "https://api.github.com/repos/ethereum/pm/issues/495/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/pm/issues/495/comments",
  "events_url": "https://api.github.com/repos/ethereum/pm/issues/495/events",
  "html_url": "https://github.com/ethereum/pm/issues/495",
  "id": 1166639138,
  "node_id": "I_kwDOBCfO0M5FiYAi",
  "number": 495,
  "title": "Beacon Chain Withdrawals for Shanghai",
  "user": {
    "login": "timbeiko",
    "id": 9390255,
    "node_id": "MDQ6VXNlcjkzOTAyNTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/timbeiko",
    "html_url": "https://github.com/timbeiko",
    "followers_url": "https://api.github.com/users/timbeiko/followers",
    "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
    "organizations_url": "https://api.github.com/users/timbeiko/orgs",
    "repos_url": "https://api.github.com/users/timbeiko/repos",
    "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/timbeiko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-03-11T16:49:04Z",
  "updated_at": "2022-03-18T20:59:30Z",
  "closed_at": "2022-03-18T20:59:30Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Issue to track the progress towards beacon chain proposals and the various proposals. \r\n\r\nA few links:\r\n- [Meta Spec](https://notes.ethereum.org/@ralexstokes/Skp1mPSb9)\r\n- [EIP-4895: Beacon chain push withdrawals as operations](https://eips.ethereum.org/EIPS/eip-4895)\r\n- [EIP-4863: Beacon chain push withdrawals](https://eips.ethereum.org/EIPS/eip-4863) \r\n    - Note: uses a new transaction type\r\n- Previous, pull-based, proposal:\r\n    - [EIP-4788: Beacon state root in the EVM](https://eips.ethereum.org/EIPS/eip-4788) ",
  "closed_by": {
    "login": "timbeiko",
    "id": 9390255,
    "node_id": "MDQ6VXNlcjkzOTAyNTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/timbeiko",
    "html_url": "https://github.com/timbeiko",
    "followers_url": "https://api.github.com/users/timbeiko/followers",
    "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
    "organizations_url": "https://api.github.com/users/timbeiko/orgs",
    "repos_url": "https://api.github.com/users/timbeiko/repos",
    "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/timbeiko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/pm/issues/495/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 1,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/pm/issues/495/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1069406350",
    "html_url": "https://github.com/ethereum/pm/issues/495#issuecomment-1069406350",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/495",
    "id": 1069406350,
    "node_id": "IC_kwDOBCfO0M4_vdiO",
    "user": {
      "login": "arwer13",
      "id": 5782373,
      "node_id": "MDQ6VXNlcjU3ODIzNzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5782373?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arwer13",
      "html_url": "https://github.com/arwer13",
      "followers_url": "https://api.github.com/users/arwer13/followers",
      "following_url": "https://api.github.com/users/arwer13/following{/other_user}",
      "gists_url": "https://api.github.com/users/arwer13/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arwer13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arwer13/subscriptions",
      "organizations_url": "https://api.github.com/users/arwer13/orgs",
      "repos_url": "https://api.github.com/users/arwer13/repos",
      "events_url": "https://api.github.com/users/arwer13/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arwer13/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-16T18:11:01Z",
    "updated_at": "2022-03-16T18:11:01Z",
    "author_association": "NONE",
    "body": "We'd like to mention here a pair of (draft) proposals answering sort of a complimentary question \"how to initiate a partial withdrawal\" (and more). Hope it may be of use in the discussion.\r\n\r\n- [Generalized message bus (GMB)](https://hackmd.io/@lido/BkiOdwcmK)\r\n- [Partial withdrawals (based on GMB)](https://hackmd.io/@lido/ry25Z54VK)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1069406350/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1071227051",
    "html_url": "https://github.com/ethereum/pm/issues/495#issuecomment-1071227051",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/495",
    "id": 1071227051,
    "node_id": "IC_kwDOBCfO0M4_2aCr",
    "user": {
      "login": "ralexstokes",
      "id": 3113781,
      "node_id": "MDQ6VXNlcjMxMTM3ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3113781?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ralexstokes",
      "html_url": "https://github.com/ralexstokes",
      "followers_url": "https://api.github.com/users/ralexstokes/followers",
      "following_url": "https://api.github.com/users/ralexstokes/following{/other_user}",
      "gists_url": "https://api.github.com/users/ralexstokes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ralexstokes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ralexstokes/subscriptions",
      "organizations_url": "https://api.github.com/users/ralexstokes/orgs",
      "repos_url": "https://api.github.com/users/ralexstokes/repos",
      "events_url": "https://api.github.com/users/ralexstokes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ralexstokes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-17T19:03:04Z",
    "updated_at": "2022-03-17T19:08:06Z",
    "author_association": "MEMBER",
    "body": "interesting proposal @arwer13 !\r\n\r\nwhat is the rationale to have these messages originate from the EL (instead of the CL)? and moreover to allow for generic types of messages?\r\n\r\ni hear you that it would be nice to avoid having to build out a discrete message type for each operation we may want to process on the CL but we have to effectively do a dispatch on the event/contract type anyway with the GMB from what I can tell so it seems isomorphic to doing so at the CL layer (and there will be a lot more \"stuff\" along the critical path if these start from the EL which means more testing, review, etc.). For example, we could even just include the GMB you have written as a bit of EVM bytecode on the beacon chain and avoid touching the EL at all...\r\n\r\ni also think that having to spec/build a new message type for each new operation has a nice \"backpressure\" as there is a high cost to doing so and if we make it easier, we may be tempted to make more, when fewer would do -- and the reason we want fewer is that it means less attack surface so easier testing, auditing, review, etc. imo this is a time when security trumps convenience.\r\n\r\n\r\non top of the general comments about the GMB idea, i don't think we need this kind of generic infrastructure to implement partial withdrawals. the general withdrawal flow that has the most traction amongst core devs right now is the one described here: https://notes.ethereum.org/@ralexstokes/Skp1mPSb9\r\n\r\nit introduces a pipeline from the CL to the EL to supply (full) withdrawals that are processed as expected. we can re-use the entire pipeline downstream of the withdrawals queue on the CL (see here for more detail: https://github.com/ethereum/consensus-specs/pull/2836) for full or partial withdrawals. which means we don't need to test this pathway and an entirely separate pathway (possibly originating from the EL!) for both full and partial withdrawals.\r\n\r\nthe distinction b/t partial vs full is simply based on the validator's status on the beacon chain so it would make sense to unify implementation for both types of withdrawals;  and in fact to implement partial withdrawals on top of the changes in this meta-spec i've listed you would just need to add a few extra validations to do the correct balance accounting on the beacon chain.\r\n\r\ni'd want to hear a stronger rationale for adding the GMB architecture before pursuing this route in clients further...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1071227051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1072328278",
    "html_url": "https://github.com/ethereum/pm/issues/495#issuecomment-1072328278",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/495",
    "id": 1072328278,
    "node_id": "IC_kwDOBCfO0M4_6m5W",
    "user": {
      "login": "arwer13",
      "id": 5782373,
      "node_id": "MDQ6VXNlcjU3ODIzNzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5782373?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arwer13",
      "html_url": "https://github.com/arwer13",
      "followers_url": "https://api.github.com/users/arwer13/followers",
      "following_url": "https://api.github.com/users/arwer13/following{/other_user}",
      "gists_url": "https://api.github.com/users/arwer13/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arwer13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arwer13/subscriptions",
      "organizations_url": "https://api.github.com/users/arwer13/orgs",
      "repos_url": "https://api.github.com/users/arwer13/repos",
      "events_url": "https://api.github.com/users/arwer13/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arwer13/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-18T11:37:18Z",
    "updated_at": "2022-03-18T11:37:18Z",
    "author_association": "NONE",
    "body": "Thank you a lot for such a detailed feedback @ralexstokes !\r\n\r\nI've caught up with the discussion and I do agree now there is no need of flow from EL for doing full and partial withdrawals. Regular automatic withdrawals are even more preferable from the point of view of liquid staking protocol. \r\n\r\nSpeaking about GMB. I'm trying to understand now is there a room for the proposal improvement/transformation.\r\nAs far as I understand now there is still a need for a solution for conveying a number of intentions from EL, described here https://ethresear.ch/t/0x03-withdrawal-credentials-simple-eth1-triggerable-withdrawals/10021/4 : voluntary exits, exits, various withdrawal credentials change, ...\r\nAm I missing something on the problem statement here? Could you please point to some other proposal / discussions on the solution?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1072328278/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1072394519",
    "html_url": "https://github.com/ethereum/pm/issues/495#issuecomment-1072394519",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/495",
    "id": 1072394519,
    "node_id": "IC_kwDOBCfO0M4_63EX",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-18T13:09:29Z",
    "updated_at": "2022-03-18T13:09:29Z",
    "author_association": "MEMBER",
    "body": "Agreed that there are currently operations that only the active key can perform where it is very natural (and prevents some withholding attacks -- e.g. voluntary_exit) for the withdrawal key to actually trigger it.\r\n\r\nI have not yet reviewed your GMB proposal, but will soon. Something like that (if complexity is relatively low) is of value to stakers and pools (especially constructions where active and withdrawal creds are split between parties)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1072394519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1072493981",
    "html_url": "https://github.com/ethereum/pm/issues/495#issuecomment-1072493981",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/495",
    "id": 1072493981,
    "node_id": "IC_kwDOBCfO0M4_7PWd",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-18T15:00:04Z",
    "updated_at": "2022-03-18T15:00:04Z",
    "author_association": "MEMBER",
    "body": "Just for historical reference, here was a discussion from a month ago (based on discussions with @djrtwo and @ralexstokes) about a pull approach with a \"system contract\": https://notes.ethereum.org/@ipsilon/H1lC5OAJ5\r\n\r\nIt was motivated by minimizing block/client changes, with the downside of more interaction requirement from the users, hence it superseded by the push options above.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1072493981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1072791630",
    "html_url": "https://github.com/ethereum/pm/issues/495#issuecomment-1072791630",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/495",
    "id": 1072791630,
    "node_id": "IC_kwDOBCfO0M4_8YBO",
    "user": {
      "login": "timbeiko",
      "id": 9390255,
      "node_id": "MDQ6VXNlcjkzOTAyNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timbeiko",
      "html_url": "https://github.com/timbeiko",
      "followers_url": "https://api.github.com/users/timbeiko/followers",
      "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
      "organizations_url": "https://api.github.com/users/timbeiko/orgs",
      "repos_url": "https://api.github.com/users/timbeiko/repos",
      "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timbeiko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-18T20:59:30Z",
    "updated_at": "2022-03-18T20:59:30Z",
    "author_association": "MEMBER",
    "body": "On ACD134 we agreed to go with EIP-4895 as CFI for Shanghai. PR: https://github.com/ethereum/execution-specs/pull/477 \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1072791630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
