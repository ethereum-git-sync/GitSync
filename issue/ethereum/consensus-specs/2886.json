{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/2886",
  "id": 1228108775,
  "node_id": "I_kwDOCOoGbc5JM3Pn",
  "number": 2886,
  "title": "`milagro_bls_binding` fails to install on arm64",
  "user": {
    "login": "jtraglia",
    "id": 95511699,
    "node_id": "U_kgDOBbFkkw",
    "avatar_url": "https://avatars.githubusercontent.com/u/95511699?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jtraglia",
    "html_url": "https://github.com/jtraglia",
    "followers_url": "https://api.github.com/users/jtraglia/followers",
    "following_url": "https://api.github.com/users/jtraglia/following{/other_user}",
    "gists_url": "https://api.github.com/users/jtraglia/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jtraglia/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jtraglia/subscriptions",
    "organizations_url": "https://api.github.com/users/jtraglia/orgs",
    "repos_url": "https://api.github.com/users/jtraglia/repos",
    "events_url": "https://api.github.com/users/jtraglia/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jtraglia/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-05-06T17:18:26Z",
  "updated_at": "2022-05-15T00:26:47Z",
  "closed_at": "2022-05-15T00:26:47Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The `milagro_bls_binding==1.6.3` python module does not seem to exist for arm64 systems.\r\n\r\n```\r\nERROR: Could not find a version that satisfies the requirement milagro_bls_binding==1.6.3 (from eth2spec[test])\r\nERROR: No matching distribution found for milagro_bls_binding==1.6.3\r\n```\r\n\r\nIf you attempt to install `milagro_bls_binding` outside of `make install_test`, it will provide a list of available versions:\r\n\r\n```\r\n(from versions: 0.1.4, 0.4.0, 1.0.0, 1.0.1, 1.8.0)\r\n```\r\n\r\nAnd `1.6.3` is missing from this list.\r\n\r\n## Full Output\r\n```\r\npython3 -m venv venv; . venv/bin/activate; python3 -m pip install -e .[lint]; python3 -m pip install -e .[test]\r\nObtaining file:///consensus-specs\r\nCollecting dataclasses==0.6\r\n  Downloading dataclasses-0.6-py3-none-any.whl (14 kB)\r\nCollecting eth-typing<3.0.0,>=2.1.0\r\n  Downloading eth_typing-2.3.0-py3-none-any.whl (6.2 kB)\r\nCollecting eth-utils<2,>=1.3.0\r\n  Downloading eth_utils-1.10.0-py3-none-any.whl (24 kB)\r\nCollecting lru-dict==1.1.6\r\n  Downloading lru-dict-1.1.6.tar.gz (9.4 kB)\r\nCollecting marko==1.0.2\r\n  Using cached marko-1.0.2-py3-none-any.whl (34 kB)\r\nERROR: Could not find a version that satisfies the requirement milagro_bls_binding==1.6.3 (from eth2spec[lint])\r\nERROR: No matching distribution found for milagro_bls_binding==1.6.3\r\nObtaining file:///consensus-specs\r\nCollecting dataclasses==0.6\r\n  Using cached dataclasses-0.6-py3-none-any.whl (14 kB)\r\nCollecting eth-typing<3.0.0,>=2.1.0\r\n  Using cached eth_typing-2.3.0-py3-none-any.whl (6.2 kB)\r\nCollecting eth-utils<2,>=1.3.0\r\n  Using cached eth_utils-1.10.0-py3-none-any.whl (24 kB)\r\nCollecting lru-dict==1.1.6\r\n  Using cached lru-dict-1.1.6.tar.gz (9.4 kB)\r\nRequirement already satisfied: marko==1.0.2 in ./venv/lib/python3.9/site-packages (from eth2spec==1.1.10) (1.0.2)\r\nERROR: Could not find a version that satisfies the requirement milagro_bls_binding==1.6.3 (from eth2spec[test])\r\nERROR: No matching distribution found for milagro_bls_binding==1.6.3\r\nmake: *** [Makefile:97: install_test] Error 1\r\n```\r\n\r\n## Dockerfile\r\n\r\n```Dockerfile\r\nFROM --platform=linux/arm64 debian:bullseye\r\n\r\n#\r\n# Install dependencies.\r\n#\r\nRUN apt update\r\nRUN apt install -y gcc git make python3-dev python3-venv wget\r\n\r\n#\r\n# Grab the consensus-specs.\r\n#\r\nRUN git clone https://github.com/ethereum/consensus-specs.git\r\nWORKDIR consensus-specs\r\n\r\n#\r\n# Test.\r\n#\r\nCMD make install_test\r\n```",
  "closed_by": {
    "login": "jtraglia",
    "id": 95511699,
    "node_id": "U_kgDOBbFkkw",
    "avatar_url": "https://avatars.githubusercontent.com/u/95511699?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jtraglia",
    "html_url": "https://github.com/jtraglia",
    "followers_url": "https://api.github.com/users/jtraglia/followers",
    "following_url": "https://api.github.com/users/jtraglia/following{/other_user}",
    "gists_url": "https://api.github.com/users/jtraglia/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jtraglia/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jtraglia/subscriptions",
    "organizations_url": "https://api.github.com/users/jtraglia/orgs",
    "repos_url": "https://api.github.com/users/jtraglia/repos",
    "events_url": "https://api.github.com/users/jtraglia/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jtraglia/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1119864964",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/2886#issuecomment-1119864964",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886",
    "id": 1119864964,
    "node_id": "IC_kwDOCOoGbc5Cv8iE",
    "user": {
      "login": "ralexstokes",
      "id": 3113781,
      "node_id": "MDQ6VXNlcjMxMTM3ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3113781?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ralexstokes",
      "html_url": "https://github.com/ralexstokes",
      "followers_url": "https://api.github.com/users/ralexstokes/followers",
      "following_url": "https://api.github.com/users/ralexstokes/following{/other_user}",
      "gists_url": "https://api.github.com/users/ralexstokes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ralexstokes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ralexstokes/subscriptions",
      "organizations_url": "https://api.github.com/users/ralexstokes/orgs",
      "repos_url": "https://api.github.com/users/ralexstokes/repos",
      "events_url": "https://api.github.com/users/ralexstokes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ralexstokes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-06T18:08:58Z",
    "updated_at": "2022-05-06T18:08:58Z",
    "author_association": "MEMBER",
    "body": "paging @ChihChengLiang :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1119864964/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1120934878",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/2886#issuecomment-1120934878",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886",
    "id": 1120934878,
    "node_id": "IC_kwDOCOoGbc5C0Bve",
    "user": {
      "login": "ChihChengLiang",
      "id": 3391420,
      "node_id": "MDQ6VXNlcjMzOTE0MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3391420?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChihChengLiang",
      "html_url": "https://github.com/ChihChengLiang",
      "followers_url": "https://api.github.com/users/ChihChengLiang/followers",
      "following_url": "https://api.github.com/users/ChihChengLiang/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChihChengLiang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChihChengLiang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChihChengLiang/subscriptions",
      "organizations_url": "https://api.github.com/users/ChihChengLiang/orgs",
      "repos_url": "https://api.github.com/users/ChihChengLiang/repos",
      "events_url": "https://api.github.com/users/ChihChengLiang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChihChengLiang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-09T10:38:36Z",
    "updated_at": "2022-05-09T10:38:36Z",
    "author_association": "MEMBER",
    "body": "@jtraglia @ralexstokes  Sorry, the 1.6.3 has no arm64 support yet. Does changing it to 1.8.0 work for you? If so, we should bump the version.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1120934878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1121260917",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/2886#issuecomment-1121260917",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886",
    "id": 1121260917,
    "node_id": "IC_kwDOCOoGbc5C1RV1",
    "user": {
      "login": "jtraglia",
      "id": 95511699,
      "node_id": "U_kgDOBbFkkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/95511699?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtraglia",
      "html_url": "https://github.com/jtraglia",
      "followers_url": "https://api.github.com/users/jtraglia/followers",
      "following_url": "https://api.github.com/users/jtraglia/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtraglia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtraglia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtraglia/subscriptions",
      "organizations_url": "https://api.github.com/users/jtraglia/orgs",
      "repos_url": "https://api.github.com/users/jtraglia/repos",
      "events_url": "https://api.github.com/users/jtraglia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtraglia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-09T15:36:28Z",
    "updated_at": "2022-05-09T15:36:28Z",
    "author_association": "MEMBER",
    "body": "Yes, but not without some hiccups. Version `1.8.0` does not have a pre-built wheel, so pip will build it. This requires the rust compiler be installed; but rust stable does not work, it requires rust nightly.\r\n\r\n<details closed>\r\n<summary><b>Click to expand: build output with rust stable</b></summary>\r\n\r\n```\r\nBuilding wheels for collected packages: milagro-bls-binding\r\n  Building wheel for milagro-bls-binding (PEP 517) ... error\r\n  ERROR: Command errored out with exit status 1:\r\n   command: /consensus-specs/venv/bin/python3 /tmp/tmpdn7lbbmm_in_process.py build_wheel /tmp/tmpurgr5f_h\r\n       cwd: /tmp/pip-install-63bgckqu/milagro-bls-binding_fbab55163051478aa0f1157abed82f5d\r\n  Complete output (56 lines):\r\n  Running `maturin pep517 build-wheel -i /consensus-specs/venv/bin/python3 --compatibility off`\r\n     Compiling libc v0.2.125\r\n     Compiling cfg-if v1.0.0\r\n     Compiling proc-macro2 v1.0.38\r\n     Compiling unicode-xid v0.2.3\r\n     Compiling proc-macro-hack v0.5.19\r\n     Compiling syn v1.0.92\r\n     Compiling pyo3-build-config v0.15.2\r\n     Compiling getrandom v0.1.16\r\n     Compiling once_cell v1.10.0\r\n     Compiling autocfg v1.1.0\r\n     Compiling parking_lot_core v0.8.5\r\n     Compiling scopeguard v1.1.0\r\n     Compiling smallvec v1.8.0\r\n     Compiling unindent v0.1.9\r\n     Compiling ppv-lite86 v0.2.16\r\n     Compiling lazy_static v1.4.0\r\n     Compiling amcl v0.3.0 (https://github.com/sigp/milagro_bls?tag=v1.4.2#16655aa0)\r\n     Compiling zeroize v1.5.5\r\n     Compiling hex v0.4.3\r\n     Compiling instant v0.1.12\r\n  error: could not compile `zeroize`.\r\n\r\n  To learn more, run the command again with --verbose.\r\n  warning: build failed, waiting for other jobs to finish...\r\n  error: build failed\r\n  ðŸ’¥ maturin failed\r\n    Caused by: Failed to build a native library through cargo\r\n    Caused by: Cargo build finished with \"exit status: 101\": `cargo rustc --manifest-path Cargo.toml --message-format json --release --lib --`\r\n  ðŸ“¦ Including license file \"LICENSE\"\r\n  ðŸ”— Found pyo3 bindings with abi3 support for Python â‰¥ 3.6\r\n  ðŸ Not using a specific python interpreter\r\n  error[E0658]: const generics are unstable\r\n     --> /root/.cargo/registry/src/github.com-1ecc6299db9ec823/zeroize-1.5.5/src/lib.rs:356:15\r\n      |\r\n  356 | impl<Z, const N: usize> Zeroize for [Z; N]\r\n      |               ^\r\n      |\r\n      = note: see issue #74878 <https://github.com/rust-lang/rust/issues/74878> for more information\r\n\r\n\r\n  error[E0658]: const generics are unstable\r\n     --> /root/.cargo/registry/src/github.com-1ecc6299db9ec823/zeroize-1.5.5/src/lib.rs:365:15\r\n      |\r\n  365 | impl<Z, const N: usize> ZeroizeOnDrop for [Z; N] where Z: ZeroizeOnDrop {}\r\n      |               ^\r\n      |\r\n      = note: see issue #74878 <https://github.com/rust-lang/rust/issues/74878> for more information\r\n\r\n\r\n  error: aborting due to 2 previous errors\r\n\r\n\r\n  For more information about this error, try `rustc --explain E0658`.\r\n\r\n  Error: command ['maturin', 'pep517', 'build-wheel', '-i', '/consensus-specs/venv/bin/python3', '--compatibility', 'off'] returned non-zero exit status 1\r\n  ----------------------------------------\r\n  ERROR: Failed building wheel for milagro-bls-binding\r\nFailed to build milagro-bls-binding\r\nERROR: Could not build wheels for milagro-bls-binding which use PEP 517 and cannot be installed directly\r\n```\r\n\r\n</details>",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1121260917/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1124659585",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/2886#issuecomment-1124659585",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886",
    "id": 1124659585,
    "node_id": "IC_kwDOCOoGbc5DCPGB",
    "user": {
      "login": "ChihChengLiang",
      "id": 3391420,
      "node_id": "MDQ6VXNlcjMzOTE0MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3391420?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChihChengLiang",
      "html_url": "https://github.com/ChihChengLiang",
      "followers_url": "https://api.github.com/users/ChihChengLiang/followers",
      "following_url": "https://api.github.com/users/ChihChengLiang/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChihChengLiang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChihChengLiang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChihChengLiang/subscriptions",
      "organizations_url": "https://api.github.com/users/ChihChengLiang/orgs",
      "repos_url": "https://api.github.com/users/ChihChengLiang/repos",
      "events_url": "https://api.github.com/users/ChihChengLiang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChihChengLiang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-12T08:02:45Z",
    "updated_at": "2022-05-12T08:02:45Z",
    "author_association": "MEMBER",
    "body": "@jtraglia I plan to issue a release 1.8.1 to support linux/arm64 and file a PR here. Also, attempt to use stable rust for it. It might take some days. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1124659585/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1126527887",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/2886#issuecomment-1126527887",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2886",
    "id": 1126527887,
    "node_id": "IC_kwDOCOoGbc5DJXOP",
    "user": {
      "login": "jtraglia",
      "id": 95511699,
      "node_id": "U_kgDOBbFkkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/95511699?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtraglia",
      "html_url": "https://github.com/jtraglia",
      "followers_url": "https://api.github.com/users/jtraglia/followers",
      "following_url": "https://api.github.com/users/jtraglia/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtraglia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtraglia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtraglia/subscriptions",
      "organizations_url": "https://api.github.com/users/jtraglia/orgs",
      "repos_url": "https://api.github.com/users/jtraglia/repos",
      "events_url": "https://api.github.com/users/jtraglia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtraglia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-13T21:37:58Z",
    "updated_at": "2022-05-13T21:37:58Z",
    "author_association": "MEMBER",
    "body": "@ChihChengLiang 1.8.1 works great for my aarch64 systems, thanks!\r\n\r\n#### Linux on ARM (aarch64)\r\n```\r\n$ pip install milagro-bls-binding\r\nCollecting milagro-bls-binding\r\n  Downloading milagro_bls_binding-1.8.1-cp36-abi3-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (1.2 MB)\r\nInstalling collected packages: milagro-bls-binding\r\nSuccessfully installed milagro-bls-binding-1.8.1\r\n```\r\n\r\n#### macOS on ARM (aarch64)\r\n```\r\n$ pip install milagro-bls-binding\r\nCollecting milagro-bls-binding\r\n  Downloading milagro_bls_binding-1.8.1-cp36-abi3-macosx_10_9_x86_64.macosx_11_0_arm64.macosx_10_9_universal2.whl (809 kB)\r\nInstalling collected packages: milagro-bls-binding\r\nSuccessfully installed milagro-bls-binding-1.8.1\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1126527887/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
