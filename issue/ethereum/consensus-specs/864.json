{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/864",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/864/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/864/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/864/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/864",
  "id": 427360188,
  "node_id": "MDU6SXNzdWU0MjczNjAxODg=",
  "number": 864,
  "title": "Custody game checklist",
  "user": {
    "login": "JustinDrake",
    "id": 731743,
    "node_id": "MDQ6VXNlcjczMTc0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JustinDrake",
    "html_url": "https://github.com/JustinDrake",
    "followers_url": "https://api.github.com/users/JustinDrake/followers",
    "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
    "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
    "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
    "repos_url": "https://api.github.com/users/JustinDrake/repos",
    "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1170173759,
      "node_id": "MDU6TGFiZWwxMTcwMTczNzU5",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/phase1",
      "name": "phase1",
      "color": "F7C242",
      "default": false,
      "description": ""
    },
    {
      "id": 2000873822,
      "node_id": "MDU6TGFiZWwyMDAwODczODIy",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/scope:custody",
      "name": "scope:custody",
      "color": "E98B2A",
      "default": false,
      "description": ""
    },
    {
      "id": 2001926658,
      "node_id": "MDU6TGFiZWwyMDAxOTI2NjU4",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/general:checklist",
      "name": "general:checklist",
      "color": "000000",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-03-31T05:28:05Z",
  "updated_at": "2020-06-17T12:19:18Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**TODO**\r\n\r\n- [x] 1. **Merkleisation-friendly challenge records**: Zero-out and over-write instead of `remove()` and `append()`.\r\n- [ ] 2. **Worst-case key reveals**: Increase `MAX_CUSTODY_KEY_REVEALS` and `EPOCHS_PER_CUSTODY_PERIOD` to deal with worst-case key reveal bandwidth.\r\n- [ ] 3. **Increase challenge bandwidth**: Increase `MAX_CUSTODY_CHUNK_CHALLENGES` and `MAX_CUSTODY_MIX_CHALLENGES`.\r\n- [x] 4. **Fix withdrawability**: Validators need to regain withdrawability after `responder.withdrawable_epoch = FAR_FUTURE_EPOCH`.\r\n- [x] 5. **MPC-friendly chunk bit**: Move to something like the Legendre symbol.\r\n- [x] 6. **Force timely key reveals**: Similar to timely challenge responses.\r\n- [x] 7. **Multiple challenges per validator**: Only the first challenge that passes the waiting period rewards the challenger.\r\n- [x] 8. **Stagger reveal periods**: To avoid large key reveal bursts at period boundaries.\r\n- [x] 9. **Remove `max_reveal_lateness`**: Find cleaner alternative.\r\n- [ ] 10. **Redefine `BYTES_PER_SHARD_BLOCK`**: Replace by `BYTES_PER_SHARD_BLOCK = 2 * BYTES_PER_SHARD_BLOCK_BODY`.\r\n- [ ] 11. **Economic review**: Particularly around sizes and structure of rewards and penalties.\r\n- [ ] 12. **Review `BYTES_PER_CUSTODY_CHUNK`**: There are pros and cons to increasing/decreasing.\r\n- [x] 13. **Executable spec**: Make custody game executable and add tests.\r\n- [x] 14. **Chunk response delay**: Add `MIN_ACTIVATION_EXIT_DELAY` for chunk responses. (To avoid proposers responding to their own challenges.)\r\n\r\n**Ideas to consider**\r\n\r\n- [ ] 1. **G1 key reveals**: 2x smaller key reveals.\r\n- [x] 2. **Merge RANDAO and key reveals**: Slightly reduced key reveal overhead.\r\n- [x] 3. ~**Batched reveals**: Batch reveals in case of lateness.~\r\n- [ ] 4. **Separate reveal per epoch**: Derive a new key per epoch from a single period reveal.\r\n- [ ] 5. **Forced responses**: Force proposers to respond to their challenges.\r\n- [x] 6. **Merkleise `chunk_bits`**: Consider storing a Merkle root of `chunk_bits` intead of `chunk_bits` directly.\r\n- [ ] 7. **Multi-challenges**: All attesters assigned random chunks to a single data root challenge.\r\n- [ ] 8. **Merge challenge records**: Merge custody chunk and custody bit challenges.\r\n- [ ] 9. **Dynamic chunk size**: Adjust chunk size to size of crosslink data.",
  "closed_by": {
    "login": "djrtwo",
    "id": 1433595,
    "node_id": "MDQ6VXNlcjE0MzM1OTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djrtwo",
    "html_url": "https://github.com/djrtwo",
    "followers_url": "https://api.github.com/users/djrtwo/followers",
    "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
    "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
    "organizations_url": "https://api.github.com/users/djrtwo/orgs",
    "repos_url": "https://api.github.com/users/djrtwo/repos",
    "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djrtwo/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/864/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/864/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/478413867",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/864#issuecomment-478413867",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/864",
    "id": 478413867,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODQxMzg2Nw==",
    "user": {
      "login": "vbuterin",
      "id": 2230894,
      "node_id": "MDQ6VXNlcjIyMzA4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2230894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vbuterin",
      "html_url": "https://github.com/vbuterin",
      "followers_url": "https://api.github.com/users/vbuterin/followers",
      "following_url": "https://api.github.com/users/vbuterin/following{/other_user}",
      "gists_url": "https://api.github.com/users/vbuterin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vbuterin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vbuterin/subscriptions",
      "organizations_url": "https://api.github.com/users/vbuterin/orgs",
      "repos_url": "https://api.github.com/users/vbuterin/repos",
      "events_url": "https://api.github.com/users/vbuterin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vbuterin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-01T02:23:03Z",
    "updated_at": "2019-04-01T02:23:03Z",
    "author_association": "MEMBER",
    "body": ">  10. Redefine BYTES_PER_SHARD_BLOCK: Replace by BYTES_PER_SHARD_BLOCK = 2 * BYTES_PER_SHARD_BLOCK_BODY.\r\n\r\nI don't agree with this. I feel like the shard block data size is a more \"fundamental\" constant; it's closer to what users care about. The fact that there's a 2x overhead is more of a protocol-specific detail.\r\n\r\n>  3. Batched reveals: Batch reveals in case of lateness.\r\n\r\nAlso don't think there's value to this. We still have to reveal each of the individual subkeys and verify them individually so there are no real savings.\r\n\r\nAlready started on some of the others (see open PRs).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/478413867/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/644205427",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/864#issuecomment-644205427",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/864",
    "id": 644205427,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDIwNTQyNw==",
    "user": {
      "login": "hwwhww",
      "id": 9263930,
      "node_id": "MDQ6VXNlcjkyNjM5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9263930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hwwhww",
      "html_url": "https://github.com/hwwhww",
      "followers_url": "https://api.github.com/users/hwwhww/followers",
      "following_url": "https://api.github.com/users/hwwhww/following{/other_user}",
      "gists_url": "https://api.github.com/users/hwwhww/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hwwhww/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hwwhww/subscriptions",
      "organizations_url": "https://api.github.com/users/hwwhww/orgs",
      "repos_url": "https://api.github.com/users/hwwhww/repos",
      "events_url": "https://api.github.com/users/hwwhww/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hwwhww/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-15T15:29:46Z",
    "updated_at": "2020-06-15T15:29:46Z",
    "author_association": "MEMBER",
    "body": "@dankrad do you mind checking the checklist again? It looks like many issues are solved in #1705 ðŸŽ‰ ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/644205427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/645327814",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/864#issuecomment-645327814",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/864",
    "id": 645327814,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTMyNzgxNA==",
    "user": {
      "login": "dankrad",
      "id": 6130607,
      "node_id": "MDQ6VXNlcjYxMzA2MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6130607?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dankrad",
      "html_url": "https://github.com/dankrad",
      "followers_url": "https://api.github.com/users/dankrad/followers",
      "following_url": "https://api.github.com/users/dankrad/following{/other_user}",
      "gists_url": "https://api.github.com/users/dankrad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dankrad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dankrad/subscriptions",
      "organizations_url": "https://api.github.com/users/dankrad/orgs",
      "repos_url": "https://api.github.com/users/dankrad/repos",
      "events_url": "https://api.github.com/users/dankrad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dankrad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-17T11:53:03Z",
    "updated_at": "2020-06-17T11:53:03Z",
    "author_association": "MEMBER",
    "body": "10 and 12 in the TODO seem outdated?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/645327814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/645339604",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/864#issuecomment-645339604",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/864",
    "id": 645339604,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTMzOTYwNA==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-17T12:19:18Z",
    "updated_at": "2020-06-17T12:19:18Z",
    "author_association": "MEMBER",
    "body": "> 10 and 12 in the TODO seem outdated?\r\n\r\nMay be worth starting a new checklist and closing this one :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/645339604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
