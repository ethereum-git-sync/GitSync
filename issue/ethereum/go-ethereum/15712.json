{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15712",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15712/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15712/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15712/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15712",
  "id": 283436800,
  "node_id": "MDU6SXNzdWUyODM0MzY4MDA=",
  "number": 15712,
  "title": "geth 1.7.3 keep dropping connection.",
  "user": {
    "login": "thomasyuan",
    "id": 11566317,
    "node_id": "MDQ6VXNlcjExNTY2MzE3",
    "avatar_url": "https://avatars.githubusercontent.com/u/11566317?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thomasyuan",
    "html_url": "https://github.com/thomasyuan",
    "followers_url": "https://api.github.com/users/thomasyuan/followers",
    "following_url": "https://api.github.com/users/thomasyuan/following{/other_user}",
    "gists_url": "https://api.github.com/users/thomasyuan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thomasyuan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thomasyuan/subscriptions",
    "organizations_url": "https://api.github.com/users/thomasyuan/orgs",
    "repos_url": "https://api.github.com/users/thomasyuan/repos",
    "events_url": "https://api.github.com/users/thomasyuan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thomasyuan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2017-12-20T03:15:10Z",
  "updated_at": "2018-06-06T13:36:45Z",
  "closed_at": "2018-06-06T13:36:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n#### System information\r\n\r\nGeth version: 1.7.3\r\nOS & Version: Linux\r\n\r\n#### Expected behaviour\r\nThrough console, ```admin.addPeers(\"enode://c3134450f60e18f767542ff24be4a2b87331da870d04087e66964a37be84b7fe9d65e853462f84a1f122aaf78ea4ce62413bac05822ac8a39241ecb8dcb68423@10.0.3.4:30010\")```\r\nThe node should keep a connection to the target.\r\n\r\n#### Actual behaviour\r\nIt keeps dropping connection for different reasons. (See logs)\r\n\r\n1. Drops connection because of ```err=EOF```, onle keeps 3.622s.\r\n```\r\n2017-12-20T02:47:47.110689177Z DEBUG[12-20|02:47:47] Ethereum message handling failed         id=c3134450f60e18f7 conn=inbound    err=EOF\r\n2017-12-20T02:47:47.110758576Z DEBUG[12-20|02:47:47] Removing Ethereum peer                   peer=c3134450f60e18f7\r\n2017-12-20T02:47:47.110845476Z DEBUG[12-20|02:47:47] Light Ethereum message handling failed   id=c3134450f60e18f7 conn=inbound    err=EOF\r\n2017-12-20T02:47:47.110869975Z DEBUG[12-20|02:47:47] Removing p2p peer                        id=c3134450f60e18f7 conn=inbound    duration=3.622s             peers=0 req=true  err=\"disconnect requested\"\r\n```\r\n\r\n2. Drops connection because of ```err=\"Unexpected response - \"``` and ```err=EOF```\r\n```\r\n2017-12-20T02:47:53.002812052Z DEBUG[12-20|02:47:53] Queued propagated block                  peer=c3134450f60e18f7 number=63 hash=d96ee0…798ecb queued=1\r\n2017-12-20T02:47:53.004487541Z DEBUG[12-20|02:47:53] Light Ethereum message handling failed   id=c3134450f60e18f7 conn=staticdial err=\"Unexpected response - \"\r\n2017-12-20T02:47:53.005025438Z DEBUG[12-20|02:47:53] Ethereum message handling failed         id=c3134450f60e18f7 conn=staticdial err=EOF\r\n2017-12-20T02:47:53.005043738Z DEBUG[12-20|02:47:53] Removing Ethereum peer                   peer=c3134450f60e18f7\r\n2017-12-20T02:47:53.005170537Z DEBUG[12-20|02:47:53] Removing p2p peer                        id=c3134450f60e18f7 conn=staticdial duration=4.016s             peers=2 req=false err=\"useless peer\"\r\n```\r\n#### Steps to reproduce the behavior\r\n1. create a genesis.json for the private network.\r\n2. setup bootnode.\r\n3. setup several nodes start with the `--bootnodes`\r\n4. connect to one node console, addPeers.\r\n\r\nI believe it's not 100% reproducible, but it tried over 10 times recently, it failed around 9 times. The static-nodes.json settings are similar. Sometimes it works, but most times it doesn't work.\r\n\r\n#### Logs\r\n```\r\n2017-12-20T02:47:43.488837986Z DEBUG[12-20|02:47:43] Adding p2p peer                          id=c3134450f60e18f7 name=Geth/v1.7.3-stable-4...                                                    addr=172.17.0.1:56864      peers=2\r\n2017-12-20T02:47:43.489582081Z DEBUG[12-20|02:47:43] Light Ethereum peer connected            id=c3134450f60e18f7 conn=inbound    name=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\n2017-12-20T02:47:43.490131177Z DEBUG[12-20|02:47:43] Ethereum peer connected                  id=c3134450f60e18f7 conn=inbound    name=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\n2017-12-20T02:47:43.491889365Z DEBUG[12-20|02:47:43] Relaxed downloader QoS values            rtt=20s confidence=0.287 ttl=1m0s\r\n2017-12-20T02:47:43.792308660Z DEBUG[12-20|02:47:43] Adding p2p peer                          id=8984e1579b19dbab name=Parity/v1.8.0-unstab...                                                    addr=68.72.143.90:30303    peers=3\r\n2017-12-20T02:47:43.792823256Z DEBUG[12-20|02:47:43] Ethereum peer connected                  id=8984e1579b19dbab conn=dyndial    name=Parity/v1.8.0-unstable-298ea1d74-20170718/x86_64-linux-gnu/rustc1.18.0-dev\r\n2017-12-20T02:47:43.794479245Z DEBUG[12-20|02:47:43] Ethereum handshake failed                id=8984e1579b19dbab conn=dyndial    err=EOF\r\n2017-12-20T02:47:43.794494945Z DEBUG[12-20|02:47:43] Removing p2p peer                        id=8984e1579b19dbab conn=dyndial    duration=2.288ms            peers=2 req=false err=EOF\r\n2017-12-20T02:47:43.819980975Z DEBUG[12-20|02:47:43] Adding p2p peer                          id=2142dede2cd1cbf7 name=Geth/v1.5.9-stable-3...                                                    addr=94.177.234.155:30303  peers=3\r\n2017-12-20T02:47:43.820263673Z DEBUG[12-20|02:47:43] Ethereum peer connected                  id=2142dede2cd1cbf7 conn=dyndial    name=Geth/v1.5.9-stable-3c26ec40/linux/go1.7.4\r\n2017-12-20T02:47:43.830393906Z DEBUG[12-20|02:47:43] Adding p2p peer                          id=663c2aeec367b898 name=Geth/v4.1.2/linux/go...                                                    addr=93.90.206.247:30303   peers=4\r\n2017-12-20T02:47:43.830456905Z DEBUG[12-20|02:47:43] Ethereum peer connected                  id=663c2aeec367b898 conn=dyndial    name=Geth/v4.1.2/linux/go1.8/acroduck.de\r\n2017-12-20T02:47:43.905251806Z DEBUG[12-20|02:47:43] Adding p2p peer                          id=7e5ef8e7b19705e8 name=Geth/v1.4.7-stable-6...                                                    addr=46.109.88.140:30303   peers=5\r\n2017-12-20T02:47:43.905298506Z DEBUG[12-20|02:47:43] Ethereum peer connected                  id=7e5ef8e7b19705e8 conn=dyndial    name=Geth/v1.4.7-stable-667a386d/linux/go1.6.2\r\n2017-12-20T02:47:43.906927495Z DEBUG[12-20|02:47:43] Ethereum handshake failed                id=2142dede2cd1cbf7 conn=dyndial    err=\"Genesis block mismatch - 7fb357f271b0b306 (!= 6d1aefdbf41d4ac1)\"\r\n2017-12-20T02:47:43.907615790Z DEBUG[12-20|02:47:43] Removing p2p peer                        id=2142dede2cd1cbf7 conn=dyndial    duration=87.430ms           peers=4 req=false err=\"Genesis block mismatch - 7fb357f271b0b306 (!= 6d1aefdbf41d4ac1)\"\r\n2017-12-20T02:47:43.924478478Z DEBUG[12-20|02:47:43] Ethereum handshake failed                id=663c2aeec367b898 conn=dyndial    err=\"Genesis block mismatch - 4d7df65052bb2126 (!= 6d1aefdbf41d4ac1)\"\r\n2017-12-20T02:47:43.925120473Z DEBUG[12-20|02:47:43] Removing p2p peer                        id=663c2aeec367b898 conn=dyndial    duration=95.867ms           peers=3 req=false err=\"Genesis block mismatch - 4d7df65052bb2126 (!= 6d1aefdbf41d4ac1)\"\r\n2017-12-20T02:47:44.034082246Z DEBUG[12-20|02:47:44] Adding p2p peer                          id=4b9b052aa24b2ebc name=Geth/v1.8.0-unstable...                                                    addr=91.197.65.70:30303    peers=4\r\n2017-12-20T02:47:44.034266045Z DEBUG[12-20|02:47:44] Ethereum peer connected                  id=4b9b052aa24b2ebc conn=dyndial    name=Geth/v1.8.0-unstable-fe070ab5/linux-amd64/go1.7.4\r\n2017-12-20T02:47:44.041844495Z DEBUG[12-20|02:47:44] Ethereum handshake failed                id=7e5ef8e7b19705e8 conn=dyndial    err=EOF\r\n2017-12-20T02:47:44.041872794Z DEBUG[12-20|02:47:44] Removing p2p peer                        id=7e5ef8e7b19705e8 conn=dyndial    duration=135.787ms          peers=3 req=true  err=\"subprotocol error\"\r\n2017-12-20T02:47:44.060288272Z DEBUG[12-20|02:47:44] Adding p2p peer                          id=39e3434772d7517d name=Parity/v1.8.2-unstab...                                                    addr=217.182.90.209:30303  peers=4\r\n2017-12-20T02:47:44.060308872Z DEBUG[12-20|02:47:44] Ethereum peer connected                  id=39e3434772d7517d conn=dyndial    name=Parity/v1.8.2-unstable-1b6588c-20171025/x86_64-linux-gnu/rustc1.20.0\r\n2017-12-20T02:47:44.207902888Z DEBUG[12-20|02:47:44] Ethereum handshake failed                id=4b9b052aa24b2ebc conn=dyndial    err=EOF\r\n2017-12-20T02:47:44.207991387Z DEBUG[12-20|02:47:44] Removing p2p peer                        id=4b9b052aa24b2ebc conn=dyndial    duration=173.936ms          peers=3 req=true  err=\"subprotocol error\"\r\n2017-12-20T02:47:44.270170773Z DEBUG[12-20|02:47:44] Ethereum handshake failed                id=39e3434772d7517d conn=dyndial    err=EOF\r\n2017-12-20T02:47:44.270202073Z DEBUG[12-20|02:47:44] Removing p2p peer                        id=39e3434772d7517d conn=dyndial    duration=210.141ms          peers=2 req=false err=\"read tcp 172.17.0.3:36972->217.182.90.209:30303: read: connection reset by peer\"\r\n2017-12-20T02:47:44.338385418Z DEBUG[12-20|02:47:44] Adding p2p peer                          id=2b16125f2def15b6 name=Parity/v1.8.0-unstab...                                                    addr=221.143.48.160:50300  peers=3\r\n2017-12-20T02:47:44.338473218Z DEBUG[12-20|02:47:44] Ethereum peer connected                  id=2b16125f2def15b6 conn=dyndial    name=Parity/v1.8.0-unstable-9882902-20171015/x86_64-linux-gnu/rustc1.21.0\r\n2017-12-20T02:47:44.339493211Z DEBUG[12-20|02:47:44] Ethereum handshake failed                id=2b16125f2def15b6 conn=dyndial    err=EOF\r\n2017-12-20T02:47:44.339539110Z DEBUG[12-20|02:47:44] Removing p2p peer                        id=2b16125f2def15b6 conn=dyndial    duration=1.052ms            peers=2 req=false err=EOF\r\n2017-12-20T02:47:44.387263392Z DEBUG[12-20|02:47:44] Adding p2p peer                          id=8f8a4e341a255f19 name=Parity/v1.8.2-unstab...                                                    addr=217.182.90.120:30303  peers=3\r\n2017-12-20T02:47:44.387660890Z DEBUG[12-20|02:47:44] Ethereum peer connected                  id=8f8a4e341a255f19 conn=dyndial    name=Parity/v1.8.2-unstable-1b6588c-20171025/x86_64-linux-gnu/rustc1.20.0\r\n2017-12-20T02:47:44.388620383Z DEBUG[12-20|02:47:44] Ethereum handshake failed                id=8f8a4e341a255f19 conn=dyndial    err=EOF\r\n2017-12-20T02:47:44.388663183Z DEBUG[12-20|02:47:44] Removing p2p peer                        id=8f8a4e341a255f19 conn=dyndial    duration=1.320ms            peers=2 req=false err=EOF\r\n2017-12-20T02:47:44.739071148Z DEBUG[12-20|02:47:44] invalid neighbour (176.59.49.136) from f9d1c4613e9a9442@54.81.73.212:30304: missing TCP port \r\n2017-12-20T02:47:44.739107147Z DEBUG[12-20|02:47:44] invalid neighbour (186.74.100.14) from f9d1c4613e9a9442@54.81.73.212:30304: metadata mismatch: got {186.74.100.14 51230 51230 e323159181cd933e88c4c4c72279b882f38b7b2c475b8ea0727500642638e71ae9a77c115cd8877ed56946f23860d87b2b8d2f1b1de370b76d0eb6a59936160a}, want enode://e323159181cd933e88c4c4c72279b882f38b7b2c475b8ea0727500642638e71ae9a77c115cd8877ed56946f23860d87b2b8d2f1b1de370b76d0eb6a59936160a@186.74.100.14:58231 \r\n2017-12-20T02:47:44.865870802Z DEBUG[12-20|02:47:44] invalid neighbour (106.133.174.144) from 922f589e76bc6ed6@46.188.65.115:40324: metadata mismatch: got {106.133.174.144 58331 58331 d78d1ff7de2669880f9a16708ddcd8438ca7e74002cde521b604c49b0e73c3da8efe9328f95d62f3d449260c5a2c3535c9ef476ddad62b3b7640e89253ab1b01}, want enode://d78d1ff7de2669880f9a16708ddcd8438ca7e74002cde521b604c49b0e73c3da8efe9328f95d62f3d449260c5a2c3535c9ef476ddad62b3b7640e89253ab1b01@106.133.176.136:57674 \r\n2017-12-20T02:47:44.959697277Z DEBUG[12-20|02:47:44] Recalculated downloader QoS values       rtt=20s confidence=0.644 ttl=1m0s\r\n2017-12-20T02:47:47.095031280Z DEBUG[12-20|02:47:47] Synchronising with the network           peer=c3134450f60e18f7 eth=63 head=ba7bda…ae3712 td=99 mode=full\r\n2017-12-20T02:47:47.095082080Z DEBUG[12-20|02:47:47] Retrieving remote chain height           peer=c3134450f60e18f7\r\n2017-12-20T02:47:47.095709876Z DEBUG[12-20|02:47:47] Fetching batch of headers                id=c3134450f60e18f7 conn=inbound    count=1   fromhash=ba7bda…ae3712 skip=0   reverse=false\r\n2017-12-20T02:47:47.096806869Z DEBUG[12-20|02:47:47] Remote head header identified            peer=c3134450f60e18f7 number=61 hash=ba7bda…ae3712\r\n2017-12-20T02:47:47.096844168Z DEBUG[12-20|02:47:47] Looking for common ancestor              peer=c3134450f60e18f7 local=60 remote=61\r\n2017-12-20T02:47:47.097242866Z DEBUG[12-20|02:47:47] Fetching batch of headers                id=c3134450f60e18f7 conn=inbound    count=4   fromnum=0   skip=15  reverse=false\r\n2017-12-20T02:47:47.097958761Z DEBUG[12-20|02:47:47] Found common ancestor                    peer=c3134450f60e18f7 number=48 hash=4f37c7…77a68e\r\n2017-12-20T02:47:47.097975661Z DEBUG[12-20|02:47:47] Directing header downloads               peer=c3134450f60e18f7 origin=49\r\n2017-12-20T02:47:47.098379758Z DEBUG[12-20|02:47:47] Downloading block bodies                 origin=49\r\n2017-12-20T02:47:47.098393258Z DEBUG[12-20|02:47:47] Fetching batch of headers                id=c3134450f60e18f7 conn=inbound    count=128 fromnum=240 skip=191 reverse=false\r\n2017-12-20T02:47:47.098400158Z DEBUG[12-20|02:47:47] Downloading transaction receipts         origin=49\r\n2017-12-20T02:47:47.099583550Z DEBUG[12-20|02:47:47] Fetching batch of headers                id=c3134450f60e18f7 conn=inbound    count=192 fromnum=49  skip=0   reverse=false\r\n2017-12-20T02:47:47.100619843Z DEBUG[12-20|02:47:47] Fetching batch of headers                id=c3134450f60e18f7 conn=inbound    count=192 fromnum=62  skip=0   reverse=false\r\n2017-12-20T02:47:47.102535931Z DEBUG[12-20|02:47:47] Inserting downloaded chain               items=13 firstnum=49 firsthash=687d8b…98228d lastnum=61 lasthash=ba7bda…ae3712\r\n2017-12-20T02:47:47.102891828Z DEBUG[12-20|02:47:47] No more headers available                peer=c3134450f60e18f7\r\n2017-12-20T02:47:47.102907028Z DEBUG[12-20|02:47:47] Header download terminated               peer=c3134450f60e18f7\r\n2017-12-20T02:47:47.102912328Z DEBUG[12-20|02:47:47] Data fetching completed                  type=bodies\r\n2017-12-20T02:47:47.102915928Z DEBUG[12-20|02:47:47] Block body download terminated           err=nil\r\n2017-12-20T02:47:47.102919528Z DEBUG[12-20|02:47:47] Data fetching completed                  type=receipts\r\n2017-12-20T02:47:47.102923228Z DEBUG[12-20|02:47:47] Transaction receipt download terminated  err=nil\r\n2017-12-20T02:47:47.104646717Z DEBUG[12-20|02:47:47] Trie cache stats after commit            misses=9 unloads=0\r\n2017-12-20T02:47:47.104659417Z DEBUG[12-20|02:47:47] Chain split detected                     number=59 hash=99215d…c5baa3 drop=1 dropfrom=478dd5…942596 add=1 addfrom=646a51…ba1c65\r\n2017-12-20T02:47:47.105108914Z DEBUG[12-20|02:47:47] Inserted new block                       number=60 hash=646a51…ba1c65 uncles=0 txs=0 gas=0 elapsed=402.697µs\r\n2017-12-20T02:47:47.105523011Z DEBUG[12-20|02:47:47] Trie cache stats after commit            misses=9 unloads=0\r\n2017-12-20T02:47:47.105552511Z DEBUG[12-20|02:47:47] Inserted new block                       number=61 hash=ba7bda…ae3712 uncles=0 txs=0 gas=0 elapsed=446.897µs\r\n2017-12-20T02:47:47.105625610Z INFO [12-20|02:47:47] Imported new chain segment               blocks=2 txs=0 mgas=0.000 elapsed=2.506ms     mgasps=0.000 number=61 hash=ba7bda…ae3712 ignored=11\r\n2017-12-20T02:47:47.105649610Z DEBUG[12-20|02:47:47] Synchronisation terminated               elapsed=10.424531ms\r\n2017-12-20T02:47:47.106865402Z DEBUG[12-20|02:47:47] Announcing block to peers                number=61 hash=ba7bda…ae3712 td=99 reorg=1\r\n2017-12-20T02:47:47.107800796Z DEBUG[12-20|02:47:47] Reinjecting stale transactions           count=0\r\n2017-12-20T02:47:47.108947088Z DEBUG[12-20|02:47:47] Ethereum message handling failed         id=018036b6e637288e conn=staticdial err=EOF\r\n2017-12-20T02:47:47.108996288Z DEBUG[12-20|02:47:47] Removing Ethereum peer                   peer=018036b6e637288e\r\n2017-12-20T02:47:47.109120087Z DEBUG[12-20|02:47:47] Light Ethereum message handling failed   id=018036b6e637288e conn=staticdial err=EOF\r\n2017-12-20T02:47:47.109145187Z DEBUG[12-20|02:47:47] Removing p2p peer                        id=018036b6e637288e conn=staticdial duration=29.066s            peers=1 req=true  err=\"disconnect requested\"\r\n2017-12-20T02:47:47.110689177Z DEBUG[12-20|02:47:47] Ethereum message handling failed         id=c3134450f60e18f7 conn=inbound    err=EOF\r\n2017-12-20T02:47:47.110758576Z DEBUG[12-20|02:47:47] Removing Ethereum peer                   peer=c3134450f60e18f7\r\n2017-12-20T02:47:47.110845476Z DEBUG[12-20|02:47:47] Light Ethereum message handling failed   id=c3134450f60e18f7 conn=inbound    err=EOF\r\n2017-12-20T02:47:47.110869975Z DEBUG[12-20|02:47:47] Removing p2p peer                        id=c3134450f60e18f7 conn=inbound    duration=3.622s             peers=0 req=true  err=\"disconnect requested\"\r\n2017-12-20T02:47:47.117685030Z DEBUG[12-20|02:47:47] Adding p2p peer                          id=018036b6e637288e name=Geth/v1.7.3-stable-4...                                                    addr=172.17.0.1:56918      peers=1\r\n2017-12-20T02:47:47.135154514Z DEBUG[12-20|02:47:47] Light Ethereum peer connected            id=018036b6e637288e conn=inbound    name=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\n2017-12-20T02:47:47.135172014Z DEBUG[12-20|02:47:47] Ethereum peer connected                  id=018036b6e637288e conn=inbound    name=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\n2017-12-20T02:47:48.050764142Z DEBUG[12-20|02:47:48] invalid neighbour (211.20.1.173) from cf7297b213c8203f@52.36.60.155:30304: low port \r\n2017-12-20T02:47:48.527537284Z DEBUG[12-20|02:47:48] Adding p2p peer                          id=25a1d29017e23c2f name=Geth/v1.7.3-stable-4...                                                    addr=172.17.0.1:56936      peers=2\r\n2017-12-20T02:47:48.543288780Z DEBUG[12-20|02:47:48] Light Ethereum peer connected            id=25a1d29017e23c2f conn=inbound    name=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\n2017-12-20T02:47:48.543305180Z DEBUG[12-20|02:47:48] Ethereum peer connected                  id=25a1d29017e23c2f conn=inbound    name=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\n2017-12-20T02:47:48.543311480Z DEBUG[12-20|02:47:48] Relaxed downloader QoS values            rtt=20s confidence=0.500 ttl=1m0s\r\n2017-12-20T02:47:48.769636181Z DEBUG[12-20|02:47:48] invalid neighbour (51.15.45.114) from 03a9c9b726a884d6@139.59.246.20:30304: metadata mismatch: got {51.15.45.114 30304 30304 e2a3587b7b41acfc49eddea9229281905d252efba0baf565cf6276df17faf04801b7879eead757da8b5be13b05f25e775ab6d857ff264bc53a89c027a657dd10}, want enode://e2a3587b7b41acfc49eddea9229281905d252efba0baf565cf6276df17faf04801b7879eead757da8b5be13b05f25e775ab6d857ff264bc53a89c027a657dd10@51.15.45.114:3126 \r\n2017-12-20T02:47:48.988283933Z DEBUG[12-20|02:47:48] Adding p2p peer                          id=c3134450f60e18f7 name=Geth/v1.7.3-stable-4...                                                    addr=10.0.3.4:30010        peers=3\r\n2017-12-20T02:47:48.988806129Z DEBUG[12-20|02:47:48] Light Ethereum peer connected            id=c3134450f60e18f7 conn=staticdial name=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\n2017-12-20T02:47:48.989492425Z DEBUG[12-20|02:47:48] Ethereum peer connected                  id=c3134450f60e18f7 conn=staticdial name=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\n2017-12-20T02:47:48.990689117Z DEBUG[12-20|02:47:48] Relaxed downloader QoS values            rtt=20s confidence=0.333 ttl=1m0s\r\n2017-12-20T02:47:49.849314839Z DEBUG[12-20|02:47:49] Adding p2p peer                          id=399dde242064e038 name=Gnekonium/v1.6.6-sta...                                                    addr=52.168.133.100:28568  peers=4\r\n2017-12-20T02:47:49.849519238Z DEBUG[12-20|02:47:49] Ethereum peer connected                  id=399dde242064e038 conn=dyndial    name=Gnekonium/v1.6.6-stable-0459a75c/linux-amd64/go1.8.3\r\n2017-12-20T02:47:49.857104888Z DEBUG[12-20|02:47:49] Ethereum handshake failed                id=399dde242064e038 conn=dyndial    err=\"Genesis block mismatch - 1a505395bfe4b2a8 (!= 6d1aefdbf41d4ac1)\"\r\n2017-12-20T02:47:49.857138088Z DEBUG[12-20|02:47:49] Removing p2p peer                        id=399dde242064e038 conn=dyndial    duration=6.801ms            peers=3 req=true  err=\"subprotocol error\"\r\n2017-12-20T02:47:50.025726173Z DEBUG[12-20|02:47:50] Adding p2p peer                          id=6a183e77a1e53e2c name=Geth/v1.7.1-unstable...                                                    addr=62.138.2.253:30313    peers=4\r\n2017-12-20T02:47:50.026053571Z DEBUG[12-20|02:47:50] Ethereum peer connected                  id=6a183e77a1e53e2c conn=dyndial    name=Geth/v1.7.1-unstable-5705ad00/linux-amd64/go1.7.3\r\n2017-12-20T02:47:50.058348258Z DEBUG[12-20|02:47:50] Adding p2p peer                          id=e0957568cceeb27b name=Geth/v1.7.2-stable-1...                                                    addr=187.223.192.200:30303 peers=5\r\n2017-12-20T02:47:50.058658756Z DEBUG[12-20|02:47:50] Light Ethereum peer connected            id=e0957568cceeb27b conn=dyndial    name=Geth/v1.7.2-stable-1db4ecdc/windows-amd64/go1.9\r\n2017-12-20T02:47:50.120259149Z DEBUG[12-20|02:47:50] Ethereum handshake failed                id=6a183e77a1e53e2c conn=dyndial    err=\"Genesis block mismatch - 4fa57903dad05875 (!= 6d1aefdbf41d4ac1)\"\r\n2017-12-20T02:47:50.121303642Z DEBUG[12-20|02:47:50] Removing p2p peer                        id=6a183e77a1e53e2c conn=dyndial    duration=95.645ms           peers=4 req=false err=\"Genesis block mismatch - 4fa57903dad05875 (!= 6d1aefdbf41d4ac1)\"\r\n2017-12-20T02:47:50.160417084Z DEBUG[12-20|02:47:50] Adding p2p peer                          id=f8ee9df2f12f71f2 name=Parity/v1.8.2-beta-1...                                                    addr=51.174.197.117:30303  peers=5\r\n2017-12-20T02:47:50.160713382Z DEBUG[12-20|02:47:50] Ethereum peer connected                  id=f8ee9df2f12f71f2 conn=dyndial    name=Parity/v1.8.2-beta-1b6588cb2-20171025/x86_64-linux-gnu/rustc1.21.0\r\n2017-12-20T02:47:50.167140240Z DEBUG[12-20|02:47:50] Light Ethereum handshake failed          id=e0957568cceeb27b conn=dyndial    err=\"Genesis block mismatch - d4e56740f876aef8 (!= 6d1aefdbf41d4ac1)\"\r\n2017-12-20T02:47:50.167499037Z DEBUG[12-20|02:47:50] Removing p2p peer                        id=e0957568cceeb27b conn=dyndial    duration=109.090ms          peers=4 req=false err=\"Genesis block mismatch - d4e56740f876aef8 (!= 6d1aefdbf41d4ac1)\"\r\n2017-12-20T02:47:50.797318480Z DEBUG[12-20|02:47:50] Light Ethereum message handling failed   id=018036b6e637288e conn=inbound    err=\"Unexpected response - \"\r\n2017-12-20T02:47:50.797358480Z DEBUG[12-20|02:47:50] Ethereum message handling failed         id=018036b6e637288e conn=inbound    err=EOF\r\n2017-12-20T02:47:50.797800277Z DEBUG[12-20|02:47:50] Removing Ethereum peer                   peer=018036b6e637288e\r\n2017-12-20T02:47:50.799846163Z DEBUG[12-20|02:47:50] Removing p2p peer                        id=018036b6e637288e conn=inbound    duration=3.682s             peers=3 req=false err=\"useless peer\"\r\n2017-12-20T02:47:50.809886597Z DEBUG[12-20|02:47:50] Adding p2p peer                          id=018036b6e637288e name=Geth/v1.7.3-stable-4...                                                    addr=10.0.3.4:30020        peers=4\r\n2017-12-20T02:47:50.810625192Z DEBUG[12-20|02:47:50] Light Ethereum peer connected            id=018036b6e637288e conn=staticdial name=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\n2017-12-20T02:47:50.811387287Z DEBUG[12-20|02:47:50] Ethereum peer connected                  id=018036b6e637288e conn=staticdial name=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\n2017-12-20T02:47:50.811641085Z DEBUG[12-20|02:47:50] Relaxed downloader QoS values            rtt=20s confidence=0.222 ttl=1m0s\r\n2017-12-20T02:47:50.939279943Z DEBUG[12-20|02:47:50] Ethereum handshake failed                id=f8ee9df2f12f71f2 conn=dyndial    err=EOF\r\n2017-12-20T02:47:50.939316842Z DEBUG[12-20|02:47:50] Removing p2p peer                        id=f8ee9df2f12f71f2 conn=dyndial    duration=778.907ms          peers=3 req=false err=\"read tcp 172.17.0.3:44392->51.174.197.117:30303: read: connection reset by peer\"\r\n2017-12-20T02:47:52.572633583Z DEBUG[12-20|02:47:52] invalid neighbour (172.56.12.212) from 088201e6e5081f69@207.154.220.251:30304: missing TCP port \r\n2017-12-20T02:47:52.572681983Z DEBUG[12-20|02:47:52] invalid neighbour (96.30.108.193) from 088201e6e5081f69@207.154.220.251:30304: metadata mismatch: got {96.30.108.193 2868 2868 e073e1ae3f2c289010bfd8f384e184c59ed46cca5bc841bc8738c727f3544de2688491c087300b24d5e6cb4512ab860416172db10a00ce1e581037e525fee83a}, want enode://e073e1ae3f2c289010bfd8f384e184c59ed46cca5bc841bc8738c727f3544de2688491c087300b24d5e6cb4512ab860416172db10a00ce1e581037e525fee83a@96.30.109.175:51288 \r\n2017-12-20T02:47:52.574006974Z DEBUG[12-20|02:47:52] invalid neighbour (172.58.84.11) from 088201e6e5081f69@207.154.220.251:30304: missing TCP port \r\n2017-12-20T02:47:52.587954682Z DEBUG[12-20|02:47:52] invalid neighbour (94.232.206.231) from 48c34e1412d4081f@81.161.138.239:30304: metadata mismatch: got {94.232.206.231 38588 0 b2fed8369d6474582c693a59161cafeb2918dd29ab1baf518476da7b3317c4bc7145a4da728275a428807898ff9b5716bde6ffc22a95ec89551df074052a8123}, want enode://b2fed8369d6474582c693a59161cafeb2918dd29ab1baf518476da7b3317c4bc7145a4da728275a428807898ff9b5716bde6ffc22a95ec89551df074052a8123@94.232.206.231:56186 \r\n2017-12-20T02:47:53.002812052Z DEBUG[12-20|02:47:53] Queued propagated block                  peer=c3134450f60e18f7 number=63 hash=d96ee0…798ecb queued=1\r\n2017-12-20T02:47:53.004487541Z DEBUG[12-20|02:47:53] Light Ethereum message handling failed   id=c3134450f60e18f7 conn=staticdial err=\"Unexpected response - \"\r\n2017-12-20T02:47:53.005025438Z DEBUG[12-20|02:47:53] Ethereum message handling failed         id=c3134450f60e18f7 conn=staticdial err=EOF\r\n2017-12-20T02:47:53.005043738Z DEBUG[12-20|02:47:53] Removing Ethereum peer                   peer=c3134450f60e18f7\r\n2017-12-20T02:47:53.005170537Z DEBUG[12-20|02:47:53] Removing p2p peer                        id=c3134450f60e18f7 conn=staticdial duration=4.016s             peers=2 req=false err=\"useless peer\"\r\n2017-12-20T02:47:53.742204195Z DEBUG[12-20|02:47:53] Queued propagated block                  peer=018036b6e637288e number=63 hash=35fd1a…652d1f queued=2\r\n```\r\n",
  "closed_by": {
    "login": "thomasyuan",
    "id": 11566317,
    "node_id": "MDQ6VXNlcjExNTY2MzE3",
    "avatar_url": "https://avatars.githubusercontent.com/u/11566317?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thomasyuan",
    "html_url": "https://github.com/thomasyuan",
    "followers_url": "https://api.github.com/users/thomasyuan/followers",
    "following_url": "https://api.github.com/users/thomasyuan/following{/other_user}",
    "gists_url": "https://api.github.com/users/thomasyuan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thomasyuan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thomasyuan/subscriptions",
    "organizations_url": "https://api.github.com/users/thomasyuan/orgs",
    "repos_url": "https://api.github.com/users/thomasyuan/repos",
    "events_url": "https://api.github.com/users/thomasyuan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thomasyuan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15712/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15712/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/353123600",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15712#issuecomment-353123600",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15712",
    "id": 353123600,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzEyMzYwMA==",
    "user": {
      "login": "thomasyuan",
      "id": 11566317,
      "node_id": "MDQ6VXNlcjExNTY2MzE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/11566317?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thomasyuan",
      "html_url": "https://github.com/thomasyuan",
      "followers_url": "https://api.github.com/users/thomasyuan/followers",
      "following_url": "https://api.github.com/users/thomasyuan/following{/other_user}",
      "gists_url": "https://api.github.com/users/thomasyuan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thomasyuan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thomasyuan/subscriptions",
      "organizations_url": "https://api.github.com/users/thomasyuan/orgs",
      "repos_url": "https://api.github.com/users/thomasyuan/repos",
      "events_url": "https://api.github.com/users/thomasyuan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thomasyuan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-20T17:09:18Z",
    "updated_at": "2017-12-21T11:57:02Z",
    "author_association": "NONE",
    "body": "Update: The private network I was setting is enabled v5 discovery on all nodes. \r\nBut If I disable v5 discovery on most nodes, just keep one running v5 discovery, it seems much stable. Although peer didn't find each other through bootnode, at least they can keep the connection to bootnode.\r\n\r\n\r\nSeems the bootnode shouldn't  run both (v4 and v5) discovery protocol? \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/353123600/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/395070808",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15712#issuecomment-395070808",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15712",
    "id": 395070808,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTA3MDgwOA==",
    "user": {
      "login": "thomasyuan",
      "id": 11566317,
      "node_id": "MDQ6VXNlcjExNTY2MzE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/11566317?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thomasyuan",
      "html_url": "https://github.com/thomasyuan",
      "followers_url": "https://api.github.com/users/thomasyuan/followers",
      "following_url": "https://api.github.com/users/thomasyuan/following{/other_user}",
      "gists_url": "https://api.github.com/users/thomasyuan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thomasyuan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thomasyuan/subscriptions",
      "organizations_url": "https://api.github.com/users/thomasyuan/orgs",
      "repos_url": "https://api.github.com/users/thomasyuan/repos",
      "events_url": "https://api.github.com/users/thomasyuan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thomasyuan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-06T13:36:45Z",
    "updated_at": "2018-06-06T13:36:45Z",
    "author_association": "NONE",
    "body": "Really out of date.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/395070808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
