{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23014",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23014/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23014/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23014/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23014",
  "id": 914756681,
  "node_id": "MDU6SXNzdWU5MTQ3NTY2ODE=",
  "number": 23014,
  "title": "geth node returned lower gas limit",
  "user": {
    "login": "arshad-binary",
    "id": 55420460,
    "node_id": "MDQ6VXNlcjU1NDIwNDYw",
    "avatar_url": "https://avatars.githubusercontent.com/u/55420460?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/arshad-binary",
    "html_url": "https://github.com/arshad-binary",
    "followers_url": "https://api.github.com/users/arshad-binary/followers",
    "following_url": "https://api.github.com/users/arshad-binary/following{/other_user}",
    "gists_url": "https://api.github.com/users/arshad-binary/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/arshad-binary/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/arshad-binary/subscriptions",
    "organizations_url": "https://api.github.com/users/arshad-binary/orgs",
    "repos_url": "https://api.github.com/users/arshad-binary/repos",
    "events_url": "https://api.github.com/users/arshad-binary/events{/privacy}",
    "received_events_url": "https://api.github.com/users/arshad-binary/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-06-08T10:14:37Z",
  "updated_at": "2021-06-08T14:32:09Z",
  "closed_at": "2021-06-08T12:31:47Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Version : geth-linux-amd64-1.10.3-991384a7\r\nFor ERC20 tokens, to be specific USDC transaction i calculate the gas limit using `eth_estimateGas`. I have observed that sometimes the gas limit i set in the transaction is not enough that leads to transaction failed due to `out of gas` issue. \r\nCan someone help me to understand is `eth_estimateGas` reliable ?\r\none of sample txn failed is https://etherscan.io/tx/0x1840a8c649f5c9abdfab868985296253c2100055a4719d2932a47cb537ac52a3\r\n\r\nTIA",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23014/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23014/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/856724690",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23014#issuecomment-856724690",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23014",
    "id": 856724690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NjcyNDY5MA==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-08T12:31:34Z",
    "updated_at": "2021-06-08T12:31:34Z",
    "author_association": "MEMBER",
    "body": "So the gas estimation is highly dependent on the current state of the contract. Thus if a prior transaction changes the state, the gas estimation might not be accurate anymore. You can see for example that this transaction https://etherscan.io/tx/0x765413b691aba47927a41db1cce138c5e2aa7396e562764cc4cbb6d828cc02ed used more than 66.000 gas for a transfer, while others use ~33.000.\n'eth_estimateGas' uses a binary search to find the lowest gas limit that successfully executes the transaction, if something un the contract changes between execution and estimation, then the result will be unreliable. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/856724690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/856768315",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23014#issuecomment-856768315",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23014",
    "id": 856768315,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1Njc2ODMxNQ==",
    "user": {
      "login": "arshad-binary",
      "id": 55420460,
      "node_id": "MDQ6VXNlcjU1NDIwNDYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/55420460?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arshad-binary",
      "html_url": "https://github.com/arshad-binary",
      "followers_url": "https://api.github.com/users/arshad-binary/followers",
      "following_url": "https://api.github.com/users/arshad-binary/following{/other_user}",
      "gists_url": "https://api.github.com/users/arshad-binary/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arshad-binary/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arshad-binary/subscriptions",
      "organizations_url": "https://api.github.com/users/arshad-binary/orgs",
      "repos_url": "https://api.github.com/users/arshad-binary/repos",
      "events_url": "https://api.github.com/users/arshad-binary/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arshad-binary/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-08T13:29:04Z",
    "updated_at": "2021-06-08T13:29:04Z",
    "author_association": "NONE",
    "body": "@MariusVanDerWijden thanks for your quick response. \r\nSo what I can see is this is something managed at the blockchain/network end. What you suggest or what is the best way to handle such situations. Any suggestion will be much helpful.\r\n\r\nTIA.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/856768315/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/856820612",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23014#issuecomment-856820612",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23014",
    "id": 856820612,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NjgyMDYxMg==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-08T14:32:09Z",
    "updated_at": "2021-06-08T14:32:09Z",
    "author_association": "MEMBER",
    "body": "The gas limit is just the upper bound of what a transaction might consume. If you are certain that the contract that you call will not do any weird stuff (e.g. mint gas tokens/burn your gas) you can just increase the gas limit manually. This won't impact the fees that you pay if the transaction succeeds. So you can just assume a gas limit of 100.000 for token transfers for example.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/856820612/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
