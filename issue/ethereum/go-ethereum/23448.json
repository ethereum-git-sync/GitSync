{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23448",
  "id": 977940572,
  "node_id": "MDU6SXNzdWU5Nzc5NDA1NzI=",
  "number": 23448,
  "title": "Expose State Sync ETA in eth.syncing",
  "user": {
    "login": "mohamedmansour",
    "id": 68524,
    "node_id": "MDQ6VXNlcjY4NTI0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68524?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mohamedmansour",
    "html_url": "https://github.com/mohamedmansour",
    "followers_url": "https://api.github.com/users/mohamedmansour/followers",
    "following_url": "https://api.github.com/users/mohamedmansour/following{/other_user}",
    "gists_url": "https://api.github.com/users/mohamedmansour/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mohamedmansour/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mohamedmansour/subscriptions",
    "organizations_url": "https://api.github.com/users/mohamedmansour/orgs",
    "repos_url": "https://api.github.com/users/mohamedmansour/repos",
    "events_url": "https://api.github.com/users/mohamedmansour/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mohamedmansour/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233652,
      "node_id": "MDU6TGFiZWw3MjIzMzY1Mg==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:feature",
      "name": "type:feature",
      "color": "84b6eb",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-08-24T10:17:49Z",
  "updated_at": "2021-09-23T14:46:44Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "I run a public Geth node for watchtheburn and when the node is syncing, I show the status on the loading screen. Once geth goes into State sync, there is no user feedback in the `eth_syncing` API, whereas the logs do have feedback:\r\n\r\n```\r\nINFO [08-24|10:13:03.126] State sync in progress                   synced=24.84% state=33.15GiB   accounts=36,914,230@8.21GiB   slots=119,992,027@24.30GiB codes=131,214@663.99MiB eta=3h15m24.538s\r\n```\r\n\r\nIt would be nice if `eth_syncing` would be updated to have state sync information so we could pass that information to the users instead of being stuff at 99% synced (currentBlock/highestBlock)",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/904959785",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23448#issuecomment-904959785",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448",
    "id": 904959785,
    "node_id": "IC_kwDOAOvK98418Jcp",
    "user": {
      "login": "xanoni",
      "id": 77220130,
      "node_id": "MDQ6VXNlcjc3MjIwMTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/77220130?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xanoni",
      "html_url": "https://github.com/xanoni",
      "followers_url": "https://api.github.com/users/xanoni/followers",
      "following_url": "https://api.github.com/users/xanoni/following{/other_user}",
      "gists_url": "https://api.github.com/users/xanoni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xanoni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xanoni/subscriptions",
      "organizations_url": "https://api.github.com/users/xanoni/orgs",
      "repos_url": "https://api.github.com/users/xanoni/repos",
      "events_url": "https://api.github.com/users/xanoni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xanoni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-24T20:42:00Z",
    "updated_at": "2021-08-24T20:45:20Z",
    "author_association": "NONE",
    "body": "This would be very interesting, but how can I even ask Geth to write a logfile? So far I was just redirecting stdout and stderr.\r\n\r\nAlso can't see it here:\r\n\r\n```bash\r\n$ geth --help|grep log\r\n  --log.json                          Format logs with JSON\r\n  --log.backtrace value               Request a stack trace at a specific logging statement (e.g. \"block.go:271\")\r\n  --log.debug                         Prepends log messages with call-site location (file and line number)\r\n```\r\n\r\nIs it part of one of the sub-commands? Which?\r\n\r\nEDIT: Oh, I just realized that you're probably just talking about stdout .... never mind then.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/904959785/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/911383940",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23448#issuecomment-911383940",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448",
    "id": 911383940,
    "node_id": "IC_kwDOAOvK9842Up2E",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-02T08:31:07Z",
    "updated_at": "2021-09-02T08:32:34Z",
    "author_association": "MEMBER",
    "body": "We can't really provide an estimate on the healing phase of snap-sync, just like we can't provide an ETA on fast-sync. \r\nThe longer the first phase (snap download) takes, the more out-of-sync will the data be. Therefore, it will make the heal-phase longer. And that's kind of recursive, the more time it takes, the more work accumulates. \r\n\r\nSo the `99%` done is only for the first phase, not the second phase. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/911383940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/911388208",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23448#issuecomment-911388208",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448",
    "id": 911388208,
    "node_id": "IC_kwDOAOvK9842Uq4w",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-02T08:34:44Z",
    "updated_at": "2021-09-02T08:34:44Z",
    "author_association": "MEMBER",
    "body": "Spec is here: https://github.com/ethereum/execution-apis/blob/main/src/schemas/client.json",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/911388208/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/911564393",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23448#issuecomment-911564393",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448",
    "id": 911564393,
    "node_id": "IC_kwDOAOvK9842VV5p",
    "user": {
      "login": "mohamedmansour",
      "id": 68524,
      "node_id": "MDQ6VXNlcjY4NTI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/68524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mohamedmansour",
      "html_url": "https://github.com/mohamedmansour",
      "followers_url": "https://api.github.com/users/mohamedmansour/followers",
      "following_url": "https://api.github.com/users/mohamedmansour/following{/other_user}",
      "gists_url": "https://api.github.com/users/mohamedmansour/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mohamedmansour/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mohamedmansour/subscriptions",
      "organizations_url": "https://api.github.com/users/mohamedmansour/orgs",
      "repos_url": "https://api.github.com/users/mohamedmansour/repos",
      "events_url": "https://api.github.com/users/mohamedmansour/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mohamedmansour/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-02T11:28:49Z",
    "updated_at": "2021-09-02T11:28:49Z",
    "author_association": "MEMBER",
    "body": "> We can't really provide an estimate on the healing phase of snap-sync, just like we can't provide an ETA on fast-sync.\r\n> The longer the first phase (snap download) takes, the more out-of-sync will the data be. Therefore, it will make the heal-phase longer. And that's kind of recursive, the more time it takes, the more work accumulates.\r\n> \r\n> So the `99%` done is only for the first phase, not the second phase.\r\n\r\n Canâ€™t we expose what geth placed in the log output accessible to the api? The log output has alot of data not available in the api which would be nice to have additional fields in eth.syncing",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/911564393/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/911833097",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23448#issuecomment-911833097",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448",
    "id": 911833097,
    "node_id": "IC_kwDOAOvK9842WXgJ",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-02T15:57:48Z",
    "updated_at": "2021-09-02T15:57:48Z",
    "author_association": "MEMBER",
    "body": "@mohamedmansour I opened an issue about this on magicians: https://ethereum-magicians.org/t/improve-syncing-rpc-call/6994\r\nIMHO we should go this route and not do a solo action from the geth side. It is great that there is now a rpc spec and we should work more to comply with it and not diverge even more from it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/911833097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/925885016",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23448#issuecomment-925885016",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23448",
    "id": 925885016,
    "node_id": "IC_kwDOAOvK9843L-JY",
    "user": {
      "login": "newearthmartin",
      "id": 1507266,
      "node_id": "MDQ6VXNlcjE1MDcyNjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1507266?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/newearthmartin",
      "html_url": "https://github.com/newearthmartin",
      "followers_url": "https://api.github.com/users/newearthmartin/followers",
      "following_url": "https://api.github.com/users/newearthmartin/following{/other_user}",
      "gists_url": "https://api.github.com/users/newearthmartin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/newearthmartin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/newearthmartin/subscriptions",
      "organizations_url": "https://api.github.com/users/newearthmartin/orgs",
      "repos_url": "https://api.github.com/users/newearthmartin/repos",
      "events_url": "https://api.github.com/users/newearthmartin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/newearthmartin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-23T14:46:43Z",
    "updated_at": "2021-09-23T14:46:43Z",
    "author_association": "NONE",
    "body": "> We can't really provide an estimate on the healing phase of snap-sync, just like we can't provide an ETA on fast-sync.\r\n> The longer the first phase (snap download) takes, the more out-of-sync will the data be. Therefore, it will make the heal-phase longer. And that's kind of recursive, the more time it takes, the more work accumulates.\r\n\r\nEven if we can't show an ETA, is it possible to show an absolute number that is growing? at least to know that _something_ is happening\r\n\r\nI'm not sure if this is the same thing or not, I was stuck at always 100 blocks behind and `knownStates: 0` for a long time ( https://github.com/ethereum/go-ethereum/issues/23553 ) and not knowing if any progress was being made or I was just stuck. It was enough to make me try other ethereum clients.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/925885016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
