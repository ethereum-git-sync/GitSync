{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2639",
  "id": 157531223,
  "node_id": "MDU6SXNzdWUxNTc1MzEyMjM=",
  "number": 2639,
  "title": "geth fast sync restarts at end of blockchain",
  "user": {
    "login": "adsmaniotto",
    "id": 7211130,
    "node_id": "MDQ6VXNlcjcyMTExMzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7211130?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adsmaniotto",
    "html_url": "https://github.com/adsmaniotto",
    "followers_url": "https://api.github.com/users/adsmaniotto/followers",
    "following_url": "https://api.github.com/users/adsmaniotto/following{/other_user}",
    "gists_url": "https://api.github.com/users/adsmaniotto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adsmaniotto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adsmaniotto/subscriptions",
    "organizations_url": "https://api.github.com/users/adsmaniotto/orgs",
    "repos_url": "https://api.github.com/users/adsmaniotto/repos",
    "events_url": "https://api.github.com/users/adsmaniotto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adsmaniotto/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2016-05-30T16:31:18Z",
  "updated_at": "2017-06-24T21:50:12Z",
  "closed_at": "2016-06-07T07:51:38Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\n\nI'm running Mist version 0.7.4 on Windows 10. \n#### Expected behaviour\n\nI have been trying for over a week to sync the blockchain using fast sync but have been running into an issue where the sync appears to restart itself when there's only a few thousand blocks left to go. It appears to roll back a couple thousands headers around  Block 1606908, and then starts the sync again with a new peer (albiet at a much slower speed).\n\n![geth fast sync cmd](https://cloud.githubusercontent.com/assets/7211130/15654162/6310967c-2657-11e6-84c5-7ee27a2192a5.png)\n\nThe issue seems related to Issue #2469. Is there any available workaround? The fast sync command below took 8 hours to get near the end before the restart.\n#### Backtrace\n\n```\ngeth --fast --cache=1024 --jitvm\n```\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/222531402",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2639#issuecomment-222531402",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639",
    "id": 222531402,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjUzMTQwMg==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-30T17:28:35Z",
    "updated_at": "2016-05-30T17:28:45Z",
    "author_association": "MEMBER",
    "body": "Try latest develop, or if your adventurous try https://github.com/ethereum/go-ethereum/pull/2630. I can fast sync in 25-30 mins flat (albeit on a 200mbit link). The PR I mentioned could especially help on poorer connections.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/222531402/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/224204661",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2639#issuecomment-224204661",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639",
    "id": 224204661,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDIwNDY2MQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-07T07:43:57Z",
    "updated_at": "2016-06-07T07:43:57Z",
    "author_association": "MEMBER",
    "body": "This sync issue should be solved by our 1.4.6 release. Please check with that and report if it's still broken for you.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/224204661/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/227590480",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2639#issuecomment-227590480",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639",
    "id": 227590480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzU5MDQ4MA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-21T22:23:21Z",
    "updated_at": "2016-06-21T22:24:18Z",
    "author_association": "NONE",
    "body": "I hope it's appropriate for me to re-open this.\n\nI'm on 1.4.6 on Ubuntu 16.04\n\nWhen I delete ~/.ethereum/chaindata/*\n\nAnd re-start geth:\n\n`geth --fast console`\n\nDays pass...\n\nEverything fine...\n\nThen I Ctrl+D in geth.\n\nA few moments later I restart:\n\n`geth --fast console`\n\n**fast sync disabled**! I have to delete everything in chaindata and restart...\n\n```\nI0621 23:19:28.560522 core/blockchain.go:208] Fast block: #1747043 [bd2635c4â€¦] TD=29636013546513671717\nI0621 23:19:28.578204 eth/handler.go:110] blockchain not empty, fast sync disabled\nI0621 23:19:28.581229 p2p/server.go:313] Starting Server\n```\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/227590480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/227590737",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2639#issuecomment-227590737",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639",
    "id": 227590737,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzU5MDczNw==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-21T22:24:35Z",
    "updated_at": "2016-06-21T22:24:35Z",
    "author_association": "MEMBER",
    "body": "That's intended. Fast sync runs only once for security reasons.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/227590737/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/227590979",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2639#issuecomment-227590979",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639",
    "id": 227590979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzU5MDk3OQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-21T22:25:55Z",
    "updated_at": "2016-06-21T22:25:55Z",
    "author_association": "MEMBER",
    "body": "This issue was specifically about a bug where fast sync would restart a normal sync from block zero just after completing.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/227590979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/227596743",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2639#issuecomment-227596743",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639",
    "id": 227596743,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzU5Njc0Mw==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-21T22:55:50Z",
    "updated_at": "2016-06-21T22:55:50Z",
    "author_association": "NONE",
    "body": "Apologies for confusing the issue. Thanks for explaining about the one-time fast sync'ing for security reasons. Very helpful information.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/227596743/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/285938180",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2639#issuecomment-285938180",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639",
    "id": 285938180,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTkzODE4MA==",
    "user": {
      "login": "ModGrip",
      "id": 26345196,
      "node_id": "MDQ6VXNlcjI2MzQ1MTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/26345196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ModGrip",
      "html_url": "https://github.com/ModGrip",
      "followers_url": "https://api.github.com/users/ModGrip/followers",
      "following_url": "https://api.github.com/users/ModGrip/following{/other_user}",
      "gists_url": "https://api.github.com/users/ModGrip/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ModGrip/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ModGrip/subscriptions",
      "organizations_url": "https://api.github.com/users/ModGrip/orgs",
      "repos_url": "https://api.github.com/users/ModGrip/repos",
      "events_url": "https://api.github.com/users/ModGrip/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ModGrip/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-12T11:23:30Z",
    "updated_at": "2017-03-12T11:23:30Z",
    "author_association": "NONE",
    "body": "How do I know when fast sync has completed? Appears to still be running at higher than the current block number. \"Processed 3660436\" currently and rising.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/285938180/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/310850625",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2639#issuecomment-310850625",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2639",
    "id": 310850625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDg1MDYyNQ==",
    "user": {
      "login": "Arthur111",
      "id": 16276882,
      "node_id": "MDQ6VXNlcjE2Mjc2ODgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/16276882?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Arthur111",
      "html_url": "https://github.com/Arthur111",
      "followers_url": "https://api.github.com/users/Arthur111/followers",
      "following_url": "https://api.github.com/users/Arthur111/following{/other_user}",
      "gists_url": "https://api.github.com/users/Arthur111/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Arthur111/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Arthur111/subscriptions",
      "organizations_url": "https://api.github.com/users/Arthur111/orgs",
      "repos_url": "https://api.github.com/users/Arthur111/repos",
      "events_url": "https://api.github.com/users/Arthur111/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Arthur111/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-24T16:58:01Z",
    "updated_at": "2017-06-24T21:50:12Z",
    "author_association": "NONE",
    "body": "> That's intended. Fast sync runs only once for security reasons.\r\n\r\nfast sync must be disabled when the first time its sync.\r\nUntil its not sync the first time --fast must stay enabled.\r\nLike this you can restart as you want or after a crash (bug) until its sync for the first time.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/310850625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
