{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2875",
  "id": 167898677,
  "node_id": "MDU6SXNzdWUxNjc4OTg2Nzc=",
  "number": 2875,
  "title": "geth does not start after upgrading from 1.3.5. to 1.4.10 ",
  "user": {
    "login": "SethVgr",
    "id": 19685073,
    "node_id": "MDQ6VXNlcjE5Njg1MDcz",
    "avatar_url": "https://avatars.githubusercontent.com/u/19685073?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SethVgr",
    "html_url": "https://github.com/SethVgr",
    "followers_url": "https://api.github.com/users/SethVgr/followers",
    "following_url": "https://api.github.com/users/SethVgr/following{/other_user}",
    "gists_url": "https://api.github.com/users/SethVgr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SethVgr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SethVgr/subscriptions",
    "organizations_url": "https://api.github.com/users/SethVgr/orgs",
    "repos_url": "https://api.github.com/users/SethVgr/repos",
    "events_url": "https://api.github.com/users/SethVgr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SethVgr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2016-07-27T16:30:48Z",
  "updated_at": "2016-07-28T13:39:16Z",
  "closed_at": "2016-07-28T13:39:16Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Checklist\n- [done ] built geth 1.4.10\n- [done ] installed it over previous version (1.3.5.) (`sudo cp geth /usr/bin/geth`)\n## System/environment\n- OS: debian 8.3 Jessie x64, kernel version 3.16.0-4-amd64, virtual machine, running on VirtualBox, host machine Win7 x64, NAT network settings used\n## Expected behaviour\n\n**geth** should be able to launch given the following command line arguments:\n\n`geth --datadir \"./datadir\" --networkid 100 --rpcapi eth,web3,personal --rpc --maxpeers 0 init \"genesis.json\" --etherbase \"0x0000000000000000000000000000000000000000\" --mine --minerthreads 3`\n## Observed behaviour\n\n**geth** throws an error:\n\n```\nIncorrect Usage.\n\ninit [arguments...]\n\nThe init command initialises a new genesis block and definition for the network.\nThis is a destructive action and changes the network in which you will be\nparticipating.\n\n\nflag provided but not defined: -etherbase\n```\n\nAlso tried launching **geth** with the init command and its arguments on the last position:\n\n`geth --datadir \"./datadir\" --etherbase \"0x0000000000000000000000000000000000000000\" --mine --minerthreads 3 --networkid 100 --rpcapi eth,web3,personal --rpc --maxpeers 0 init \"genesis.json\"`\n\n which outputs the following:\n\n```\nI0727 12:29:08.531439 ethdb/database.go:82] Alloted 16MB cache and 16 file handles to single_bootstrap_node_geth/chaindata\nI0727 12:29:08.663983 core/genesis.go:92] Genesis block already in chain. Writing canonical number\nI0727 12:29:08.665008 cmd/geth/main.go:299] successfully wrote genesis block and/or chain rule set: 2279317df6aed704d8d46771ed06fbe4b7a935f7005d341b091b7957bc374def\n```\n\nand **geth** does not start mining. \n",
  "closed_by": {
    "login": "SethVgr",
    "id": 19685073,
    "node_id": "MDQ6VXNlcjE5Njg1MDcz",
    "avatar_url": "https://avatars.githubusercontent.com/u/19685073?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SethVgr",
    "html_url": "https://github.com/SethVgr",
    "followers_url": "https://api.github.com/users/SethVgr/followers",
    "following_url": "https://api.github.com/users/SethVgr/following{/other_user}",
    "gists_url": "https://api.github.com/users/SethVgr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SethVgr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SethVgr/subscriptions",
    "organizations_url": "https://api.github.com/users/SethVgr/orgs",
    "repos_url": "https://api.github.com/users/SethVgr/repos",
    "events_url": "https://api.github.com/users/SethVgr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SethVgr/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235653056",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2875#issuecomment-235653056",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875",
    "id": 235653056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTY1MzA1Ng==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-27T17:08:44Z",
    "updated_at": "2016-07-27T17:08:44Z",
    "author_association": "MEMBER",
    "body": "I don't know why the previous version that you used worked with this set of flags. Probably because the init subcommand was not fully implemented. 1.3.5 is really old. In geth 1.4.x your command line flags are odd.\n\nThe [init](https://github.com/ethereum/go-ethereum/wiki/Command-Line-Options#init) subcommand is used to create a chain with a custom genesis block and is usually not used with flags apart from the datadir flag.\n\nIf you just want to start geth (on the mainnet) and let it mine drop the init subcommand. Your command would look like (replace `--etherbase \"0x...\"` with something that you own):\n\n```\ngeth --datadir \"./datadir\" --etherbase \"0x0000000000000000000000000000000000000000\" --mine --minerthreads 3 --rpcapi eth,web3,personal --rpc\n```\n\nYou might want to look at the `--support-dao-fork` and `--oppose-dao-fork` flags.\n\nIf you want to create a private network. Follow the instructions on the wiki for the init subcommand and after you created the custom chain start geth with a datadir pointing to the custom chain datadir.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235653056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235830113",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2875#issuecomment-235830113",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875",
    "id": 235830113,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTgzMDExMw==",
    "user": {
      "login": "SethVgr",
      "id": 19685073,
      "node_id": "MDQ6VXNlcjE5Njg1MDcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/19685073?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SethVgr",
      "html_url": "https://github.com/SethVgr",
      "followers_url": "https://api.github.com/users/SethVgr/followers",
      "following_url": "https://api.github.com/users/SethVgr/following{/other_user}",
      "gists_url": "https://api.github.com/users/SethVgr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SethVgr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SethVgr/subscriptions",
      "organizations_url": "https://api.github.com/users/SethVgr/orgs",
      "repos_url": "https://api.github.com/users/SethVgr/repos",
      "events_url": "https://api.github.com/users/SethVgr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SethVgr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-28T08:18:18Z",
    "updated_at": "2016-07-28T09:25:31Z",
    "author_association": "NONE",
    "body": "Thanks. I did manage to get it running on a private test net by running:\n\n`geth --datadir \"datadir\" init \"genesis.json\"`\n\nand then launching with:\n\n`geth --datadir \"datadir\" --mine --minerthreads 3 --networkid 13 --rpcapi eth,web3,personal --rpc --maxpeers 0`\n\n **geth** starts mining:\n\n```\nI0728 04:00:12.289151 ethdb/database.go:82] Alloted 128MB cache and 1024 file handles to data_dir/chaindata\nI0728 04:00:12.397333 ethdb/database.go:169] closed data_dir/chaindata\nI0728 04:00:12.414075 ethdb/database.go:82] Alloted 128MB cache and 1024 file handles to data_dir/chaindata\nI0728 04:00:12.493681 eth/backend.go:621] upgrading db log bloom bins\nI0728 04:00:12.494120 eth/backend.go:629] upgrade completed in 451.405Âµs\nI0728 04:00:12.494465 ethdb/database.go:82] Alloted 16MB cache and 16 file handles to data_dir/dapp\nI0728 04:00:12.513689 eth/backend.go:172] Protocol Versions: [63 62], Network Id: 13\nI0728 04:00:12.513976 eth/backend.go:201] Blockchain DB Version: 3\nI0728 04:00:12.515930 core/blockchain.go:206] Last header: #0 [23812aaaâ€¦] TD=256\nI0728 04:00:12.516065 core/blockchain.go:207] Last block: #0 [23812aaaâ€¦] TD=256\nI0728 04:00:12.516132 core/blockchain.go:208] Fast block: #0 [23812aaaâ€¦] TD=256\nI0728 04:00:12.519883 p2p/server.go:313] Starting Server\nI0728 04:00:15.109229 p2p/discover/udp.go:217] Listening, enode://449870522cf99663f642a60e84e191ca30af45c5fa0c6fbb199d8967dd268f7c3c09a8fb42720a84c0bb8a984a31d01b4255f5d56f0c6eb98b498f111c52c7bb@[::]:30303\nI0728 04:00:15.111252 eth/backend.go:454] Automatic pregeneration of ethash DAG ON (ethash dir: /home/user/.ethash)\nI0728 04:00:15.111370 p2p/server.go:556] Listening on [::]:30303\nI0728 04:00:15.112044 eth/backend.go:461] checking DAG (ethash dir: /home/user/.ethash)\nI0728 04:00:15.151132 node/node.go:296] IPC endpoint opened: data_dir/geth.ipc\nI0728 04:00:15.195940 node/node.go:366] HTTP endpoint opened: http://localhost:8545\nI0728 04:00:15.196123 miner/miner.go:119] Starting mining operation (CPU=1 TOT=2)\nI0728 04:00:15.197119 miner/worker.go:573] commit new work on block 1 with 0 txs & 0 uncles. Took 863.195Âµs\nI0728 04:00:15.197251 ethash.go:259] Generating DAG for epoch 0 (size 1073739904) (0000000000000000000000000000000000000000000000000000000000000000)\nI0728 04:00:17.619117 ethash.go:276] Done generating DAG for epoch 0, it took 2.421872731s\nI0728 04:01:27.849348 miner/worker.go:339] ðŸ”¨  Mined block (#1 / 40857370). Wait 5 blocks for confirmation\nI0728 04:01:27.850663 miner/worker.go:573] commit new work on block 2 with 0 txs & 0 uncles. Took 1.087017ms\nI0728 04:01:27.851682 miner/worker.go:573] commit new work on block 2 with 0 txs & 0 uncles. Took 805.394Âµs\nI0728 04:01:31.725157 miner/worker.go:339] ðŸ”¨  Mined block (#2 / 9c48d944). Wait 5 blocks for confirmation\nI0728 04:01:31.725710 miner/worker.go:573] commit new work on block 3 with 0 txs & 0 uncles. Took 388.348Âµs\n```\n\nThe problem is that the IPC endpoint `data_dir/geth.ipc` is not reachable; running:\n\n`geth --ipcpath \"datadir/geth.ipc\" attach`\n\ngives:\n\n`Fatal: Unable to attach to remote geth: dial unix /home/user/.ethereum/geth.ipc: connection refused`\n\nChanging the arguments:\n\n`geth attach datadir/geth.ipc`\n\ngives:\n\n`Fatal: Unable to attach to remote geth: invalid endpoint`\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235830113/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235844545",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2875#issuecomment-235844545",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875",
    "id": 235844545,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTg0NDU0NQ==",
    "user": {
      "login": "imifos",
      "id": 666837,
      "node_id": "MDQ6VXNlcjY2NjgzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666837?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/imifos",
      "html_url": "https://github.com/imifos",
      "followers_url": "https://api.github.com/users/imifos/followers",
      "following_url": "https://api.github.com/users/imifos/following{/other_user}",
      "gists_url": "https://api.github.com/users/imifos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/imifos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/imifos/subscriptions",
      "organizations_url": "https://api.github.com/users/imifos/orgs",
      "repos_url": "https://api.github.com/users/imifos/repos",
      "events_url": "https://api.github.com/users/imifos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/imifos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-28T09:23:33Z",
    "updated_at": "2016-07-28T09:23:33Z",
    "author_association": "NONE",
    "body": "Above, you are (maybe unintentionally) mixing up $data_dir, data_dir and ./data_dir. What happens when you specify an absolute path like \"/opt/ethereum/data_dir\" everywhere?\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235844545/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235845088",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2875#issuecomment-235845088",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875",
    "id": 235845088,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTg0NTA4OA==",
    "user": {
      "login": "SethVgr",
      "id": 19685073,
      "node_id": "MDQ6VXNlcjE5Njg1MDcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/19685073?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SethVgr",
      "html_url": "https://github.com/SethVgr",
      "followers_url": "https://api.github.com/users/SethVgr/followers",
      "following_url": "https://api.github.com/users/SethVgr/following{/other_user}",
      "gists_url": "https://api.github.com/users/SethVgr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SethVgr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SethVgr/subscriptions",
      "organizations_url": "https://api.github.com/users/SethVgr/orgs",
      "repos_url": "https://api.github.com/users/SethVgr/repos",
      "events_url": "https://api.github.com/users/SethVgr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SethVgr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-28T09:26:12Z",
    "updated_at": "2016-07-28T09:26:12Z",
    "author_association": "NONE",
    "body": "No, the actual directory is always \"data_dir\" (I use a bash script to launch geth). \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235845088/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235873675",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2875#issuecomment-235873675",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875",
    "id": 235873675,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTg3MzY3NQ==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-28T11:53:22Z",
    "updated_at": "2016-07-28T11:53:54Z",
    "author_association": "MEMBER",
    "body": "According to the logs the IPC endpoint is opened:\n`I0728 04:00:15.151132 node/node.go:296] IPC endpoint opened: data_dir/geth.ipc`.\n\nIn the attach example you don't use the underscore in data_dir:\n`geth attach datadir/geth.ipc`\n\nTry `geth attach data_dir/geth.ipc`. Attaching should work with relative paths.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235873675/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235896968",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2875#issuecomment-235896968",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2875",
    "id": 235896968,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTg5Njk2OA==",
    "user": {
      "login": "SethVgr",
      "id": 19685073,
      "node_id": "MDQ6VXNlcjE5Njg1MDcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/19685073?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SethVgr",
      "html_url": "https://github.com/SethVgr",
      "followers_url": "https://api.github.com/users/SethVgr/followers",
      "following_url": "https://api.github.com/users/SethVgr/following{/other_user}",
      "gists_url": "https://api.github.com/users/SethVgr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SethVgr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SethVgr/subscriptions",
      "organizations_url": "https://api.github.com/users/SethVgr/orgs",
      "repos_url": "https://api.github.com/users/SethVgr/repos",
      "events_url": "https://api.github.com/users/SethVgr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SethVgr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-28T13:39:16Z",
    "updated_at": "2016-07-28T13:39:16Z",
    "author_association": "NONE",
    "body": "Thanks, I've managed to set it accordingly. \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/235896968/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
