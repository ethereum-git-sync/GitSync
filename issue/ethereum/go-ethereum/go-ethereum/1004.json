{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1004",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1004/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1004/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1004/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/1004",
  "id": 76933709,
  "node_id": "MDU6SXNzdWU3NjkzMzcwOQ==",
  "number": 1004,
  "title": "fatal error: flush stateDb: leveldb/table: corruption on table-footer",
  "user": {
    "login": "carver",
    "id": 205327,
    "node_id": "MDQ6VXNlcjIwNTMyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/carver",
    "html_url": "https://github.com/carver",
    "followers_url": "https://api.github.com/users/carver/followers",
    "following_url": "https://api.github.com/users/carver/following{/other_user}",
    "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
    "organizations_url": "https://api.github.com/users/carver/orgs",
    "repos_url": "https://api.github.com/users/carver/repos",
    "events_url": "https://api.github.com/users/carver/events{/privacy}",
    "received_events_url": "https://api.github.com/users/carver/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2015-05-16T03:42:54Z",
  "updated_at": "2015-05-18T22:42:08Z",
  "closed_at": "2015-05-18T20:34:38Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Seeing output:\n\n```\nI0515 20:29:35.307528    5423 downloader.go:145] Block synchronisation started\nI0515 20:29:46.580546    5423 chain_manager.go:564] INVALID block #333661 (09d2d6073181a027eb9bb88b196595c81b84bd524d046a2f1ae58829597e59f6)\nI0515 20:29:46.580599    5423 chain_manager.go:565] invalid merkle root. received=c65b9384f74668976c77b7317ce583c36d55a857942b75f0810021cac8793119 got=65676f24f9b28d1de4247247a9f93c7bda3564db42baf17e91eb0700e525fd2d\nI0515 20:29:46.580617    5423 sync.go:73] Block insertion failed: invalid merkle root. received=c65b9384f74668976c77b7317ce583c36d55a857942b75f0810021cac8793119 got=65676f24f9b28d1de4247247a9f93c7bda3564db42baf17e91eb0700e525fd2d\nI0515 20:29:46.580653    5423 sync.go:112] Synchronisation failed: block downloading cancelled (requested)\nI0515 20:30:10.144221    5423 sync.go:112] Synchronisation failed: peer's unknown or unhealthy\nF0515 20:30:25.307284    5423 backend.go:475] fatal error: flush stateDb: leveldb/table: corruption on table-footer (pos=89792): bad magic number [file=008608.ldb] (Restart your node. We are aware of this issue)\n```\n\nUnfortunately, when I restart geth, I get exactly the same message again.\n\nI got the message the first time on 9.20, and upgraded to 9.21.  I've already run the upgradedb command when going from 9.19 to 9.20.\n",
  "closed_by": {
    "login": "carver",
    "id": 205327,
    "node_id": "MDQ6VXNlcjIwNTMyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/carver",
    "html_url": "https://github.com/carver",
    "followers_url": "https://api.github.com/users/carver/followers",
    "following_url": "https://api.github.com/users/carver/following{/other_user}",
    "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
    "organizations_url": "https://api.github.com/users/carver/orgs",
    "repos_url": "https://api.github.com/users/carver/repos",
    "events_url": "https://api.github.com/users/carver/events{/privacy}",
    "received_events_url": "https://api.github.com/users/carver/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1004/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1004/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/102591877",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1004#issuecomment-102591877",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1004",
    "id": 102591877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjU5MTg3Nw==",
    "user": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-16T08:58:30Z",
    "updated_at": "2015-05-16T08:58:30Z",
    "author_association": "MEMBER",
    "body": "You upgraded previously from 0.9.19(?) and you need to run `geth upgradedb` or delete your blockchain and redownload the chain\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/102591877/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/103201544",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1004#issuecomment-103201544",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1004",
    "id": 103201544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMzIwMTU0NA==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-18T20:34:38Z",
    "updated_at": "2015-05-18T20:34:38Z",
    "author_association": "MEMBER",
    "body": "upgradedb didn't work for me, but blowing away ~/.ethereum and starting over worked.  There's still probably a bug somewhere, but I can't reproduce it, so I'm closing.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/103201544/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/103238402",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1004#issuecomment-103238402",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1004",
    "id": 103238402,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMzIzODQwMg==",
    "user": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-18T22:42:07Z",
    "updated_at": "2015-05-18T22:42:07Z",
    "author_association": "MEMBER",
    "body": "That's correct. Old versions didn't properly delete all the database and left garbage in the `stateDb`. This has been fixed on newer versions of `geth`\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/103238402/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
