{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15601",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15601/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15601/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15601/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15601",
  "id": 278698061,
  "node_id": "MDU6SXNzdWUyNzg2OTgwNjE=",
  "number": 15601,
  "title": "Could not autodiscover on private network with bootnode",
  "user": {
    "login": "rumkin",
    "id": 609373,
    "node_id": "MDQ6VXNlcjYwOTM3Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/609373?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rumkin",
    "html_url": "https://github.com/rumkin",
    "followers_url": "https://api.github.com/users/rumkin/followers",
    "following_url": "https://api.github.com/users/rumkin/following{/other_user}",
    "gists_url": "https://api.github.com/users/rumkin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rumkin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rumkin/subscriptions",
    "organizations_url": "https://api.github.com/users/rumkin/orgs",
    "repos_url": "https://api.github.com/users/rumkin/repos",
    "events_url": "https://api.github.com/users/rumkin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rumkin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2017-12-02T16:48:04Z",
  "updated_at": "2019-04-08T02:23:20Z",
  "closed_at": "2019-04-08T02:23:20Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nplease note that this is an issue tracker reserved for bug reports and feature requests.\r\n\r\nFor general questions please use the gitter channel or the Ethereum stack exchange at https://ethereum.stackexchange.com.\r\n\r\n#### System information\r\n\r\nGeth version: Geth\r\nVersion: 1.7.3-stable\r\nGit Commit: 4bb3c89d44e372e6a9ab85a8be0c9345265c763a\r\nOS & Version: Linux\r\n\r\n#### Expected behaviour\r\n\r\nGeth connects to bootnode running on the same machine on private network with custom genesis block and waits peer to connect. It should not try to connect to another bootnodes or another peers which is not in my network.\r\n\r\n#### Actual behaviour\r\n\r\nI have server at DO which has static IP where I've run my private network. But geth permanently try to connect to unknown nodes. Bootnode got pings from geth. Local peer doesn't see remote in `admin.peers` when connecting with proper bootnodes address. Event two peers running in the same machine doesn't see each other.\r\n\r\nI expect server's peer not to connect to any other peer except of my local. I expect bootnode log more information about what's going on. \r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n1. Create new genesys.block with network id 142857000000\r\n2. Generate bootnode key: `bootnode --genkey=boot.key`\r\n3. Start bootnode: `bootnode --nodekey=boot.key`\r\n4. Copy enode from stdout and replace `[::]` with actual IP.\r\n5. Run `geth --bootnodes \"enode://...\" --verbosity 5`\r\n\r\n#### Logs\r\n\r\nThis is what I see in log of my geth instance on the server.\r\n````\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=8df1765465c7ddd9 addr=87.229.63.5:30303     err=\"already dialing\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=18026499e00f50d1 addr=194.166.183.210:30303 err=\"already dialing\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=68150f1ec7a0ab73 addr=87.76.73.60:30303     err=\"already dialing\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=6960dd938eeb38de addr=94.23.45.111:30303    err=\"already dialing\"\r\nTRACE[12-02|16:11:13] Starting bonding ping/pong               id=b5859dd8464f9fcf known=false failcount=0 age=420064h11m13.655313533s\r\nTRACE[12-02|16:11:13] Starting bonding ping/pong               id=78ab94e9535f6999 known=false failcount=0 age=420064h11m13.655577139s\r\nTRACE[12-02|16:11:13] Starting bonding ping/pong               id=12ae27a6bd9a661b known=false failcount=0 age=420064h11m13.65581769s\r\nTRACE[12-02|16:11:13] Starting bonding ping/pong               id=b61cbdbf9420034b known=false failcount=0 age=420064h11m13.655997741s\r\nTRACE[12-02|16:11:13] Starting bonding ping/pong               id=48f31cf46384dd11 known=false failcount=0 age=420064h11m13.656222365s\r\nTRACE[12-02|16:11:13] Dial error                               task=\"dyndial 18026499e00f50d1 194.166.183.210:30303\" err=\"dial tcp 194.166.183.210:30303: getsockopt: connection refused\"\r\nTRACE[12-02|16:11:13] Dial task done                           task=\"dyndial 18026499e00f50d1 194.166.183.210:30303\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=8df1765465c7ddd9 addr=87.229.63.5:30303     err=\"already dialing\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=18026499e00f50d1 addr=194.166.183.210:30303 err=\"recently dialed\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=68150f1ec7a0ab73 addr=87.76.73.60:30303     err=\"already dialing\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=6960dd938eeb38de addr=94.23.45.111:30303    err=\"already dialing\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=18026499e00f50d1 addr=194.166.183.210:30303 err=\"recently dialed\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=68150f1ec7a0ab73 addr=87.76.73.60:30303     err=\"already dialing\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=8df1765465c7ddd9 addr=87.229.63.5:30303     err=\"already dialing\"\r\nTRACE[12-02|16:11:13] Skipping dial candidate                  id=8a0e08c3ad5fc780 addr=198.84.201.48:30303   err=\"already dialing\"\r\n````\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15601/reactions",
    "total_count": 4,
    "+1": 4,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15601/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/353759453",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15601#issuecomment-353759453",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15601",
    "id": 353759453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Mzc1OTQ1Mw==",
    "user": {
      "login": "treeder",
      "id": 75826,
      "node_id": "MDQ6VXNlcjc1ODI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/75826?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/treeder",
      "html_url": "https://github.com/treeder",
      "followers_url": "https://api.github.com/users/treeder/followers",
      "following_url": "https://api.github.com/users/treeder/following{/other_user}",
      "gists_url": "https://api.github.com/users/treeder/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/treeder/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/treeder/subscriptions",
      "organizations_url": "https://api.github.com/users/treeder/orgs",
      "repos_url": "https://api.github.com/users/treeder/repos",
      "events_url": "https://api.github.com/users/treeder/events{/privacy}",
      "received_events_url": "https://api.github.com/users/treeder/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-24T01:27:15Z",
    "updated_at": "2017-12-24T01:27:15Z",
    "author_association": "NONE",
    "body": "Seeing similar thing here, trying to run private network with bootnode, but if I startup a single instance of geth, it's trying to connect with a bunch of other peers. Some output showing this:\r\n\r\n```\r\nDEBUG[12-23|17:21:45] Adding p2p peer                          name=Parity/v1.8.2-unstab...                                              addr=137.74.26.167:57784   peers=1\r\nDEBUG[12-23|17:21:45] Ethereum peer connected                  id=45de811e846c8823 conn=inbound name=Parity/v1.8.2-unstable-1b6588c-20171025/x86_64-linux-gnu/rustc1.20.0\r\nDEBUG[12-23|17:21:45] Ethereum handshake failed                id=45de811e846c8823 conn=inbound err=EOF\r\nDEBUG[12-23|17:21:45] Removing p2p peer                        id=45de811e846c8823 conn=inbound duration=890.291Âµs peers=0 req=false err=EOF\r\nDEBUG[12-23|17:21:45] Adding p2p peer                          name=Geth/v1.7.1-stable-0...                                              addr=34.237.25.200:30303   peers=1\r\nDEBUG[12-23|17:21:45] Ethereum peer connected                  id=0546e7dd3bf69b26 conn=dyndial name=Geth/v1.7.1-stable-05101641/linux-amd64/go1.9\r\nDEBUG[12-23|17:21:45] Adding p2p peer                          name=Parity/v1.9.0-nightl...                                              addr=13.80.148.117:53204   peers=2\r\nDEBUG[12-23|17:21:45] Ethereum peer connected                  id=f9806bb328da18d4 conn=inbound name=Parity/v1.9.0-nightly-cab5b09-20171114/x86_64-linux-gnu/rustc1.21.0\r\nDEBUG[12-23|17:21:45] Ethereum handshake failed                id=0546e7dd3bf69b26 conn=dyndial err=\"Genesis block mismatch - 5e31ddf9f93f71ee (!= 3a4e1360ec5215f0)\"\r\nDEBUG[12-23|17:21:45] Removing p2p peer                        id=0546e7dd3bf69b26 conn=dyndial duration=90.203ms  peers=1 req=false err=\"Genesis block mismatch - 5e31ddf9f93f71ee (!= 3a4e1360ec5215f0)\"\r\nDEBUG[12-23|17:21:45] Ethereum handshake failed                id=f9806bb328da18d4 conn=inbound err=\"Genesis block mismatch - 3b44ff7c2922d7d3 (!= 3a4e1360ec5215f0)\"\r\nDEBUG[12-23|17:21:45] Removing p2p peer                        id=f9806bb328da18d4 conn=inbound duration=162.002ms peers=0 req=false err=\"Genesis block mismatch - 3b44ff7c2922d7d3 (!= 3a4e1360ec5215f0)\"\r\nDEBUG[12-23|17:21:45] Adding p2p peer                          name=Geth/ecu-node-0002/v...                                              addr=18.195.94.41:30303    peers=1\r\nDEBUG[12-23|17:21:45] Ethereum peer connected                  id=d5d5cc8c804f4ab5 conn=dyndial name=Geth/ecu-node-0002/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\nDEBUG[12-23|17:21:46] Ethereum handshake failed                id=d5d5cc8c804f4ab5 conn=dyndial err=EOF\r\nDEBUG[12-23|17:21:46] Removing p2p peer                        id=d5d5cc8c804f4ab5 conn=dyndial duration=189.335ms peers=0 req=true  err=\"subprotocol error\"\r\nDEBUG[12-23|17:21:46] Adding p2p peer                          name=Geth/v1.5.0-unstable...                                              addr=165.227.137.174:21003 peers=1\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/353759453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/368185106",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15601#issuecomment-368185106",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15601",
    "id": 368185106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2ODE4NTEwNg==",
    "user": {
      "login": "onairelav",
      "id": 650184,
      "node_id": "MDQ6VXNlcjY1MDE4NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/650184?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onairelav",
      "html_url": "https://github.com/onairelav",
      "followers_url": "https://api.github.com/users/onairelav/followers",
      "following_url": "https://api.github.com/users/onairelav/following{/other_user}",
      "gists_url": "https://api.github.com/users/onairelav/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onairelav/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onairelav/subscriptions",
      "organizations_url": "https://api.github.com/users/onairelav/orgs",
      "repos_url": "https://api.github.com/users/onairelav/repos",
      "events_url": "https://api.github.com/users/onairelav/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onairelav/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-24T01:28:14Z",
    "updated_at": "2018-02-24T01:28:14Z",
    "author_association": "NONE",
    "body": "a firewall solve the problem of visitors\r\n\r\niptables -A INPUT -p udp -s $vpsout --dport 30303 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT   #alpha/alpha in\r\niptables -A OUTPUT -p udp --sport 30303 -d $vpsout -m conntrack --ctstate ESTABLISHED -j ACCEPT      #alpha/alpha out\r\niptables -A INPUT -p udp -s $homeip --dport 30303 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT #home/alpha in\r\niptables -A OUTPUT -p udp --sport 30303 -d $homeip -m conntrack --ctstate ESTABLISHED -j ACCEPT    #alpha/home out\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/368185106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/466847359",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15601#issuecomment-466847359",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15601",
    "id": 466847359,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2Njg0NzM1OQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-02-25T02:09:39Z",
    "updated_at": "2019-02-25T02:09:39Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/466847359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
