{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/11522",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/11522/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/11522/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/11522/events",
  "html_url": "https://github.com/ethereum/solidity/issues/11522",
  "id": 918602128,
  "node_id": "MDU6SXNzdWU5MTg2MDIxMjg=",
  "number": 11522,
  "title": "\"Unreachable code\" warning in 0.8.5 but not 0.8.4",
  "user": {
    "login": "lhoenig",
    "id": 4353030,
    "node_id": "MDQ6VXNlcjQzNTMwMzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4353030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lhoenig",
    "html_url": "https://github.com/lhoenig",
    "followers_url": "https://api.github.com/users/lhoenig/followers",
    "following_url": "https://api.github.com/users/lhoenig/following{/other_user}",
    "gists_url": "https://api.github.com/users/lhoenig/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lhoenig/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lhoenig/subscriptions",
    "organizations_url": "https://api.github.com/users/lhoenig/orgs",
    "repos_url": "https://api.github.com/users/lhoenig/repos",
    "events_url": "https://api.github.com/users/lhoenig/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lhoenig/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    },
    {
      "id": 2376134343,
      "node_id": "MDU6TGFiZWwyMzc2MTM0MzQz",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20compile%20without%20error",
      "name": "should compile without error",
      "color": "c48f13",
      "default": false,
      "description": "Error is reported even though it shouldn't. Source is fine."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2021-06-11T11:04:47Z",
  "updated_at": "2021-06-19T16:15:26Z",
  "closed_at": "2021-06-14T11:54:28Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nAfter trying out 0.8.5 on our code, we got a lot of strange warnings about \"unreachable code\". The warning seems to have to do with library functions marked as `internal`.\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.8.5\r\n- Target EVM version (as per compiler settings):\r\n- Framework/IDE (e.g. Truffle or Remix): Hardhat\r\n- EVM execution environment / backend / blockchain client: No execution, compliation problem\r\n- Operating system: macOS 11.4\r\n\r\n## Steps to Reproduce\r\n\r\n`A.sol`:\r\n```solidity\r\n// SPDX-License-Identifier: Unlicense\r\npragma solidity =0.8.5;\r\n\r\nimport './B.sol';\r\n\r\ncontract Test is Bar {}\r\n```\r\n\r\n`B.sol`:\r\n```solidity\r\n// SPDX-License-Identifier: Unlicense\r\npragma solidity =0.8.5;\r\n\r\nlibrary Foo {\r\n    // no warning if visibility \"public\"\r\n    function nop() internal {}\r\n}\r\n\r\ncontract Bar {\r\n    function example() public returns (uint256) {\r\n        foo();\r\n        return 0;\r\n    }\r\n\r\n    function foo() public {\r\n        Foo.nop();\r\n    }\r\n}\r\n```\r\n\r\nCompilation output:\r\n```\r\nâžœ  contracts  hh compile --force\r\nSolidity 0.8.5 is not fully supported yet. You can still use Hardhat, but some features, like stack traces, might not work correctly.\r\n\r\nLearn more at https://hardhat.org/reference/solidity-support\"\r\n\r\nCompiling 2 files with 0.8.5\r\nWarning: Unreachable code.\r\n  --> contracts/B.sol:11:9:\r\n   |\r\n11 |         return 0;\r\n   |         ^^^^^^^^\r\n\r\n\r\nCompilation finished successfully\r\n```",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/11522/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/11522/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/859537293",
    "html_url": "https://github.com/ethereum/solidity/issues/11522#issuecomment-859537293",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11522",
    "id": 859537293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTUzNzI5Mw==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-11T12:11:49Z",
    "updated_at": "2021-06-12T21:08:51Z",
    "author_association": "MEMBER",
    "body": "I played with the example a bit and here are some observations:\r\n- It seems to require that fairly specific base combination: contract that inherits from a contract imported from another file which has a function that calls a function that calls an internal library function.\r\n- It does not happen with free functions. Only internal library functions.\r\n- Putting the contracts in the same file, removing inheritance or removing one of the functions in the chain makes the error go away.\r\n- Once the you have that basic pattern in the code (functions, calls, contracts, etc.), adding more stuff does not seem to affect it much.\r\n\r\nThis must be related to the control flow graph PRs that went in this release so pinging @Marenz.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/859537293/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/860079496",
    "html_url": "https://github.com/ethereum/solidity/issues/11522#issuecomment-860079496",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11522",
    "id": 860079496,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MDA3OTQ5Ng==",
    "user": {
      "login": "Philogy",
      "id": 21957732,
      "node_id": "MDQ6VXNlcjIxOTU3NzMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/21957732?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Philogy",
      "html_url": "https://github.com/Philogy",
      "followers_url": "https://api.github.com/users/Philogy/followers",
      "following_url": "https://api.github.com/users/Philogy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Philogy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Philogy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Philogy/subscriptions",
      "organizations_url": "https://api.github.com/users/Philogy/orgs",
      "repos_url": "https://api.github.com/users/Philogy/repos",
      "events_url": "https://api.github.com/users/Philogy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Philogy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-12T16:53:48Z",
    "updated_at": "2021-06-12T16:53:48Z",
    "author_association": "NONE",
    "body": "I also got this bug in my code. Switching back to `0.8.4` gets rid of the warning.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/860079496/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/861174535",
    "html_url": "https://github.com/ethereum/solidity/issues/11522#issuecomment-861174535",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11522",
    "id": 861174535,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTE3NDUzNQ==",
    "user": {
      "login": "adriandelgg",
      "id": 32179921,
      "node_id": "MDQ6VXNlcjMyMTc5OTIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/32179921?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adriandelgg",
      "html_url": "https://github.com/adriandelgg",
      "followers_url": "https://api.github.com/users/adriandelgg/followers",
      "following_url": "https://api.github.com/users/adriandelgg/following{/other_user}",
      "gists_url": "https://api.github.com/users/adriandelgg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adriandelgg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adriandelgg/subscriptions",
      "organizations_url": "https://api.github.com/users/adriandelgg/orgs",
      "repos_url": "https://api.github.com/users/adriandelgg/repos",
      "events_url": "https://api.github.com/users/adriandelgg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adriandelgg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-15T05:10:33Z",
    "updated_at": "2021-06-15T05:10:33Z",
    "author_association": "NONE",
    "body": "I've also received this bug. I've been using 0.8.4 because of it. I've heard of others experiencing the same issue as well.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/861174535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/861501071",
    "html_url": "https://github.com/ethereum/solidity/issues/11522#issuecomment-861501071",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11522",
    "id": 861501071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTUwMTA3MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-15T13:32:06Z",
    "updated_at": "2021-06-15T13:32:06Z",
    "author_association": "MEMBER",
    "body": "We will release a bugfix release this week or the beginning of next week.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/861501071/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/861615091",
    "html_url": "https://github.com/ethereum/solidity/issues/11522#issuecomment-861615091",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11522",
    "id": 861615091,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTYxNTA5MQ==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-15T15:48:52Z",
    "updated_at": "2021-06-15T15:48:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just to be sure, could this bug have had any consequence in code generation? Could any of these lines of code that were considered unreachable have been removed from the final contract?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/861615091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/861615928",
    "html_url": "https://github.com/ethereum/solidity/issues/11522#issuecomment-861615928",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11522",
    "id": 861615928,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTYxNTkyOA==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-15T15:49:56Z",
    "updated_at": "2021-06-15T15:49:56Z",
    "author_association": "MEMBER",
    "body": "> Just to be sure, could this bug have had any consequence in code generation? Could any of these lines of code that were considered unreachable have been removed from the final contract?\r\n\r\nNo, it's just incorrect warnings during analysis. Code generation will not be affected in any way.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/861615928/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/864426017",
    "html_url": "https://github.com/ethereum/solidity/issues/11522#issuecomment-864426017",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11522",
    "id": 864426017,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NDQyNjAxNw==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-19T16:14:42Z",
    "updated_at": "2021-06-19T16:15:26Z",
    "author_association": "MEMBER",
    "body": "Just to add some data points on whether the issue is very widespread. I saw it reported by users independently in various places so unfortunately it probably is:\r\n- https://github.com/juanfranblanco/vscode-solidity/issues/256\r\n- https://forum.openzeppelin.com/t/unreachable-code-warnings-in-initialize/10527",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/864426017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
