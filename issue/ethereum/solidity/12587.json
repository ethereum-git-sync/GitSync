{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12587/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12587/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12587/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12587",
  "id": 1115479542,
  "node_id": "I_kwDOAm_5kc5CfN32",
  "number": 12587,
  "title": "Immutable dynamic arrays",
  "user": {
    "login": "nventuro",
    "id": 2530770,
    "node_id": "MDQ6VXNlcjI1MzA3NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nventuro",
    "html_url": "https://github.com/nventuro",
    "followers_url": "https://api.github.com/users/nventuro/followers",
    "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
    "organizations_url": "https://api.github.com/users/nventuro/orgs",
    "repos_url": "https://api.github.com/users/nventuro/repos",
    "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nventuro/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    },
    {
      "id": 4372329032,
      "node_id": "LA_kwDOAm_5kc8AAAABBJxySA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/roadmap",
      "name": "roadmap",
      "color": "ff8e00",
      "default": false,
      "description": "It's on our short-term roadmap"
    },
    {
      "id": 4437999539,
      "node_id": "LA_kwDOAm_5kc8AAAABCIZ_sw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/high%20effort",
      "name": "high effort",
      "color": "ff54f4",
      "default": false,
      "description": "A lot to implement but still doable by a single person. The task is large or difficult."
    },
    {
      "id": 4438153180,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjX3A",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/high%20impact",
      "name": "high impact",
      "color": "001dff",
      "default": false,
      "description": "Changes are very prominent and affect users or the project in a major way."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 23,
  "created_at": "2022-01-26T20:39:10Z",
  "updated_at": "2022-09-29T14:01:16Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nAdd native support for dynamic `immutable` arrays, with a length defined at construction time (up to a maximum) and automatic bounds checks.\r\n\r\n## Motivation\r\n\r\n`immutable` is a fantastic feature, allowing for highly efficient configuration access without forcing developers to use hardcoded constants, making testing and deployment much easier and enjoyable. However, there is zero support for any kind of arrays. \r\n\r\nWhat I describe can be manually implemented today in solc >0.7, but it leads to a very large amount of error-prone boilerplate. No alternative exists for gas-efficient access to these values. You can look at [production code using this pattern here](https://github.com/balancer-labs/balancer-v2-monorepo/blob/7ff72a23bae6ce0eb5b134953cc7d5b79a19d099/pkg/pool-weighted/contracts/WeightedPool.sol). Using the proposed features in such a contract would reduce sour code size to less than a third of the original length, while also increasing auditability and maintainability.\r\n\r\n## Specification\r\n\r\n'Dynamic' may be a confusing term. What I mean is that the contents and length would be dynamically defined at construction time. Read access with bounds check using the `[]` operator and `.length` would both be supported. This feature set is essentially the same as that of memory arrays, except memory arrays can have their contents mutated.\r\n\r\nTruly dynamic immutable arrays would be quite an undertaking as the length of the runtime code would be dependent on construction arguments, but I'd argue that going that far is unnecessary. In all applications I've seen, there is a compile-time known maximum array length.\r\n\r\nThe proposed feature could therefore work as follows:\r\n - the user declares an immutable array with a maximum length N (e.g. `uint256[] private immutable(50) foo`)\r\n - the compiler allocates runtime code equivalent to N+1 immutable values, for each element plus the total length\r\n - during construction, both `foo.length` and `foo[i]` can be used to write (not read) to the array. For simplicity, we could allow for each value to be written multiple times and perform no bounds check (other than `.length <= N` and `i < N`).\r\n - during runtime, `foo.length` returns the array's length and `foo[i]` performs bounds check with `foo.length`.\r\n\r\n## Backwards Compatibility\r\n\r\nThis is a new feature using brand new (as of today invalid) syntax, so there should be no backwards compatibility implications.\r\n\r\n---\r\n\r\n## Extra\r\n\r\n### Code samples\r\n\r\nAs mentioned above, this can be implemented today using standard Solidity. See for example how one might declare and use an up to 10 tokens array:\r\n\r\n```solidity\r\nuint256 private immutable _totalTokens;\r\n\r\nIERC20 internal immutable _token0;\r\nIERC20 internal immutable _token1;\r\nIERC20 internal immutable _token2;\r\nIERC20 internal immutable _token3;\r\nIERC20 internal immutable _token4;\r\nIERC20 internal immutable _token5;\r\nIERC20 internal immutable _token6;\r\nIERC20 internal immutable _token7;\r\nIERC20 internal immutable _token8;\r\nIERC20 internal immutable _token9;\r\n\r\nconstructor(IERC20[] memory tokens) {\r\n    uint256 numTokens = tokens.length;\r\n    require(numTokens < 10);\r\n    _totalTokens = numTokens;\r\n\r\n    _token0 = numTokens > 0 ? tokens[0] : IERC20(0);\r\n    _token1 = numTokens > 1 ? tokens[1] : IERC20(0);\r\n    _token2 = numTokens > 2 ? tokens[2] : IERC20(0);\r\n    _token3 = numTokens > 3 ? tokens[3] : IERC20(0);\r\n    _token4 = numTokens > 4 ? tokens[4] : IERC20(0);\r\n    _token5 = numTokens > 5 ? tokens[5] : IERC20(0);\r\n    _token6 = numTokens > 6 ? tokens[6] : IERC20(0);\r\n    _token7 = numTokens > 7 ? tokens[7] : IERC20(0);\r\n    _token8 = numTokens > 8 ? tokens[8] : IERC20(0);\r\n    _token9 = numTokens > 9 ? tokens[9] : IERC20(0);\r\n}\r\n\r\nfunction getTokenIndex(IERC20 token) public view returns (uint256) {\r\n    if (token == _token0) { return 0; }\r\n    else if (token == _token1) { return 1; }\r\n    else if (token == _token2) { return 2; }\r\n    else if (token == _token3) { return 3; }\r\n    else if (token == _token4) { return 4; }\r\n    else if (token == _token5) { return 5; }\r\n    else if (token == _token6) { return 6; }\r\n    else if (token == _token7) { return 7; }\r\n    else if (token == _token8) { return 8; }\r\n    else if (token == _token9) { return 9; }\r\n    else {\r\n        revert(\"Invalid token\");\r\n    }\r\n}\r\n```\r\n\r\nThis is of course very error-prone and hard to maintain, but it is the best way to get the desired behavior. With the suggested feature, we get the exact same bytecode size and performance using the following code:\r\n\r\n```solidity\r\nIERC20[] internal immutable(10) _tokens;\r\n\r\nconstructor(IERC20[] memory tokens) {\r\n    _tokens.length = tokens.length;\r\n    \r\n    for (uint256 i = 0; i < tokens.length; ++i) {\r\n      _tokens[i] = tokens[i];\r\n    }\r\n}\r\n\r\nfunction getTokenIndex(IERC20 token) public view returns (uint256) {\r\n  for (uint256 i = 0; i < _tokens.length; ++i) {\r\n    if (_tokens[i] == token) {\r\n      return i;\r\n    }\r\n  }\r\n\r\n  revert(\"invalid token\");\r\n}\r\n```\r\n \r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12587/reactions",
    "total_count": 27,
    "+1": 26,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12587/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1022656577",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1022656577",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1022656577,
    "node_id": "IC_kwDOAm_5kc489IBB",
    "user": {
      "login": "ylv-io",
      "id": 3285000,
      "node_id": "MDQ6VXNlcjMyODUwMDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3285000?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ylv-io",
      "html_url": "https://github.com/ylv-io",
      "followers_url": "https://api.github.com/users/ylv-io/followers",
      "following_url": "https://api.github.com/users/ylv-io/following{/other_user}",
      "gists_url": "https://api.github.com/users/ylv-io/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ylv-io/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ylv-io/subscriptions",
      "organizations_url": "https://api.github.com/users/ylv-io/orgs",
      "repos_url": "https://api.github.com/users/ylv-io/repos",
      "events_url": "https://api.github.com/users/ylv-io/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ylv-io/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-26T22:20:24Z",
    "updated_at": "2022-01-26T22:20:24Z",
    "author_association": "NONE",
    "body": "love the code sample",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1022656577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1022991103",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1022991103",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1022991103,
    "node_id": "IC_kwDOAm_5kc48-Zr_",
    "user": {
      "login": "jaglinux",
      "id": 1555686,
      "node_id": "MDQ6VXNlcjE1NTU2ODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1555686?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jaglinux",
      "html_url": "https://github.com/jaglinux",
      "followers_url": "https://api.github.com/users/jaglinux/followers",
      "following_url": "https://api.github.com/users/jaglinux/following{/other_user}",
      "gists_url": "https://api.github.com/users/jaglinux/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jaglinux/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jaglinux/subscriptions",
      "organizations_url": "https://api.github.com/users/jaglinux/orgs",
      "repos_url": "https://api.github.com/users/jaglinux/repos",
      "events_url": "https://api.github.com/users/jaglinux/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jaglinux/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-27T09:05:01Z",
    "updated_at": "2022-01-27T09:05:01Z",
    "author_association": "NONE",
    "body": "Since it's really not dynamic array, better syntax would be\r\nIERC20[10] internal immutable _tokens;",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1022991103/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1023063315",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1023063315",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1023063315,
    "node_id": "IC_kwDOAm_5kc48-rUT",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-27T10:29:03Z",
    "updated_at": "2022-01-27T10:30:39Z",
    "author_association": "MEMBER",
    "body": "Thanks for the issue - this has been on our longer term agenda ever since we introduced immutables :-) (I'm actually surprised that it wasn't requested much earlier ;-)).\r\nAt least I hadn't considered a maximal length for such dynamic immutable arrays - that's an interesting idea that could make this easier (but I could also imagine that fully dynamic arrays would not be that much harder actually).\r\n\r\nOne thing to be aware of is that this will not be as cheap as value-type immutables, because we won't be able to inline the values directly - in most cases I'd expect the values to end up being ``codecopy``d to memory before use, which has some overhead (although it will be significantly cheaper than storage of course).\r\n\r\nIn retrospect, I'd much rather have introduced what we now have as ``immutable``s as a new data location called ``code`` (besides ``memory``, ``calldata`` and ``storage``), which would convey more clearly what actually happens and would make it less of a concern to allow multiple assignments during construction (there's no technical reason for disallowing that - during construction the values just live in memory - it's just contrary to the meaning of \"immutable\"...)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1023063315/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1023098368",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1023098368",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1023098368,
    "node_id": "IC_kwDOAm_5kc48-z4A",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-27T11:11:00Z",
    "updated_at": "2022-01-27T12:57:49Z",
    "author_association": "CONTRIBUTOR",
    "body": ">(but I could also imagine that fully dynamic arrays would not be that much harder actually).\r\n\r\nI haven't given this much thought, so I can't quite comment on complexity of such an implementation. In all scenarios where I'd use this however, a maximum length (which also means there's some wasted bytecode on the unused slots) is good enough.\r\n\r\n>One thing to be aware of is that this will not be as cheap as value-type immutables, because we won't be able to inline the values directly - in most cases I'd expect the values to end up being codecopyd to memory before use, which has some overhead (although it will be significantly cheaper than storage of course).\r\n\r\nYes, while the bytecode size for immutable variables in my example would be the same, the actual code that accesses them would not (both size and gas would differ). I imagine instead of a push we'd just have codecopy + mload (with no need to expand allocated memory), which would use very little gas.\r\n\r\n(except for .length, which _would_ be a push)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1023098368/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1023180636",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1023180636",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1023180636,
    "node_id": "IC_kwDOAm_5kc48_H9c",
    "user": {
      "login": "simontianx",
      "id": 9939278,
      "node_id": "MDQ6VXNlcjk5MzkyNzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9939278?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/simontianx",
      "html_url": "https://github.com/simontianx",
      "followers_url": "https://api.github.com/users/simontianx/followers",
      "following_url": "https://api.github.com/users/simontianx/following{/other_user}",
      "gists_url": "https://api.github.com/users/simontianx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/simontianx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/simontianx/subscriptions",
      "organizations_url": "https://api.github.com/users/simontianx/orgs",
      "repos_url": "https://api.github.com/users/simontianx/repos",
      "events_url": "https://api.github.com/users/simontianx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/simontianx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-27T12:59:27Z",
    "updated_at": "2022-01-27T12:59:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just would like to bring up a particular use case of mapping to an immutable array like in `mapping(uint256=>uint256[10] immutable) data`. This may find applications in ordered NFT batch standards.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1023180636/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1023201151",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1023201151",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1023201151,
    "node_id": "IC_kwDOAm_5kc48_M9_",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-27T13:18:43Z",
    "updated_at": "2022-01-27T13:18:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hm, I'm not quite sure how you'd do mappings as they are currently extremely storage based (since they key is just a 256 bit hash, there's no notion of the 'capacity' of the map). But you'd likely be able to implement such a thing yourself using multiple immutable arrays (a few with the actual data, and one that tells you which mapping to use), though it'd require some boilerplate similar to the one in my code sample, even if this feature was implemented.\r\n\r\nI'd limit discussion here to the feature discussed in the opening post.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1023201151/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1023221310",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1023221310",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1023221310,
    "node_id": "IC_kwDOAm_5kc48_R4-",
    "user": {
      "login": "simontianx",
      "id": 9939278,
      "node_id": "MDQ6VXNlcjk5MzkyNzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9939278?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/simontianx",
      "html_url": "https://github.com/simontianx",
      "followers_url": "https://api.github.com/users/simontianx/followers",
      "following_url": "https://api.github.com/users/simontianx/following{/other_user}",
      "gists_url": "https://api.github.com/users/simontianx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/simontianx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/simontianx/subscriptions",
      "organizations_url": "https://api.github.com/users/simontianx/orgs",
      "repos_url": "https://api.github.com/users/simontianx/repos",
      "events_url": "https://api.github.com/users/simontianx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/simontianx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-27T13:40:15Z",
    "updated_at": "2022-01-27T13:40:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Hm, I'm not quite sure how you'd do mappings as they are currently extremely storage based (since they key is just a 256 bit hash, there's no notion of the 'capacity' of the map).\r\n\r\nI think it's similar to `mapping(uint256=>uint256[10]) data;`, except the values in a mapped array cannot be modified.\r\n\r\n> But you'd likely be able to implement such a thing yourself using multiple immutable arrays (a few with the actual data, and one that tells you which mapping to use),\r\n\r\nIs this an immutable struct?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1023221310/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1062768347",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1062768347",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1062768347,
    "node_id": "IC_kwDOAm_5kc4_WI7b",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-09T10:20:11Z",
    "updated_at": "2022-03-09T10:20:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @ekpyron! I keep running into scenarios where such a feature would be extremely useful :) Is there an estimated timeline for this feature? Is there any work the community can do to push it forward (e.g. come up with a more detailed spec, begin implementation work, etc.)?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1062768347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1065096097",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1065096097",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1065096097,
    "node_id": "IC_kwDOAm_5kc4_fBOh",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-11T13:05:53Z",
    "updated_at": "2022-03-11T13:21:27Z",
    "author_association": "MEMBER",
    "body": "@nventuro Unfortunately, there hasn't been progress on this and we don't have an estimated timeline for it. For now I moved it up in our design backlog, which will hopefully lead to us discussing it in one of our calls next week.\r\n\r\nThe main problem is that the implementation of this won't be trivial and I guess probably either @chriseth or I would have to do it and I'm not sure when we'll find the time.\r\n\r\nConceptually, the main question I think is whether we want to enforce an \"assign once and do not read\" logic for dynamic immutable types like we do for immutables of value type.\r\nIt would probably in fact be easier to *implement* this, if we were to treat the reference-type immutable just like a ``memory`` variable during the constructor and in that sense allow reassignments and reads from it. However, it'd be counterintuitive for them to be called ``immutable`` while they can be reassigned, even if only during creation (@chriseth objected that to such plans in the past IIRC).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1065096097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1069183987",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1069183987",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1069183987,
    "node_id": "IC_kwDOAm_5kc4_unPz",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-16T14:21:40Z",
    "updated_at": "2022-03-16T14:21:40Z",
    "author_association": "MEMBER",
    "body": "We just discussed this in our design call and decided to make it a goal for Q2 2022.\r\n\r\nCurrent rough sketch of a plan is:\r\n- start off with an implementation for ``bytes`` only and then extend\r\n- the length is dynamic without syntactic maximum and stored as if it was an immutable of value type\r\n- we don't call them ``immutables``, but introduce a data location ``code`` for them that can be passed around by reference\r\n- the above should make cheap slicing feasible\r\n- ``code`` variables during construction will behave just like ``memory`` variables, i.e. they will be normally writable and readable in memory during contract creation.\r\n\r\nHowever, we will probably have some iterations on this plan as we start implementing this.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1069183987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1070971882",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1070971882",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1070971882,
    "node_id": "IC_kwDOAm_5kc4_1bvq",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-17T14:46:10Z",
    "updated_at": "2022-03-17T14:46:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "The `code` part sounds very interesting! Looking forward to how this turns out, it'll likely be the tipping point that makes me migrate to 0.8 :grin: ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1070971882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1071287057",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1071287057",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1071287057,
    "node_id": "IC_kwDOAm_5kc4_2osR",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-17T19:42:58Z",
    "updated_at": "2022-03-17T19:42:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "A `code` location would be an awesome addition. I was going to say before that \"assign once and do not read\" is not the crucial part that people care about. It's all about the efficiency of access.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1071287057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1082171484",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1082171484",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1082171484,
    "node_id": "IC_kwDOAm_5kc5AgKBc",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-29T17:30:57Z",
    "updated_at": "2022-03-29T17:30:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here's an extreme example: [8 sets of 30 immutable values each](https://github.com/compound-finance/open-oracle/blob/0e148fdb0e8cbe4d412548490609679621ab2325/contracts/Uniswap/UniswapConfig.sol#L38) that could be implemented as code/immutable arrays using this feature.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1082171484/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1085706748",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1085706748",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1085706748,
    "node_id": "IC_kwDOAm_5kc5AtpH8",
    "user": {
      "login": "d-xo",
      "id": 6689924,
      "node_id": "MDQ6VXNlcjY2ODk5MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6689924?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/d-xo",
      "html_url": "https://github.com/d-xo",
      "followers_url": "https://api.github.com/users/d-xo/followers",
      "following_url": "https://api.github.com/users/d-xo/following{/other_user}",
      "gists_url": "https://api.github.com/users/d-xo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/d-xo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/d-xo/subscriptions",
      "organizations_url": "https://api.github.com/users/d-xo/orgs",
      "repos_url": "https://api.github.com/users/d-xo/repos",
      "events_url": "https://api.github.com/users/d-xo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/d-xo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-01T10:04:57Z",
    "updated_at": "2022-04-01T10:04:57Z",
    "author_association": "MEMBER",
    "body": "How would the immutable values be stored in the code? Having dynamically sized data in the middle of the bytecode would make symbolic analysis of such bytecode even more annoying (perhaps even impossible?) than it already is.\r\n\r\nHere are some things that are already difficult to deal with when symbolically executing (given the existance of dynamic constructor args and static immutables):\r\n\r\n- Determining when we have executed past the end of the bytecode\r\n- Building a mapping between bytecode indices and opcode locations (for source maps)\r\n\r\nThese can currently be worked around as long as dynamic data exists at the end of the bytecode, in this case we can produce an index beyond which all bytecode is known to be a symbolic value, and error out if we attempt to execute past this index (symbolic execution of symbolic opcodes is not a tractable problem). I'm not sure how I would handle this if code could contain arbitrary pieces of symbolic data with an unknown length at any location in the code.\r\n\r\nside note: EIP-3540 cannot come soon enough...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1085706748/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1087362360",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1087362360",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1087362360,
    "node_id": "IC_kwDOAm_5kc5Az9U4",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-04T10:08:10Z",
    "updated_at": "2022-04-04T10:08:10Z",
    "author_association": "MEMBER",
    "body": "I'd say that the immutable would definitely be stored after the opcodes.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1087362360/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1126097147",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1126097147",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1126097147,
    "node_id": "IC_kwDOAm_5kc5DHuD7",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-13T14:09:07Z",
    "updated_at": "2022-05-13T14:09:07Z",
    "author_association": "MEMBER",
    "body": "Hm... thinking about actually implementing this, it may be a problem to parse a ``code`` data location without making ``code`` a proper keyword, which would be breaking... that's a bit unfortunate...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1126097147/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1126272447",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1126272447",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1126272447,
    "node_id": "IC_kwDOAm_5kc5DIY2_",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-13T17:15:03Z",
    "updated_at": "2022-05-13T17:15:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "In that case could the keyword be `immutable`?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1126272447/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1126312090",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1126312090",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1126312090,
    "node_id": "IC_kwDOAm_5kc5DIiia",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-13T18:11:31Z",
    "updated_at": "2022-05-13T18:13:31Z",
    "author_association": "MEMBER",
    "body": "> In that case could the keyword be `immutable`?\r\n\r\nThat's a bit weird for a full proper data location...\r\n```\r\ncontract C {\r\n  uint[] immutable x;\r\n  uint[] immutable y;\r\n  function f() public {\r\n    uint[] immutable z = x;\r\n    z = y;\r\n  }\r\n}\r\n```\r\n``immutable`` looks just wrong for references you can reassign and pass around :-).\r\n\r\nBut I may be able to work around the parsing problem, if we restrict to arrays only... so that would mean that the first version would only allow the new ``code`` data location for array types, not for structs and we'd only add structs for 0.9 with ``code`` being a proper keyword... but I still need to check if that works...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1126312090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1231801583",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1231801583",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1231801583,
    "node_id": "IC_kwDOAm_5kc5Ja8zv",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-30T15:08:55Z",
    "updated_at": "2022-08-30T15:08:55Z",
    "author_association": "MEMBER",
    "body": "> immutable looks just wrong for references you can reassign and pass around :-).\r\n\r\nIf we had a proper reference syntax we wouldn't need this new `code` keyword, methinks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1231801583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1234026729",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1234026729",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1234026729,
    "node_id": "IC_kwDOAm_5kc5JjcDp",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T09:40:12Z",
    "updated_at": "2022-09-01T09:40:12Z",
    "author_association": "MEMBER",
    "body": "> > immutable looks just wrong for references you can reassign and pass around :-).\r\n> \r\n> If we had a proper reference syntax we wouldn't need this new `code` keyword, methinks.\r\n\r\nCan you elaborate on that? Reference syntax and data locations are pretty orthogonal.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1234026729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1234195049",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1234195049",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1234195049,
    "node_id": "IC_kwDOAm_5kc5JkFJp",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T12:12:18Z",
    "updated_at": "2022-09-01T12:12:18Z",
    "author_association": "MEMBER",
    "body": "The only reason we need `code` data location in that statement, because otherwise it is unclear where it should be. \"Is it a copy, is it a reference?\"",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1234195049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1234226229",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1234226229",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1234226229,
    "node_id": "IC_kwDOAm_5kc5JkMw1",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T12:42:01Z",
    "updated_at": "2022-09-01T12:42:18Z",
    "author_association": "MEMBER",
    "body": "> The only reason we need `code` data location in that statement, because otherwise it is unclear where it should be. \"Is it a copy, is it a reference?\"\r\n\r\nI honestly don't understand what you're saying :-). The `code` data location would distinguish state variables in storage from variables in the data section of the contract code - and distinguish references of things in code from references to things in storage. I see no relation to the question of references or copies whatsoever here.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1234226229/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1262329559",
    "html_url": "https://github.com/ethereum/solidity/issues/12587#issuecomment-1262329559",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12587",
    "id": 1262329559,
    "node_id": "IC_kwDOAm_5kc5LPZ7X",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-29T14:01:15Z",
    "updated_at": "2022-09-29T14:01:15Z",
    "author_association": "NONE",
    "body": "Would love to see `code` location modifier implemented!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1262329559/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
