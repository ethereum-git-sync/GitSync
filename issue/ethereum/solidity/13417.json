{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13417",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13417/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13417/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13417/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13417",
  "id": 1344361798,
  "node_id": "I_kwDOAm_5kc5QIVVG",
  "number": 13417,
  "title": "Legacy optimizer does not remove zero length redundant write to memory inside inline assembly block",
  "user": {
    "login": "bshastry",
    "id": 2388185,
    "node_id": "MDQ6VXNlcjIzODgxODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bshastry",
    "html_url": "https://github.com/bshastry",
    "followers_url": "https://api.github.com/users/bshastry/followers",
    "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
    "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
    "organizations_url": "https://api.github.com/users/bshastry/orgs",
    "repos_url": "https://api.github.com/users/bshastry/repos",
    "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bshastry/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1282209978,
      "node_id": "MDU6TGFiZWwxMjgyMjA5OTc4",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/optimizer",
      "name": "optimizer",
      "color": "d4c5f9",
      "default": false,
      "description": ""
    },
    {
      "id": 4438492402,
      "node_id": "LA_kwDOAm_5kc8AAAABCI4E8g",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/nice%20to%20have",
      "name": "nice to have",
      "color": "ffdeb3",
      "default": false,
      "description": "We don’t see a good reason not to have it but won’t go out of our way to implement it."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-08-19T12:14:50Z",
  "updated_at": "2022-08-30T04:03:42Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "```\r\ncontract C0 {\r\n  function f() external {\r\n    assembly\r\n    {\r\n      calldatacopy(0x80, keccak256(0x80, exp(2, 40)), 0)\r\n    }\r\n  }\r\n}\r\n// ====\r\n// compileViaYul: also\r\n// ----\r\n// f() -> FAILURE\r\n// f() -> \r\n```\r\n\r\nFirst call indicates outcome via legacy + optimize, the second via IR + optimize.\r\n\r\n~~Why is it that legacy + optimize runs out of gas while IR + optimize does not? Afaiu, the Yul optimizer (specifically redundant store eliminator is run on inline assembly code in legacy mode).~~",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13417/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13417/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1220605631",
    "html_url": "https://github.com/ethereum/solidity/issues/13417#issuecomment-1220605631",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13417",
    "id": 1220605631,
    "node_id": "IC_kwDOAm_5kc5IwPa_",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-19T12:15:59Z",
    "updated_at": "2022-08-19T12:15:59Z",
    "author_association": "MEMBER",
    "body": "This could be expected behavior and hence a wontfix. Feel free to close this issue in that case.\r\n\r\nI created it just to be sure and have it seen by at least one other person :-)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1220605631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1220804543",
    "html_url": "https://github.com/ethereum/solidity/issues/13417#issuecomment-1220804543",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13417",
    "id": 1220804543,
    "node_id": "IC_kwDOAm_5kc5Iw_-_",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-19T15:24:49Z",
    "updated_at": "2022-08-19T15:24:49Z",
    "author_association": "MEMBER",
    "body": "From chat conversations, here is the summary so far\n\n1. Due to the mstore bug affecting the legacy pipeline, redundant memory write removal was disabled. The said bug does not affect IR pipeline because the latter has a global view and can safely remove such redundant writes\n\n2. Hence, this issue is expected behavior.\n\n3. The only potential optimization that may be applied to the legacy pipeline is to remove zero length writes to memory such as the case in this issue. This does not seem high priority since such operations seem unusual.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1220804543/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1229194863",
    "html_url": "https://github.com/ethereum/solidity/issues/13417#issuecomment-1229194863",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13417",
    "id": 1229194863,
    "node_id": "IC_kwDOAm_5kc5JRAZv",
    "user": {
      "login": "nishant-sachdeva",
      "id": 32475507,
      "node_id": "MDQ6VXNlcjMyNDc1NTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/32475507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nishant-sachdeva",
      "html_url": "https://github.com/nishant-sachdeva",
      "followers_url": "https://api.github.com/users/nishant-sachdeva/followers",
      "following_url": "https://api.github.com/users/nishant-sachdeva/following{/other_user}",
      "gists_url": "https://api.github.com/users/nishant-sachdeva/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nishant-sachdeva/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nishant-sachdeva/subscriptions",
      "organizations_url": "https://api.github.com/users/nishant-sachdeva/orgs",
      "repos_url": "https://api.github.com/users/nishant-sachdeva/repos",
      "events_url": "https://api.github.com/users/nishant-sachdeva/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nishant-sachdeva/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-27T13:42:16Z",
    "updated_at": "2022-08-27T13:42:16Z",
    "author_association": "MEMBER",
    "body": "@bshastry  Based on previous comments, would you recommend closing this issue? \r\n\r\nOr do we need to take a final call on point 3 from the previous comment?\r\n> The only potential optimization that may be applied to the legacy pipeline is to remove zero length writes to memory such as the case in this issue. This does not seem high priority since such operations seem unusual.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1229194863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1231114202",
    "html_url": "https://github.com/ethereum/solidity/issues/13417#issuecomment-1231114202",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13417",
    "id": 1231114202,
    "node_id": "IC_kwDOAm_5kc5JYU_a",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-30T04:03:42Z",
    "updated_at": "2022-08-30T04:03:42Z",
    "author_association": "MEMBER",
    "body": "> @bshastry Based on previous comments, would you recommend closing this issue?\r\n> \r\n> Or do we need to take a final call on point 3 from the previous comment?\r\n\r\nI wouldn't recommend closing this issue, since `nice to have` could open to door to low priority external contributions.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1231114202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
