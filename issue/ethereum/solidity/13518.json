{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13518/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13518/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13518/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13518",
  "id": 1369846508,
  "node_id": "I_kwDOAm_5kc5RpjLs",
  "number": 13518,
  "title": "Add support for `calldata` input and output in `abi.decode()`",
  "user": {
    "login": "k06a",
    "id": 702124,
    "node_id": "MDQ6VXNlcjcwMjEyNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/k06a",
    "html_url": "https://github.com/k06a",
    "followers_url": "https://api.github.com/users/k06a/followers",
    "following_url": "https://api.github.com/users/k06a/following{/other_user}",
    "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
    "organizations_url": "https://api.github.com/users/k06a/orgs",
    "repos_url": "https://api.github.com/users/k06a/repos",
    "events_url": "https://api.github.com/users/k06a/events{/privacy}",
    "received_events_url": "https://api.github.com/users/k06a/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    },
    {
      "id": 4437999539,
      "node_id": "LA_kwDOAm_5kc8AAAABCIZ_sw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/high%20effort",
      "name": "high effort",
      "color": "ff54f4",
      "default": false,
      "description": "A lot to implement but still doable by a single person. The task is large or difficult."
    },
    {
      "id": 4438492402,
      "node_id": "LA_kwDOAm_5kc8AAAABCI4E8g",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/nice%20to%20have",
      "name": "nice to have",
      "color": "ffdeb3",
      "default": false,
      "description": "We don’t see a good reason not to have it but won’t go out of our way to implement it."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2022-09-12T12:43:08Z",
  "updated_at": "2022-09-13T14:07:58Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nCurrently `abi.decode()` works with `memory` argument and not with `calldata`, if `calldata` is provided it is being copied to memory and then decoded. Let's make `abi.decode()` to support both arguments and returns as `calldata`.\r\n\r\n## Motivation\r\n\r\n`Calldata` abstraction is cool, slicing is cool. We need `abi.decode()` to fully support decoding from `calldata` to `calldata`!\r\n\r\n## Specification\r\n\r\n```solidity\r\nfunction f(bytes calldata data) external {\r\n    (\r\n        address[] calldata targets,\r\n        bytes[] calldata calldatas\r\n    ) = abi.decode(data[1:], (address[], bytes[]));\r\n\r\n    // ...\r\n}\r\n```\r\n\r\n## Backwards Compatibility\r\n\r\n<!--\r\nAll language changes that introduce backwards incompatibilities must include a section describing these incompatibilities and their severity.\r\n\r\nPlease describe how you propose to deal with these incompatibilities.\r\n-->\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13518/reactions",
    "total_count": 5,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 2
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13518/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1243704519",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1243704519",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1243704519,
    "node_id": "IC_kwDOAm_5kc5KIWzH",
    "user": {
      "login": "0xmikko",
      "id": 26343374,
      "node_id": "MDQ6VXNlcjI2MzQzMzc0",
      "avatar_url": "https://avatars.githubusercontent.com/u/26343374?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xmikko",
      "html_url": "https://github.com/0xmikko",
      "followers_url": "https://api.github.com/users/0xmikko/followers",
      "following_url": "https://api.github.com/users/0xmikko/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xmikko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xmikko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xmikko/subscriptions",
      "organizations_url": "https://api.github.com/users/0xmikko/orgs",
      "repos_url": "https://api.github.com/users/0xmikko/repos",
      "events_url": "https://api.github.com/users/0xmikko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xmikko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-12T12:58:56Z",
    "updated_at": "2022-09-12T12:58:56Z",
    "author_association": "NONE",
    "body": "It could also add additional security because calldata is immutable, so no way to change data where it's not needed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1243704519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1243743227",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1243743227",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1243743227,
    "node_id": "IC_kwDOAm_5kc5KIgP7",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-12T13:27:32Z",
    "updated_at": "2022-09-12T13:35:09Z",
    "author_association": "MEMBER",
    "body": "Just to clarify here: decoding *from* calldata (including slices) *does* work already (if it isn't for any case in which it should, let us know).\r\nEncoding *to* calldata types is an interesting idea! So the expectation here would be that the ``abi.decode`` call validates the outermost tuple (reverting on invalid data) and returns the appropriate calldata references, basically as if they had been function arguments (only relative to the given ``bytes calldata`` instead of ``msg.data[4:]``)?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1243743227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1243836879",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1243836879",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1243836879,
    "node_id": "IC_kwDOAm_5kc5KI3HP",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-12T14:34:53Z",
    "updated_at": "2022-09-12T14:34:53Z",
    "author_association": "NONE",
    "body": "@ekpyron exactly. I assume implementing this feature would require reusing existing code of arguments decoding.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1243836879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1243998195",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1243998195",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1243998195,
    "node_id": "IC_kwDOAm_5kc5KJefz",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-12T16:36:25Z",
    "updated_at": "2022-09-12T16:37:32Z",
    "author_association": "MEMBER",
    "body": "Currently, the return type of any function call is fully determined by the types of its arguments - so that'd be quite a step to break here (i.e. actually determine that the full ``abi.decode(...)`` expression is assigned to ``calldata`` types instead of ``memory`` types, and changing the semantics of the expression based on that).\r\n\r\nHowever, I wonder if there are any issues with actually *always* having ``abi.decode`` return calldata types (if given a first argument in calldata), since they should be assignable to memory types as well (which would then trigger the full copy) - if that works, that might be worthwhile. The main issue then would be that it might still change the revert semantics of a plain ``abi.decode`` that *doesn't* use the return arguments...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1243998195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1244059868",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1244059868",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1244059868,
    "node_id": "IC_kwDOAm_5kc5KJtjc",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-12T17:22:32Z",
    "updated_at": "2022-09-12T17:22:32Z",
    "author_association": "MEMBER",
    "body": "So in general, the easiest solution to this would be to just change the return types of ``abi.decode`` with a calldata argument, to calldata types - that should directly solve this with near-zero effort - and I think this should all work now (there is a comment in the type checker code for ``abi.decode`` about the implementation of calldata types lacking and hence memory types being forced, but I think that's utterly outdated by now).\r\n\r\nThe problem with that approach, though, is that it's technically a breaking change :-).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1244059868/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245280823",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1245280823",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1245280823,
    "node_id": "IC_kwDOAm_5kc5KOXo3",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T11:32:56Z",
    "updated_at": "2022-09-13T11:34:21Z",
    "author_association": "NONE",
    "body": "@ekpyron I believe that we need to have 2 functions:\r\n- `abi.decode(bytes memory, *)`\r\n- `abi.decode(bytes calldata, *)`\r\n\r\nAs you said `calldata` argument version will return `calldata` types, which can be deep-copied to `memory` types. It doesn't look like a breaking change for me.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245280823/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245328421",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1245328421",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1245328421,
    "node_id": "IC_kwDOAm_5kc5KOjQl",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T12:15:27Z",
    "updated_at": "2022-09-13T12:15:27Z",
    "author_association": "MEMBER",
    "body": "``abi.decode(bytes calldata, *)`` already exists, though, but so far is just an alias and returns memory types (and even if it didn't exist, since calldata to memory conversions are implicit effectively current code works *as if* it existed). And changing those return types to ``calldata`` types will change the revert semantics in certain corner cases. I'm saying it's *technically* breaking, since it's only weird cases that would actually change in behaviour, but strictly speaking it is.\r\n\r\nSo concretely:\r\n\r\n```\r\ncontract C {\r\n  function f() external {\r\n    abi.decode(msg.data[4:], (address[]));\r\n  }\r\n  function test() public returns (bool) {\r\n    uint[] memory x = new uint[](1);\r\n    x[0] = type(uint256).max;\r\n    (bool y,) = address(this).call(abi.encodeWithSelector(this.f.selector, x));\r\n    return y;\r\n  }\r\n}\r\n```\r\n\r\nCalling ``test()`` here will currently return ``false``, since ``abi.decode``, despite having a ``calldata`` argument, will directly copy-decode to ``memory``, which validates that the ``address`` elements don't have dirty higher order bits (but the single array element passed in has all bits set).\r\n\r\nHowever, if we change the ``abi.decode(bytes calldata, *)`` version to returning ``calldata`` types, the ``abi.decode``-expression in ``f`` itself won't perform this validation just yet, so ``test()`` will return ``true``.\r\n\r\nSo yeah - it's the same valid code behaving differently due to changing this, making this at least technically breaking (even though it's a rather annoying technicality here...).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245328421/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245427058",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1245427058",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1245427058,
    "node_id": "IC_kwDOAm_5kc5KO7Vy",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T13:37:56Z",
    "updated_at": "2022-09-13T13:37:56Z",
    "author_association": "NONE",
    "body": "@ekpyron interesting, but why would you check high bits of addresses? I would say it is both unexpected from developer POV and non-desired, since it will spend gas, while function arguments decoder I assume skip these checks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245427058/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245437476",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1245437476",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1245437476,
    "node_id": "IC_kwDOAm_5kc5KO94k",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T13:45:53Z",
    "updated_at": "2022-09-13T13:45:53Z",
    "author_association": "MEMBER",
    "body": "Calling ``function f(address x) external`` with dirty higher-order bits in ``calldata`` will also revert during argument decoding... Calling ``function f(address[] callata x) external`` will not *immediately* revert if called with an element with dirty higher order bits, but the first use e.g. ``x[0]`` will revert, if there are dirty higher-order bits.\r\nValidation like that has been happening ever since ABIEncoderV2.\r\nThere's some corner cases when copying from calldata to memory in legacy code generation that *won't* perform this validation, which is actually underdocumented currently, but in general, there will be input validation.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245437476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245450511",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1245450511",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1245450511,
    "node_id": "IC_kwDOAm_5kc5KPBEP",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T13:55:42Z",
    "updated_at": "2022-09-13T13:55:42Z",
    "author_association": "MEMBER",
    "body": "Compared to masking away, the increased gas costs in validating the arguments is not *that* high - and either of those you need anyways, since just allowing invalid inputs may lead to all sorts of unexpected problems. And validating instead of just masking is an additional safeguard against unexpected behaviour (after all, there's little valid reason for passing garbage in higher-order bits, so if there are, you can usually assume something went wrong and reverting is the safer cause of action).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245450511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245452719",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1245452719",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1245452719,
    "node_id": "IC_kwDOAm_5kc5KPBmv",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T13:57:21Z",
    "updated_at": "2022-09-13T13:57:21Z",
    "author_association": "NONE",
    "body": "@ekpyron interesting, didn't noticed that behaviour perviously. So regarding the `abi.decode(calldata)` this issue could be handled during copying `calldata` to `memory`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245452719/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245466003",
    "html_url": "https://github.com/ethereum/solidity/issues/13518#issuecomment-1245466003",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13518",
    "id": 1245466003,
    "node_id": "IC_kwDOAm_5kc5KPE2T",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T14:07:17Z",
    "updated_at": "2022-09-13T14:07:58Z",
    "author_association": "MEMBER",
    "body": "If you actually have\r\n```\r\naddress[] memory x = abi.decode(msg.data[4:], (address[]));\r\n```\r\nyou'd get a ``calldata`` to ``memory`` copy, which could actually do the validation.\r\n\r\nHowever, there's nothing preventing you currently from *just* calling ``abi.decode`` itself without using its return values. There's little reason for ever doing so, but that case (so the snippet in https://github.com/ethereum/solidity/issues/13518#issuecomment-1245328421) would still *technically* break...\r\nIt's reasonable to consider whether this breaking pattern is *that* weird, s.t. it's fine to break it in a non-breaking release, though.\r\n\r\nBut yeah, thinking through this made me actually find some inconsistencies in the validation behavior of such calldata-to-memory copies (arrays with statically-sized base types in legacy code generation still use some old pre-ABIEncoderV2-code-paths that do not do this validation, while via-IR code generation *always* does, and legacy code generation for arrays with dynamic base types also *always* does), so we'll first need to decide how to deal with those.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1245466003/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
