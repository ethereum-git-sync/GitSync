{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3262",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3262/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3262/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3262/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3262",
  "id": 277966244,
  "node_id": "MDU6SXNzdWUyNzc5NjYyNDQ=",
  "number": 3262,
  "title": "Introduce restricted set of assembly",
  "user": {
    "login": "axic",
    "id": 20340,
    "node_id": "MDQ6VXNlcjIwMzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axic",
    "html_url": "https://github.com/axic",
    "followers_url": "https://api.github.com/users/axic/followers",
    "following_url": "https://api.github.com/users/axic/following{/other_user}",
    "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
    "organizations_url": "https://api.github.com/users/axic/orgs",
    "repos_url": "https://api.github.com/users/axic/repos",
    "events_url": "https://api.github.com/users/axic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2017-11-30T01:23:04Z",
  "updated_at": "2022-08-17T13:49:07Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Based on #3258 it may make sense introducing a restricted subset of the assembly to be used for snippets which do not need full access to the instruction set. I think majority of the use cases are like that.\r\n\r\nInitial suggested list for removed features:\r\n- invalid\r\n- return\r\n- revert\r\n- selfdestruct\r\n\r\n```\r\nassembly \"restricted\" {\r\n  revert(0, 0) <-- error\r\n}\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3262/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3262/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/348054510",
    "html_url": "https://github.com/ethereum/solidity/issues/3262#issuecomment-348054510",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3262",
    "id": 348054510,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODA1NDUxMA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-30T01:35:27Z",
    "updated_at": "2017-11-30T01:47:06Z",
    "author_association": "MEMBER",
    "body": "Alternatively, introduce an \"unchecked\" or \"unrestricted\" version of assembly. The regular (not \"unchecked\") version would raise a warning if any of the above instructions are used in a non-external (internal, private, public) function, but an \"unchecked\" version would allow it.\r\n\r\n```\r\nassembly {\r\n  // all of these are errors\r\nlabel42:\r\n  jump(label42)\r\n  jump(0x2)\r\n  selfdestruct(42)\r\n  // these would be errors if the function is no marked \"external\"\r\n  invalid()\r\n  return(0, 42)\r\n  revert(0, 42)\r\n}\r\n\r\nassembly \"unchecked\" {\r\n  // none of these are errors\r\nlabel42:\r\n  jump(label42)\r\n  jump(0x2) // this is a warning at the moment, that could be removed after this change\r\n  invalid()\r\n  return(0, 42)\r\n  revert(0, 42)\r\n  selfdestruct(42)\r\n}\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/348054510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/348059369",
    "html_url": "https://github.com/ethereum/solidity/issues/3262#issuecomment-348059369",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3262",
    "id": 348059369,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODA1OTM2OQ==",
    "user": {
      "login": "3esmit",
      "id": 224810,
      "node_id": "MDQ6VXNlcjIyNDgxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/224810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3esmit",
      "html_url": "https://github.com/3esmit",
      "followers_url": "https://api.github.com/users/3esmit/followers",
      "following_url": "https://api.github.com/users/3esmit/following{/other_user}",
      "gists_url": "https://api.github.com/users/3esmit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3esmit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3esmit/subscriptions",
      "organizations_url": "https://api.github.com/users/3esmit/orgs",
      "repos_url": "https://api.github.com/users/3esmit/repos",
      "events_url": "https://api.github.com/users/3esmit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3esmit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-30T02:04:36Z",
    "updated_at": "2017-11-30T02:04:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "I agree in requiring a special flag in assembly blocks that affect the behavior of solidity internal calls, specially because this is not a common behavior.\r\n\r\nSuch as `return(p,s)` being used in a public function, when called externally it works fine but when called as internal function it will end execution at that `return(p,s)`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/348059369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/638233757",
    "html_url": "https://github.com/ethereum/solidity/issues/3262#issuecomment-638233757",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3262",
    "id": 638233757,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzODIzMzc1Nw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-03T14:25:59Z",
    "updated_at": "2020-06-03T14:25:59Z",
    "author_association": "MEMBER",
    "body": "I wonder if this could make sense now since we have dialects, especially as @ekpyron suggested today to have an mstore-less version (where only mobj's are allowed).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/638233757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/638305071",
    "html_url": "https://github.com/ethereum/solidity/issues/3262#issuecomment-638305071",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3262",
    "id": 638305071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzODMwNTA3MQ==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-03T16:21:38Z",
    "updated_at": "2020-06-03T16:21:38Z",
    "author_association": "MEMBER",
    "body": "I'm not sure about this - yes, sooner or later we will need to specify dialects for assembly blocks - but I'm not sure if there's much benefit in having a restricted instruction set. We even output the Yul AST to JSON in the meantime, so validating that specific instructions aren't used can easily be done by external tools. And the dialect namespace will get crowded and confusing anyways, so I'd try not to add more stuff than absolutely necessary to it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/638305071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
