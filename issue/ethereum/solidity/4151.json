{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/4151",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/4151/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/4151/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/4151/events",
  "html_url": "https://github.com/ethereum/solidity/issues/4151",
  "id": 323638201,
  "node_id": "MDU6SXNzdWUzMjM2MzgyMDE=",
  "number": 4151,
  "title": "ABI: include return types in selector (breaking)",
  "user": {
    "login": "axic",
    "id": 20340,
    "node_id": "MDQ6VXNlcjIwMzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axic",
    "html_url": "https://github.com/axic",
    "followers_url": "https://api.github.com/users/axic/followers",
    "following_url": "https://api.github.com/users/axic/following{/other_user}",
    "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
    "organizations_url": "https://api.github.com/users/axic/orgs",
    "repos_url": "https://api.github.com/users/axic/repos",
    "events_url": "https://api.github.com/users/axic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 467898404,
      "node_id": "MDU6TGFiZWw0Njc4OTg0MDQ=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/breaking%20change%20:warning:",
      "name": "breaking change :warning:",
      "color": "b60205",
      "default": false,
      "description": ""
    },
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    },
    {
      "id": 1017612679,
      "node_id": "MDU6TGFiZWwxMDE3NjEyNjc5",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/protocol%20design%20:crystal_ball:",
      "name": "protocol design :crystal_ball:",
      "color": "8af77e",
      "default": false,
      "description": "Potential changes to ABI, meta data, standard JSON"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-05-16T14:09:04Z",
  "updated_at": "2018-08-07T20:20:22Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "In order to have a stricter commitment to the return types (identified in #4116 as a potential improvement)  it would make sense to include that in the selector, which currently is a keccak256 hash of the function name and the types of its parameters: `name(T1,T2,...)`\r\n\r\nThe suggestion here is to extend that to include return types: `name(T1,T2,..)->(T1,T2,..)`\r\n\r\nIf there are no return types, the hash would remain identical.\r\n\r\nIn practice this would mean that contracts would check for two hashes in the dispatcher to support older contracts calling in.\r\n\r\nHowever for the case of the contract calling out, I think it would have to be a compiler option to resort to the old hash or the new one. New contracts not interacting with older ones could opt to rely on the new hash.\r\n\r\nWhile it should be possible to implement this in a backwards compatible manner (such as keeping both hashes in the ABI encoding), I think that in the long term will be detrimental as the legacy code to be compatible with will not shrink as time progresses. I feel it is better to take a break earlier than later.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/4151/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/4151/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/389566047",
    "html_url": "https://github.com/ethereum/solidity/issues/4151#issuecomment-389566047",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4151",
    "id": 389566047,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTU2NjA0Nw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T15:41:23Z",
    "updated_at": "2018-05-16T15:41:23Z",
    "author_association": "MEMBER",
    "body": "As an alternative, the second hash could be provided in the calldata in addition to the first hash at a location that is usually not looked at by the dispatcher and decoder. One possible location would be after static data and another possible location would be at the end of the calldata.\r\n\r\nThis option might be problematic if people assume that the payload is `calladat[4:]`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/389566047/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/389566216",
    "html_url": "https://github.com/ethereum/solidity/issues/4151#issuecomment-389566216",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4151",
    "id": 389566216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTU2NjIxNg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T15:41:54Z",
    "updated_at": "2018-05-16T15:41:54Z",
    "author_association": "MEMBER",
    "body": "The advantage of the above alternative is that it is fully backwards compatible.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/389566216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/389566391",
    "html_url": "https://github.com/ethereum/solidity/issues/4151#issuecomment-389566391",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4151",
    "id": 389566391,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTU2NjM5MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T15:42:25Z",
    "updated_at": "2018-05-16T15:42:25Z",
    "author_association": "MEMBER",
    "body": "If we do a breaking change, we could also consider using a 32 byte hash of the function signature and thus eliminating the possibility for collisions.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/389566391/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/407126173",
    "html_url": "https://github.com/ethereum/solidity/issues/4151#issuecomment-407126173",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4151",
    "id": 407126173,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzEyNjE3Mw==",
    "user": {
      "login": "Arachnid",
      "id": 17865,
      "node_id": "MDQ6VXNlcjE3ODY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/17865?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Arachnid",
      "html_url": "https://github.com/Arachnid",
      "followers_url": "https://api.github.com/users/Arachnid/followers",
      "following_url": "https://api.github.com/users/Arachnid/following{/other_user}",
      "gists_url": "https://api.github.com/users/Arachnid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Arachnid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Arachnid/subscriptions",
      "organizations_url": "https://api.github.com/users/Arachnid/orgs",
      "repos_url": "https://api.github.com/users/Arachnid/repos",
      "events_url": "https://api.github.com/users/Arachnid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Arachnid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-23T16:52:52Z",
    "updated_at": "2018-07-23T16:52:52Z",
    "author_association": "MEMBER",
    "body": "What's the use-case here? Is calling something with the wrong ABI really a common issue? It seems odd to include things that can't affect function selection in the ABI hash.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/407126173/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/407128928",
    "html_url": "https://github.com/ethereum/solidity/issues/4151#issuecomment-407128928",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4151",
    "id": 407128928,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzEyODkyOA==",
    "user": {
      "login": "HarryR",
      "id": 303926,
      "node_id": "MDQ6VXNlcjMwMzkyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/303926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HarryR",
      "html_url": "https://github.com/HarryR",
      "followers_url": "https://api.github.com/users/HarryR/followers",
      "following_url": "https://api.github.com/users/HarryR/following{/other_user}",
      "gists_url": "https://api.github.com/users/HarryR/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HarryR/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HarryR/subscriptions",
      "organizations_url": "https://api.github.com/users/HarryR/orgs",
      "repos_url": "https://api.github.com/users/HarryR/repos",
      "events_url": "https://api.github.com/users/HarryR/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HarryR/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-23T17:01:04Z",
    "updated_at": "2018-07-23T17:01:04Z",
    "author_association": "NONE",
    "body": "Yes, this is an issue, see the recent debacle about dodgy ERC tokens which dont return anything from 'transferFrom' instead of a boolean value.\r\n\r\nIf you claim to be compliant with an ABI and the ABI says youll return a bool, but your function returns an int instead - where both the positive and failure code is interpreted as a boolean true, then your function has the same ABI selector but any caller following the standard will interpret both success and failure as a success... etc.\r\n\r\nIMO the return type should be part of the ABI, so asking for IsSuccess->int is different from IsSuccess->bytes32.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/407128928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
