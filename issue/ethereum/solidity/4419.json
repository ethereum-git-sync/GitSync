{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/4419",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/4419/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/4419/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/4419/events",
  "html_url": "https://github.com/ethereum/solidity/issues/4419",
  "id": 338164001,
  "node_id": "MDU6SXNzdWUzMzgxNjQwMDE=",
  "number": 4419,
  "title": "can not get value from complex struct ",
  "user": {
    "login": "Colonel86",
    "id": 11241911,
    "node_id": "MDQ6VXNlcjExMjQxOTEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/11241911?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Colonel86",
    "html_url": "https://github.com/Colonel86",
    "followers_url": "https://api.github.com/users/Colonel86/followers",
    "following_url": "https://api.github.com/users/Colonel86/following{/other_user}",
    "gists_url": "https://api.github.com/users/Colonel86/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Colonel86/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Colonel86/subscriptions",
    "organizations_url": "https://api.github.com/users/Colonel86/orgs",
    "repos_url": "https://api.github.com/users/Colonel86/repos",
    "events_url": "https://api.github.com/users/Colonel86/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Colonel86/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-07-04T07:42:44Z",
  "updated_at": "2018-07-15T03:41:42Z",
  "closed_at": "2018-07-15T03:41:42Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "```\r\ncontract Complex {\r\n    struct Data {\r\n        uint a;\r\n        bytes3 b;\r\n        mapping (uint => uint) map;\r\n    }\r\n    Data public tempData = Data({a:123,b:\"abc\"});\r\n    \r\n    mapping (uint => mapping(bool => Data[])) public data;\r\n    \r\n    function setData() public{\r\n        tempData.map[0] = 456;\r\n    }\r\n    \r\n    function getValue() public returns(uint){\r\n        return tempData.map[0];\r\n    }\r\n    \r\n    function setComplex() public {\r\n        data[0][false].push(tempData);\r\n    }\r\n    \r\n    function getData(uint arg1, bool arg2, uint arg3) public returns (uint a, bytes3 b, uint value,uint tempInt) {\r\n        // a = data[arg1][arg2][arg3].a;\r\n        // b = data[arg1][arg2][arg3].b;\r\n        Data mdata = data[arg1][arg2][arg3];\r\n        a = mdata.a;\r\n        b = mdata.b;\r\n        mapping (uint => uint) tempMap = mdata.map;\r\n        value = tempMap[0];\r\n        tempInt = mdata.map[0];\r\n    }\r\n}\r\n```\r\n\r\nIn remix ,Current version:0.4.24+commit.e67f0147.Emscripten.clang\r\nsetData()\r\ngetValue()\r\nsetComplex() \r\n\r\nbut call  getData(0, false, 0).\r\n```\r\n a = 123\r\nb  = 0x616263\r\nvalue  = 0\r\ntempInt = 0\r\n```\r\n\r\nwhy \"value\" and \"tempInt\" = 0\r\nLogically it should value = 456 and tempInt = 456\r\nWhat's the reason？\r\n\r\n",
  "closed_by": {
    "login": "Colonel86",
    "id": 11241911,
    "node_id": "MDQ6VXNlcjExMjQxOTEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/11241911?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Colonel86",
    "html_url": "https://github.com/Colonel86",
    "followers_url": "https://api.github.com/users/Colonel86/followers",
    "following_url": "https://api.github.com/users/Colonel86/following{/other_user}",
    "gists_url": "https://api.github.com/users/Colonel86/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Colonel86/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Colonel86/subscriptions",
    "organizations_url": "https://api.github.com/users/Colonel86/orgs",
    "repos_url": "https://api.github.com/users/Colonel86/repos",
    "events_url": "https://api.github.com/users/Colonel86/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Colonel86/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/4419/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/4419/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/402452804",
    "html_url": "https://github.com/ethereum/solidity/issues/4419#issuecomment-402452804",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4419",
    "id": 402452804,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjQ1MjgwNA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-04T11:36:19Z",
    "updated_at": "2018-07-04T11:36:19Z",
    "author_association": "MEMBER",
    "body": "I do not yet fully understand your code, but do you realize that `data[0][false].push(tempData);` pushes an independent copy of `tempData`?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/402452804/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/402452927",
    "html_url": "https://github.com/ethereum/solidity/issues/4419#issuecomment-402452927",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4419",
    "id": 402452927,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjQ1MjkyNw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-04T11:36:56Z",
    "updated_at": "2018-07-04T11:36:56Z",
    "author_association": "MEMBER",
    "body": "Ah right and this independent copy does not include the mapping type (because mappings cannot be copied), I think that is the problem.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/402452927/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/402453117",
    "html_url": "https://github.com/ethereum/solidity/issues/4419#issuecomment-402453117",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4419",
    "id": 402453117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjQ1MzExNw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-04T11:37:53Z",
    "updated_at": "2018-07-04T11:37:53Z",
    "author_association": "MEMBER",
    "body": "We are trying to improve the visibility of implicit copy operations: https://github.com/ethereum/solidity/issues/2435",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/402453117/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/402619290",
    "html_url": "https://github.com/ethereum/solidity/issues/4419#issuecomment-402619290",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4419",
    "id": 402619290,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjYxOTI5MA==",
    "user": {
      "login": "Colonel86",
      "id": 11241911,
      "node_id": "MDQ6VXNlcjExMjQxOTEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/11241911?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Colonel86",
      "html_url": "https://github.com/Colonel86",
      "followers_url": "https://api.github.com/users/Colonel86/followers",
      "following_url": "https://api.github.com/users/Colonel86/following{/other_user}",
      "gists_url": "https://api.github.com/users/Colonel86/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Colonel86/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Colonel86/subscriptions",
      "organizations_url": "https://api.github.com/users/Colonel86/orgs",
      "repos_url": "https://api.github.com/users/Colonel86/repos",
      "events_url": "https://api.github.com/users/Colonel86/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Colonel86/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-05T06:30:33Z",
    "updated_at": "2018-07-11T12:22:48Z",
    "author_association": "NONE",
    "body": "@chriseth Sorry, I didn't describe it clearly. It's causing trouble for you. I'm from China and my English is not very good。\r\nI reorganized the code\r\n\r\n```\r\npragma solidity ^0.4.24;\r\n\r\ncontract ComplexStruct {\r\n    struct Data {\r\n        uint a;\r\n        bytes3 b;\r\n        mapping (uint => uint) map;\r\n    }\r\n    \r\n    Data data;\r\n    mapping (uint => mapping(bool => Data[])) public dataMap;\r\n    \r\n    //123,\"0x424344\",0,456,0,false\r\n    function setDataMap(\r\n        uint _a, \r\n        bytes3 _b, \r\n        uint _mapKey, \r\n        uint _mapValue, \r\n        uint dataMapUintKey, \r\n        bool dataMapBoolKey\r\n        ) \r\n        public\r\n    {\r\n        data.a = _a;\r\n        data.b = _b;\r\n        data.map[_mapKey] = _mapValue;\r\n        dataMap[dataMapUintKey][dataMapBoolKey].push(data);\r\n    }\r\n    \r\n    //0,false,0\r\n    function getData(uint arg1, bool arg2, uint arg3) public view returns (uint a, bytes3 b, uint value, uint tempUint) {\r\n        a = dataMap[arg1][arg2][arg3].a;\r\n        b = dataMap[arg1][arg2][arg3].b;\r\n        value = dataMap[arg1][arg2][arg3].map[0];\r\n        \r\n        Data storage tempData = dataMap[arg1][arg2][arg3];\r\n        tempUint = tempData.map[0];\r\n    }\r\n}\r\n```\r\n\r\nI use the browser remix，The operation is as follows:\r\nsetDataMap(123,\"0x424344\",0,456,0,false) \r\ngetData(0,false,0)\r\nresult：\r\n0: uint256: a 23\r\n1: bytes3: b 0x424344\r\n2: uint256: value 0\r\n3: uint256: tempUint 0\r\n\r\nWhen I was in the getData() debugger，I can see that：\r\n`\r\ntempData: struct ComplexStruct.Data\r\n\r\na: 23 uint256\r\n\r\nb: 0x424344 bytes3\r\n\r\nmap: mapping(uint256 => uint256)\r\n0000000000000000000000000000000000000000000000000000000000000000: 456 uint256\r\n`\r\nBut why can't I get map[0]?\r\nyou say:\"mappings cannot be copied\", But it's not from above。\r\n\r\nI don't know how to get it from dataMap[0][false][0].map[0]\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/402619290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/404150796",
    "html_url": "https://github.com/ethereum/solidity/issues/4419#issuecomment-404150796",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4419",
    "id": 404150796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDE1MDc5Ng==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-11T12:26:33Z",
    "updated_at": "2018-07-11T12:26:33Z",
    "author_association": "MEMBER",
    "body": "You cannot use `tempData` or `data` like that. Only use `dataMap`. Especially, the effect of `data.map[_mapKey] = _mapValue;` will not be taken over for the `push`. You have to set it after the push using `dataMap[dataMapUintKey][dataMapBoolKey].length++; uint p = dataMap[dataMapUintKey][dataMapBoolKey].length - 1; dataMap[dataMapUintKey][dataMapBoolKey][p].map[_mapKey] = _mapValue;`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/404150796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/405024355",
    "html_url": "https://github.com/ethereum/solidity/issues/4419#issuecomment-405024355",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4419",
    "id": 405024355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTAyNDM1NQ==",
    "user": {
      "login": "Colonel86",
      "id": 11241911,
      "node_id": "MDQ6VXNlcjExMjQxOTEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/11241911?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Colonel86",
      "html_url": "https://github.com/Colonel86",
      "followers_url": "https://api.github.com/users/Colonel86/followers",
      "following_url": "https://api.github.com/users/Colonel86/following{/other_user}",
      "gists_url": "https://api.github.com/users/Colonel86/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Colonel86/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Colonel86/subscriptions",
      "organizations_url": "https://api.github.com/users/Colonel86/orgs",
      "repos_url": "https://api.github.com/users/Colonel86/repos",
      "events_url": "https://api.github.com/users/Colonel86/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Colonel86/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-14T13:38:28Z",
    "updated_at": "2018-07-14T13:38:28Z",
    "author_association": "NONE",
    "body": "@chriseth I did as you said. Thank you very much",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/405024355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
