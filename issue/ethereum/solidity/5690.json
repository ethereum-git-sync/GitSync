{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/5690",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/5690/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/5690/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/5690/events",
  "html_url": "https://github.com/ethereum/solidity/issues/5690",
  "id": 392532074,
  "node_id": "MDU6SXNzdWUzOTI1MzIwNzQ=",
  "number": 5690,
  "title": "[Feature Request] Compile Abstract Functions",
  "user": {
    "login": "maxsam4",
    "id": 7436022,
    "node_id": "MDQ6VXNlcjc0MzYwMjI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7436022?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/maxsam4",
    "html_url": "https://github.com/maxsam4",
    "followers_url": "https://api.github.com/users/maxsam4/followers",
    "following_url": "https://api.github.com/users/maxsam4/following{/other_user}",
    "gists_url": "https://api.github.com/users/maxsam4/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/maxsam4/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/maxsam4/subscriptions",
    "organizations_url": "https://api.github.com/users/maxsam4/orgs",
    "repos_url": "https://api.github.com/users/maxsam4/repos",
    "events_url": "https://api.github.com/users/maxsam4/events{/privacy}",
    "received_events_url": "https://api.github.com/users/maxsam4/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-12-19T10:21:58Z",
  "updated_at": "2022-08-17T13:48:48Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Abstract\r\nCurrently, Every function must have a body and a smart contract cannot be compiled with just function declarations. This means that the ABI generated will contain only explicitly defined functions. However, delegate proxy pattern through fallback function is now being widely used for upgradability and I only see it becoming more and more relevant.  \r\n\r\nAllowing abstract functions to compile will mean that there is no effect on the bytecode but the ABI generated will include that function. For the EVM, it will be no different but for the outside world, it will become more relevant.\r\n\r\n## Motivation\r\nABI is meant to help the outside world interact with the EVM. If 'custom' ABI was allowed to be generated from the official compiler, it will make it easier for front-end developers, tools like etherscan, normal end users etc to interact with the proxied smart contract.\r\n\r\nPerhaps add an optional compiler flag that allows compiling with abstract functions (maybe make it default)?\r\nOr maybe add an additional `extendedABI` element in the output JSON when that flag is enabled. In any case, the contracts should compile without an error.\r\n\r\n## Specification\r\nIf compiler flag `--allowAbstract` is provided, the compiler should compile the smart contract even if it has a function with only declaration and no definition. The output bytecode will be like that function wasn't declared. The output ABI, however, will contain those functions.\r\n\r\n## Backwards Compatibility\r\nNo issues.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/5690/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/5690/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448564930",
    "html_url": "https://github.com/ethereum/solidity/issues/5690#issuecomment-448564930",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5690",
    "id": 448564930,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODU2NDkzMA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-19T11:38:57Z",
    "updated_at": "2018-12-19T11:38:57Z",
    "author_association": "MEMBER",
    "body": "The compiler will already happily output the ABI JSON for abstract contracts. Is this what you request?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448564930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448568540",
    "html_url": "https://github.com/ethereum/solidity/issues/5690#issuecomment-448568540",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5690",
    "id": 448568540,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODU2ODU0MA==",
    "user": {
      "login": "maxsam4",
      "id": 7436022,
      "node_id": "MDQ6VXNlcjc0MzYwMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7436022?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maxsam4",
      "html_url": "https://github.com/maxsam4",
      "followers_url": "https://api.github.com/users/maxsam4/followers",
      "following_url": "https://api.github.com/users/maxsam4/following{/other_user}",
      "gists_url": "https://api.github.com/users/maxsam4/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maxsam4/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maxsam4/subscriptions",
      "organizations_url": "https://api.github.com/users/maxsam4/orgs",
      "repos_url": "https://api.github.com/users/maxsam4/repos",
      "events_url": "https://api.github.com/users/maxsam4/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maxsam4/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-19T11:54:25Z",
    "updated_at": "2018-12-19T11:54:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "> The compiler will already happily output the ABI JSON for abstract contracts. Is this what you request?\r\n\r\nBut they don't compile. I want the same contracts to compile also; as if the abstract functions in them don't exist. \r\n\r\nThis way the same contract code will be able to be used for deployment and usage, and abstract ABI generation.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448568540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448568820",
    "html_url": "https://github.com/ethereum/solidity/issues/5690#issuecomment-448568820",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5690",
    "id": 448568820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODU2ODgyMA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-19T11:55:26Z",
    "updated_at": "2018-12-19T11:55:26Z",
    "author_association": "MEMBER",
    "body": "What exactly do you mean by \"compile\"? Which output would you like to get?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448568820/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448570117",
    "html_url": "https://github.com/ethereum/solidity/issues/5690#issuecomment-448570117",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5690",
    "id": 448570117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODU3MDExNw==",
    "user": {
      "login": "maxsam4",
      "id": 7436022,
      "node_id": "MDQ6VXNlcjc0MzYwMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7436022?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maxsam4",
      "html_url": "https://github.com/maxsam4",
      "followers_url": "https://api.github.com/users/maxsam4/followers",
      "following_url": "https://api.github.com/users/maxsam4/following{/other_user}",
      "gists_url": "https://api.github.com/users/maxsam4/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maxsam4/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maxsam4/subscriptions",
      "organizations_url": "https://api.github.com/users/maxsam4/orgs",
      "repos_url": "https://api.github.com/users/maxsam4/repos",
      "events_url": "https://api.github.com/users/maxsam4/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maxsam4/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-19T12:00:24Z",
    "updated_at": "2018-12-19T12:00:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Assume a contract is\r\n```\r\npragma solidity ^0.5.0;\r\n\r\ncontract HelloWorld {\r\n    function hello() public;\r\n    function world() public returns(uint256) {\r\n        return 1337;\r\n    }\r\n    function() external {\r\n        //delegate proxy logic\r\n    }\r\n} \r\n```\r\nIt should be compiled to bytecode as if the code was\r\n\r\n```\r\npragma solidity ^0.5.0;\r\n\r\ncontract HelloWorld {\r\n    //no function without definition\r\n    function world() public returns(uint256) {\r\n        return 1337;\r\n    }\r\n    function() external {\r\n        //delegate proxy logic\r\n    }\r\n} \r\n```\r\nThe ABI, however, should contain mention of `hello()`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448570117/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448570714",
    "html_url": "https://github.com/ethereum/solidity/issues/5690#issuecomment-448570714",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5690",
    "id": 448570714,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODU3MDcxNA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-19T12:02:57Z",
    "updated_at": "2018-12-19T12:02:57Z",
    "author_association": "MEMBER",
    "body": "I don't think how this should be possible in general - what do you do if you have a call to `hello()` inside `world`? Also, could you please again explain the use-case? What do you plan to do with the bytecode?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448570714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448572669",
    "html_url": "https://github.com/ethereum/solidity/issues/5690#issuecomment-448572669",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5690",
    "id": 448572669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODU3MjY2OQ==",
    "user": {
      "login": "maxsam4",
      "id": 7436022,
      "node_id": "MDQ6VXNlcjc0MzYwMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7436022?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maxsam4",
      "html_url": "https://github.com/maxsam4",
      "followers_url": "https://api.github.com/users/maxsam4/followers",
      "following_url": "https://api.github.com/users/maxsam4/following{/other_user}",
      "gists_url": "https://api.github.com/users/maxsam4/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maxsam4/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maxsam4/subscriptions",
      "organizations_url": "https://api.github.com/users/maxsam4/orgs",
      "repos_url": "https://api.github.com/users/maxsam4/repos",
      "events_url": "https://api.github.com/users/maxsam4/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maxsam4/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-19T12:11:02Z",
    "updated_at": "2018-12-19T12:13:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I don't think how this should be possible in general - what do you do if you have a call to `hello()` inside `world`? \r\n\r\nThat should not compile. For bytecode generation, the source code will be like no function without definition was ever declared. It can be removed in pre-processing.\r\n\r\nThe main usecase is when fallback function of a proxy contract is kind of used as a dispatcher that calls other smart contracts that contain actual logic/function with delegate calls. For the end user, it's like the proxy contract has all these functions but actually the proxy contract only stores the state but delegates all logic to a different contract(s). This allows for upgradability, infinite contract size at a single address etc.\r\n\r\nMost widely used implementation of this is probably https://github.com/zeppelinos/zos/blob/master/packages/lib/contracts/upgradeability/Proxy.sol\r\n\r\nI wrote an article discussing this approach among others a few months back https://hackernoon.com/how-to-make-smart-contracts-upgradable-2612e771d5a2\r\n(see Upgradable Storage Proxy Contracts section specifically)\r\n\r\nIf the requested feature is enabled, we'll be able to make the proxy contract's ABI contain the functions that it actually does (via delegate calls). As the bytecode won't change even if we add/remove function declarations, we'll be able to 'upgrade' these proxies as we add/remove new logic.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/448572669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
