{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/6498",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/6498/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/6498/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/6498/events",
  "html_url": "https://github.com/ethereum/solidity/issues/6498",
  "id": 431147842,
  "node_id": "MDU6SXNzdWU0MzExNDc4NDI=",
  "number": 6498,
  "title": "overloading for implicitly convertible types",
  "user": {
    "login": "ekpyron",
    "id": 1347491,
    "node_id": "MDQ6VXNlcjEzNDc0OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ekpyron",
    "html_url": "https://github.com/ekpyron",
    "followers_url": "https://api.github.com/users/ekpyron/followers",
    "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
    "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
    "organizations_url": "https://api.github.com/users/ekpyron/orgs",
    "repos_url": "https://api.github.com/users/ekpyron/repos",
    "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ekpyron/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-04-09T19:17:51Z",
  "updated_at": "2022-08-17T13:49:48Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Might overlap with the inheritance rework for 0.6.0.\r\n\r\n@nventuro requested that we allow overloading for implicitly convertible type - either generally or only if the type matches *exactly*. I'm opening this issue to discuss pro's and con's.\r\n\r\nCurrent status:\r\n```\r\nfunction f(uint16) { ... }\r\nfunction f(uint256) { ... }\r\nfunction g() {\r\n  f(0); f(1); f(255); // (1) invalid, ambiguous\r\n  f(256); f(65535); // (2) invalid, ambiguous\r\n  f(65536); // (3) valid, since only convertible to uint256, not to uint16\r\n  f(2^200); // (4) valid\r\n}\r\n```\r\n\r\nWe could allow both the calls (1) and (2) or only (2) to choose ``f(uint16)`` without error. We could *disallow* (3) since it needs an implicit conversion in the presence of overloading.\r\nWe could also disallow *any* of them without explicitly casting the literal to the matching type (e.g. require an explicit cast from RationalNumberType to the matching IntegerType). If we go that way at all, I'd be in favor of this last option.\r\n\r\nTechnically, this would mean the following during overload resolution:\r\n - Collect all functions, s.t. *either* the supplied arguments can be implicitly converted to the parameter type *or* the parameter type can be implicitly converted to the type of the supplied argument. ***\r\n - If there is a unique such function, choose it.\r\n - Check whether one of the functions list matches the argument types *exactly* (i.e. without even an implicit conversion). If there is such a function, choose it.\r\n - Otherwise fail.\r\n\r\nThis would mean that in the example above (1)-(4) would all need explicit casts to the respective ``uintXX`` type (since literals are of ``RationalNumberType``, not ``uintXX`` type). This I would actually see as an advantage. Further we would have the following:\r\n```\r\nfunction h(uint8 a, uint16 b, uint32 c, uint256 d) {\r\n f(a); // (5) fail (currently fails)\r\n f(b); // (6) works (currently fails)\r\n f(c); // (7) fail (Note that this currently works!)\r\n f(d); // (8) works (currently works)\r\n}\r\n```\r\n\r\n*** We need to consider implicit conversions in both directions to catch case ``7``. One might argue that ``7`` is just fine, but if one wants to prevent it, then we need to check whether checking implicit conversions in both directions prevents overload resolution in cases where it worked before and should continue to work.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/6498/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/6498/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/483249771",
    "html_url": "https://github.com/ethereum/solidity/issues/6498#issuecomment-483249771",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6498",
    "id": 483249771,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzI0OTc3MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-15T13:24:19Z",
    "updated_at": "2019-04-15T13:24:19Z",
    "author_association": "MEMBER",
    "body": "Relates to https://github.com/ethereum/solidity/issues/1256",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/483249771/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/483250212",
    "html_url": "https://github.com/ethereum/solidity/issues/6498#issuecomment-483250212",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6498",
    "id": 483250212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzI1MDIxMg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-15T13:25:33Z",
    "updated_at": "2019-04-15T13:25:33Z",
    "author_association": "MEMBER",
    "body": "I think it would be best to disallow any overload resolution if the type does not match exactly.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/483250212/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/483334438",
    "html_url": "https://github.com/ethereum/solidity/issues/6498#issuecomment-483334438",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6498",
    "id": 483334438,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzMzNDQzOA==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-15T16:58:44Z",
    "updated_at": "2019-04-15T16:58:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chriseth so all calls to an overloaded function would require explicit casts, even if an implicit one is available?\r\n\r\nGiven\r\n```\r\nfunction f(uint8); // 1\r\nfunction f(uint256); // 2\r\n\r\nfunction g(uint16); // 3\r\nfunction g(uint256); // 4\r\n\r\nuint8 x;\r\n```\r\n\r\n`f(x)` calls 1, `f(uin256(x))` calls 2, `g(x)` fails, and both `g(uin16(x))` and `g(uin256(x))` call 3 and 4 respectively?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/483334438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/483997909",
    "html_url": "https://github.com/ethereum/solidity/issues/6498#issuecomment-483997909",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6498",
    "id": 483997909,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Mzk5NzkwOQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-17T08:54:45Z",
    "updated_at": "2019-04-17T08:54:45Z",
    "author_association": "MEMBER",
    "body": "@nventuro yes, that's what I mean.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/483997909/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/484161999",
    "html_url": "https://github.com/ethereum/solidity/issues/6498#issuecomment-484161999",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6498",
    "id": 484161999,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDE2MTk5OQ==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-17T16:23:57Z",
    "updated_at": "2019-04-17T16:23:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think we should be careful with forcing people to do these casts. It is very easy to do a downcast without realizing, and there is no warning if this could result in overflow.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/484161999/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/484180340",
    "html_url": "https://github.com/ethereum/solidity/issues/6498#issuecomment-484180340",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6498",
    "id": 484180340,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDE4MDM0MA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-17T17:12:42Z",
    "updated_at": "2019-04-17T17:12:42Z",
    "author_association": "MEMBER",
    "body": "Indeed, I'm also worried about that. One way around this is as follows:\r\n```\r\nuint16 x = <something that implicitly converts to uint16>;\r\nf(x);\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/484180340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
