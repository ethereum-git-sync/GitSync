{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/6827/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/6827/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/6827/events",
  "html_url": "https://github.com/ethereum/solidity/issues/6827",
  "id": 447647895,
  "node_id": "MDU6SXNzdWU0NDc2NDc4OTU=",
  "number": 6827,
  "title": "[yul] Should statements that affect the value returned by a subsequent call to `msize()` be removed even if they are redundant?",
  "user": {
    "login": "bshastry",
    "id": 2388185,
    "node_id": "MDQ6VXNlcjIzODgxODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bshastry",
    "html_url": "https://github.com/bshastry",
    "followers_url": "https://api.github.com/users/bshastry/followers",
    "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
    "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
    "organizations_url": "https://api.github.com/users/bshastry/orgs",
    "repos_url": "https://api.github.com/users/bshastry/repos",
    "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bshastry/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2019-05-23T12:58:17Z",
  "updated_at": "2019-05-28T13:40:20Z",
  "closed_at": "2019-05-28T13:40:20Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Main task here still to do:\r\n - document in description of optimizer and in changelog\r\n\r\n----\r\n\r\n## Description\r\n\r\n(Found by libfuzzer+LPM)\r\n\r\n```\r\n{\r\nlet x,y\r\n// After the computation of keccak256, the largest accessed memory index becomes 32 (0x20)\r\ny := keccak256(1,1)\r\n// msize() == 32\r\n// Stores 32 at location 0\r\nmstore(x, msize())\r\n}\r\n```\r\n\r\nHowever, since `y` is unused it is removed by the optimizer. This means that the retained `mstore` now stores a zero (because `msize()` is zero).\r\n\r\nTraces\r\n\r\n```\r\nUnoptimized trace\r\nTrace:\r\nMemory dump:\r\n    20: 0000000000000000000000000000000000000000000000000000000000000020\r\nStorage dump:\r\n\r\nOptimized trace:\r\nMemory dump:\r\nStorage dump:\r\n```\r\n\r\n\r\n## Environment\r\n\r\n- Compiler version: latest develop",
  "closed_by": {
    "login": "leonardoalt",
    "id": 504195,
    "node_id": "MDQ6VXNlcjUwNDE5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leonardoalt",
    "html_url": "https://github.com/leonardoalt",
    "followers_url": "https://api.github.com/users/leonardoalt/followers",
    "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
    "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
    "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
    "repos_url": "https://api.github.com/users/leonardoalt/repos",
    "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/6827/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/6827/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495210665",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495210665",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495210665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTIxMDY2NQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-23T13:07:47Z",
    "updated_at": "2019-05-23T13:07:47Z",
    "author_association": "MEMBER",
    "body": "The old optimizer only removes `mload` and `keccak256` calls if the program does not contain the `msize` instruction. Maybe we should do the same here?\r\n\r\nOn the other hand, do people really rely on the result of `msize()` having a certain value instead of just the fact that `msize()` returns a pointer to prior unused memory? You can of course do something like\r\n\r\n```\r\npop(mload(add(msize(), 20)))\r\n```\r\nand assume that this \"allocates\" 20 bytes, but I would argue that it exploits a quite peculiar feature of the EVM.\r\n\r\nI mean we also do not guarantee that the value returned by `gas()` and `pc()` remains unchanged by the optimizer.\r\n\r\nIs it enough to document this?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495210665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495210761",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495210761",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495210761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTIxMDc2MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-23T13:08:04Z",
    "updated_at": "2019-05-23T13:08:04Z",
    "author_association": "MEMBER",
    "body": "Note that this will affect inline assembly, too!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495210761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495211593",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495211593",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495211593,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTIxMTU5Mw==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-23T13:10:29Z",
    "updated_at": "2019-05-23T13:10:36Z",
    "author_association": "MEMBER",
    "body": "I would discourage that usage and optimize the statements away. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495211593/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495213296",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495213296",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495213296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTIxMzI5Ng==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-23T13:15:17Z",
    "updated_at": "2019-05-23T13:15:17Z",
    "author_association": "MEMBER",
    "body": "The only real effect I can imagine is memory expansion cost would happen at a different part of the code and may cause revert at a different place (in case of out of gas), but that should have no effect on anything.\r\n\r\nIf we could somehow phase out the use of `gasleft` that would also reduce the number of contracts which depend on specific gas values.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495213296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495214524",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495214524",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495214524,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTIxNDUyNA==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-23T13:18:48Z",
    "updated_at": "2019-05-23T13:20:26Z",
    "author_association": "MEMBER",
    "body": "I think it is a good idea to document this and retain the current behavior (optimizing statements).\r\n\r\nHowever, we need to think of a way to not trip the fuzzer if we decide to retain current behavior :-)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495214524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495215037",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495215037",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495215037,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTIxNTAzNw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-23T13:20:12Z",
    "updated_at": "2019-05-23T13:20:12Z",
    "author_association": "MEMBER",
    "body": "The reason we added it to the optimise was that LLL relied on this behaviour. Perhaps we cannot change `libevmasm` because of that before we remove LLL.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495215037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495216664",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495216664",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495216664,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTIxNjY2NA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-23T13:24:28Z",
    "updated_at": "2019-05-23T13:24:28Z",
    "author_association": "MEMBER",
    "body": "Ah right, it was because of LLL! Note that this is only about the yul optimizer.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495216664/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495236178",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495236178",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495236178,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTIzNjE3OA==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-23T14:12:44Z",
    "updated_at": "2019-05-23T14:13:38Z",
    "author_association": "MEMBER",
    "body": "This issue does not reproduce on `0.5.8` so I would assume the \"bug\" is in unreleased Solidity.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495236178/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495265850",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495265850",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495265850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTI2NTg1MA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-23T15:24:15Z",
    "updated_at": "2019-05-23T15:24:15Z",
    "author_association": "MEMBER",
    "body": "@bshastry yes, it is caused by the same thing that forced us to remove several log statements.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495265850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495266061",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495266061",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495266061,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTI2NjA2MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-23T15:24:43Z",
    "updated_at": "2019-05-23T15:24:43Z",
    "author_association": "MEMBER",
    "body": "Main task here still to do:\r\n - document in description of optimizer and in changelog",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495266061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495525610",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495525610",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495525610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTUyNTYxMA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-24T08:42:19Z",
    "updated_at": "2019-05-24T08:42:19Z",
    "author_association": "MEMBER",
    "body": "We should maybe evaluate whether it is possible to have a behaviour like the old optimizer: Only optimize memory reads if there is no msize in the code. It is a little tricky with Solidity because yul code is usually optimized in isolation. We have multiple stages, though: During analysis, we can check for any msize instruction in the code and then not optimize memory if the user-supplied code has msize.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495525610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495570535",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495570535",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495570535,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTU3MDUzNQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-24T10:47:26Z",
    "updated_at": "2019-05-24T10:47:26Z",
    "author_association": "MEMBER",
    "body": "An implementation of this would be:\r\n - create an AST walker that collects uses of `msize` (as builtin function call, and as functionalinstruction)\r\n   This walker could later be re-used to check if a certain function has certain opcodes and which functions it calls -> #5608 \r\n - split the property `sideEffectFree` into `sideEffectFree` and `sideEffectFreeUpToMSize`\r\n - update the UnusedPruner to take a parameter that says if it can optimize ignoring msize.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495570535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495575625",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-495575625",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 495575625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTU3NTYyNQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-24T11:02:24Z",
    "updated_at": "2019-05-24T11:02:24Z",
    "author_association": "MEMBER",
    "body": "Ok, the above is a bit more complicated for solidity actually since we need to check all inline assembly blocks in all contracts and all libraries that have inline functions.\r\n\r\nMaybe it would be better to just make that a yul optimizer setting and add an assertion that is triggered if the setting is active and the msize instruction is used.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/495575625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/496144413",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-496144413",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 496144413,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjE0NDQxMw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-27T09:20:46Z",
    "updated_at": "2019-05-27T09:20:46Z",
    "author_association": "MEMBER",
    "body": "Solidity inline assembly:\r\n - provide optimizer settings to the type checker\r\n - report an error if yul optimization is activated and inline assembly uses `msize`.\r\n\r\nYul optimizer:\r\n - as outlined in the [above comment](https://github.com/ethereum/solidity/issues/6827#issuecomment-495570535)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/496144413/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/496520861",
    "html_url": "https://github.com/ethereum/solidity/issues/6827#issuecomment-496520861",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6827",
    "id": 496520861,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjUyMDg2MQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-28T13:40:20Z",
    "updated_at": "2019-05-28T13:40:20Z",
    "author_association": "MEMBER",
    "body": "Closed by #6840 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/496520861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
