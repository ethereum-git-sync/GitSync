{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/9086",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/9086/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/9086/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/9086/events",
  "html_url": "https://github.com/ethereum/solidity/issues/9086",
  "id": 628877461,
  "node_id": "MDU6SXNzdWU2Mjg4Nzc0NjE=",
  "number": 9086,
  "title": "Add option to automatically add revert reason strings when omitted from require.",
  "user": {
    "login": "MicahZoltu",
    "id": 886059,
    "node_id": "MDQ6VXNlcjg4NjA1OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/886059?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MicahZoltu",
    "html_url": "https://github.com/MicahZoltu",
    "followers_url": "https://api.github.com/users/MicahZoltu/followers",
    "following_url": "https://api.github.com/users/MicahZoltu/following{/other_user}",
    "gists_url": "https://api.github.com/users/MicahZoltu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MicahZoltu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MicahZoltu/subscriptions",
    "organizations_url": "https://api.github.com/users/MicahZoltu/orgs",
    "repos_url": "https://api.github.com/users/MicahZoltu/repos",
    "events_url": "https://api.github.com/users/MicahZoltu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MicahZoltu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4438006499,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaa4w",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20effort",
      "name": "low effort",
      "color": "ffb1fa",
      "default": false,
      "description": "There is not much implementation work to be done. The task is very easy or tiny."
    },
    {
      "id": 4438157609,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjpKQ",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20impact",
      "name": "low impact",
      "color": "5d71ff",
      "default": false,
      "description": "Changes are not very noticeable or potential benefits are limited."
    },
    {
      "id": 4525128519,
      "node_id": "LA_kwDOAm_5kc8AAAABDbf7Rw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/needs%20design",
      "name": "needs design",
      "color": "18F737",
      "default": false,
      "description": "The proposal is too vague to be implemented right away"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-06-02T03:45:31Z",
  "updated_at": "2022-09-26T19:02:35Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Abstract\r\nWhen a user includes a `require(variable < 5)` without providing a reason string, the compiler will automatically add a reason string that gives a hint to anyone debugging where the error may be.  One option would be to just use the conditional text (`\"variable < 5\"` in the example above) and another would be to include file/contract/line number.\r\n\r\nThis was originally proposed in https://github.com/ethereum/solidity/issues/7260#issuecomment-531168669 but the original issue got fixed and it appears this request was lost when that issue was closed.\r\n\r\n## Motivation\r\nDebugging Solidity contracts is incredibly difficult at the moment compared to other modern languages due to the lack of a good integrated debugger.  Even when an integrated debugger is available, this provides no help with runtime failures which currently do not include a stack trace (`parity_trace` *kinda* helps but it doesn't show you where in a function you were when the failure occurred).\r\n\r\nIf information was available at runtime as to *where* the failure occurred then debugging *why* the failure occurred would be much easier because it would greatly narrow the search space for the bug.  While the user can go through and manually add reason strings to all require statements, it is often just the author manually duplicating the contents of the condition or noting a file/contract/function/counter.  This manual labor could be done by the compiler instead.\r\n\r\n## Specification\r\n```\r\n// fruit.sol\r\ncontract Apple {\r\n    function banana() public pure {\r\n        require(condition);\r\n    }\r\n}\r\n```\r\nThe generated reason string for the above would be `fruit.sol:Apple:banana:1`\r\n\r\nI'm interested in hearing opinions from others on what the automated reason should include.  Anything that assists in locating the failing require would work.  Copying the condition has the problem of potentially being ambiguous and potentially being very long, which is why I have gone with file/contract/function/line above.  Needs spec on how to handle requires in modifiers, presumably something like `file/contract/modifier/line`?\r\n\r\n## Backwards Compatibility\r\nNo issues.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/9086/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/9086/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/637253551",
    "html_url": "https://github.com/ethereum/solidity/issues/9086#issuecomment-637253551",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9086",
    "id": 637253551,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNzI1MzU1MQ==",
    "user": {
      "login": "MicahZoltu",
      "id": 886059,
      "node_id": "MDQ6VXNlcjg4NjA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MicahZoltu",
      "html_url": "https://github.com/MicahZoltu",
      "followers_url": "https://api.github.com/users/MicahZoltu/followers",
      "following_url": "https://api.github.com/users/MicahZoltu/following{/other_user}",
      "gists_url": "https://api.github.com/users/MicahZoltu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MicahZoltu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MicahZoltu/subscriptions",
      "organizations_url": "https://api.github.com/users/MicahZoltu/orgs",
      "repos_url": "https://api.github.com/users/MicahZoltu/repos",
      "events_url": "https://api.github.com/users/MicahZoltu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MicahZoltu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-02T03:46:20Z",
    "updated_at": "2020-06-02T03:46:20Z",
    "author_association": "MEMBER",
    "body": "Using the proposed syntax, how would function overloads be differentiated?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/637253551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/637627891",
    "html_url": "https://github.com/ethereum/solidity/issues/9086#issuecomment-637627891",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9086",
    "id": 637627891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNzYyNzg5MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-02T15:34:22Z",
    "updated_at": "2020-06-02T15:34:22Z",
    "author_association": "MEMBER",
    "body": "Thank you for re-suggesting this, I did not mean to exclude it from the scope of the original issue!\r\n\r\nAbout the reason string: Note that file names (including path) can be rather long. Also - shouldn't it include the failing expression prominently: `fruit.sol:1 - \"condition\"`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/637627891/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/637897520",
    "html_url": "https://github.com/ethereum/solidity/issues/9086#issuecomment-637897520",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9086",
    "id": 637897520,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNzg5NzUyMA==",
    "user": {
      "login": "MicahZoltu",
      "id": 886059,
      "node_id": "MDQ6VXNlcjg4NjA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MicahZoltu",
      "html_url": "https://github.com/MicahZoltu",
      "followers_url": "https://api.github.com/users/MicahZoltu/followers",
      "following_url": "https://api.github.com/users/MicahZoltu/following{/other_user}",
      "gists_url": "https://api.github.com/users/MicahZoltu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MicahZoltu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MicahZoltu/subscriptions",
      "organizations_url": "https://api.github.com/users/MicahZoltu/orgs",
      "repos_url": "https://api.github.com/users/MicahZoltu/repos",
      "events_url": "https://api.github.com/users/MicahZoltu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MicahZoltu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-03T01:18:46Z",
    "updated_at": "2020-06-03T01:18:46Z",
    "author_association": "MEMBER",
    "body": "I'm not opposed to including the failing expression, I only left it out of the specification because previously there arguments about the reason string becoming unbearably long.  For example if you have a require statement like:\r\n```ts\r\nrequire(apple != 0x123456789123456789123456789123456789 && banana != 0x123456789123456789123456789123456789 || cherry != 0xbaadf00dbaadf00dbaadf00dbaadf00dbaadf00dbaadf00dbaadf00dbaadf00d)\r\n```\r\nYou are right though, global names (file names) can become quite long as well since they sometimes will be full paths or relative paths.  I'm not personally opposed to long reason strings, it just increases deployment gas costs which I don't really care about, and you can always disable the auto-reason strings or you can add reason strings in manually (like you probably should be doing anyway).\r\n\r\nThe big win for this change for me personally is when I'm using a library written by someone else who decided not to use reason strings, I don't have to fork their code just to make my code debuggable.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/637897520/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
