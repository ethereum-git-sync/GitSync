{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/9592",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/9592/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/9592/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/9592/events",
  "html_url": "https://github.com/ethereum/solidity/issues/9592",
  "id": 675031067,
  "node_id": "MDU6SXNzdWU2NzUwMzEwNjc=",
  "number": 9592,
  "title": "try / catch does not work with custom call to external addresses and passing the calldata",
  "user": {
    "login": "adridadou",
    "id": 381065,
    "node_id": "MDQ6VXNlcjM4MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/381065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adridadou",
    "html_url": "https://github.com/adridadou",
    "followers_url": "https://api.github.com/users/adridadou/followers",
    "following_url": "https://api.github.com/users/adridadou/following{/other_user}",
    "gists_url": "https://api.github.com/users/adridadou/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adridadou/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adridadou/subscriptions",
    "organizations_url": "https://api.github.com/users/adridadou/orgs",
    "repos_url": "https://api.github.com/users/adridadou/repos",
    "events_url": "https://api.github.com/users/adridadou/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adridadou/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 275027668,
      "node_id": "MDU6TGFiZWwyNzUwMjc2Njg=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/documentation%20:book:",
      "name": "documentation :book:",
      "color": "006b75",
      "default": false,
      "description": ""
    },
    {
      "id": 4438006499,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaa4w",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20effort",
      "name": "low effort",
      "color": "ffb1fa",
      "default": false,
      "description": "There is not much implementation work to be done. The task is very easy or tiny."
    },
    {
      "id": 4438157609,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjpKQ",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20impact",
      "name": "low impact",
      "color": "5d71ff",
      "default": false,
      "description": "Changes are not very noticeable or potential benefits are limited."
    },
    {
      "id": 4438490842,
      "node_id": "LA_kwDOAm_5kc8AAAABCI3-2g",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20have",
      "name": "should have",
      "color": "ffbe6c",
      "default": false,
      "description": "We like the idea but itâ€™s not important enough to be a part of the roadmap."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-08-07T13:52:31Z",
  "updated_at": "2022-09-26T23:36:43Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--## Prerequisites\r\n\r\n- First, many thanks for taking part in the community. We really appreciate that.\r\n- We realize there is a lot of information requested here. We ask only that you do your best to provide as much information as possible so we can better help you.\r\n- Support questions are better asked in one of the following locations:\r\n\t- [Solidity chat](https://gitter.im/ethereum/solidity)\r\n\t- [Stack Overflow](https://ethereum.stackexchange.com/)\r\n- Ensure the issue isn't already reported.\r\n- The issue should be reproducible with the latest solidity version; however, this isn't a hard requirement and being reproducible with an older version is sufficient.\r\n-->\r\n\r\n## Description\r\n\r\n<!--Please shortly describe the bug you have found, and what you expect instead.-->\r\nI'm trying to use the new try / catch feature but it seems that it doesn't recognise address.call to be an external call\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.7.0\r\n- Target EVM version (as per compiler settings): default\r\n- Framework/IDE (e.g. Truffle or Remix): Truffle and Remix\r\n- EVM execution environment / backend / blockchain client: it's a compilation issue so not relevant\r\n- Operating system: OSX\r\n\r\n## Steps to Reproduce\r\n\r\ntry to compile : \r\n```\r\npragma solidity ^0.7.0;\r\n\r\n\r\ncontract TryCatchIssue {\r\n    address payable externalAddress;\r\n    constructor(address payable addr) {\r\n        externalAddress = addr;\r\n    }\r\n    \r\n    \r\n    function callme(bytes calldata data) external {\r\n        try externalAddress.call{value: 100}(data) {\r\n            \r\n        } catch (string memory reason) {\r\n            revert(reason);\r\n        } catch (bytes memory reason) {\r\n            revert();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI'm expecting to use try / catch but instead I get the error message:\r\n`Try can only be used with external function calls and contract creation calls.`\r\n\r\n<!--\r\nPlease provide a *minimal* source code example to trigger the bug you have found.\r\nPlease also mention any command line flags that are necessary for triggering the bug.\r\nProvide as much information as necessary to reproduce the bug.\r\n\r\n```solidity\r\n// Some *minimal* Solidity source code to reproduce the bug.\r\n// ...\r\n```\r\n-->\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/9592/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/9592/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671363663",
    "html_url": "https://github.com/ethereum/solidity/issues/9592#issuecomment-671363663",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9592",
    "id": 671363663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTM2MzY2Mw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-10T13:46:02Z",
    "updated_at": "2020-08-10T13:46:21Z",
    "author_association": "MEMBER",
    "body": "I don't remember what was the main requirement, but either we should support `.call`/`.delegatecall`/`.staticall` or report a better error.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671363663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671365858",
    "html_url": "https://github.com/ethereum/solidity/issues/9592#issuecomment-671365858",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9592",
    "id": 671365858,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTM2NTg1OA==",
    "user": {
      "login": "adridadou",
      "id": 381065,
      "node_id": "MDQ6VXNlcjM4MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/381065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adridadou",
      "html_url": "https://github.com/adridadou",
      "followers_url": "https://api.github.com/users/adridadou/followers",
      "following_url": "https://api.github.com/users/adridadou/following{/other_user}",
      "gists_url": "https://api.github.com/users/adridadou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adridadou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adridadou/subscriptions",
      "organizations_url": "https://api.github.com/users/adridadou/orgs",
      "repos_url": "https://api.github.com/users/adridadou/repos",
      "events_url": "https://api.github.com/users/adridadou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adridadou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-10T13:50:04Z",
    "updated_at": "2020-08-10T13:50:04Z",
    "author_association": "NONE",
    "body": "yes exactly. I'm trying to retrieve the reason for an error and I have no way if you use .call (or similar calls)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671365858/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671374867",
    "html_url": "https://github.com/ethereum/solidity/issues/9592#issuecomment-671374867",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9592",
    "id": 671374867,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTM3NDg2Nw==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-10T14:04:41Z",
    "updated_at": "2020-08-10T14:05:02Z",
    "author_association": "MEMBER",
    "body": "Low-level calls return a tuple ``(bool, bytes memory)`` - the ``bool`` indicating, if the call failed, the ``bytes memory`` containing the error message as an ABI-encoded call to a function with signature ``Error(string)``. So with low-level calls you are supposed to manually decode the message.\r\nThe ``bytes memory`` part will consist of the 4-byte signature of ``Error(string)`` followed by a pointer to the string, which in turn consists of a length and the padded string data.\r\nSo for ``revert(\"abc\");`` you can expect the ``bytes memory`` to contain the following:\r\n```\r\n0x08c379a0 -- first 4 bytes of the keccak256 hash of \"Error(String)\"\r\n0x0000000000000000000000000000000000000000000000000000000000000020 -- relative offset of the string argument\r\n0x0000000000000000000000000000000000000000000000000000000000000003 -- length of the string\r\n0x6162630000000000000000000000000000000000000000000000000000000000 -- padded string \"abc\"\r\n```\r\n\r\nPossibly, we will have a ``try...catch``-like mechanism for low-level calls in the future - or will at least make it easier to decode the error message using ``abi.decode`` with memory array slices. But currently decoding this will involve some manual effort.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671374867/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671402708",
    "html_url": "https://github.com/ethereum/solidity/issues/9592#issuecomment-671402708",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9592",
    "id": 671402708,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTQwMjcwOA==",
    "user": {
      "login": "adridadou",
      "id": 381065,
      "node_id": "MDQ6VXNlcjM4MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/381065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adridadou",
      "html_url": "https://github.com/adridadou",
      "followers_url": "https://api.github.com/users/adridadou/followers",
      "following_url": "https://api.github.com/users/adridadou/following{/other_user}",
      "gists_url": "https://api.github.com/users/adridadou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adridadou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adridadou/subscriptions",
      "organizations_url": "https://api.github.com/users/adridadou/orgs",
      "repos_url": "https://api.github.com/users/adridadou/repos",
      "events_url": "https://api.github.com/users/adridadou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adridadou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-10T14:51:00Z",
    "updated_at": "2020-08-10T14:51:00Z",
    "author_association": "NONE",
    "body": "ooh that's great news ! Ok I will be using that then.\r\nI would add this to the documentation. In the documentation there is nothing related to the error case and what is returned.\r\n\r\nLooking at the return value, it would be nice if there was a way in solidity to handle that without splitting the bytes array\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671402708/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671494995",
    "html_url": "https://github.com/ethereum/solidity/issues/9592#issuecomment-671494995",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9592",
    "id": 671494995,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTQ5NDk5NQ==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-10T17:45:52Z",
    "updated_at": "2020-08-10T17:45:52Z",
    "author_association": "MEMBER",
    "body": "We'll keep this open for looking into improving the documentation about this.\r\nAnd hopefully in the future we'll have some mechanisms that makes this easier than having to deal with the raw bytes data.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671494995/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671992775",
    "html_url": "https://github.com/ethereum/solidity/issues/9592#issuecomment-671992775",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9592",
    "id": 671992775,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTk5Mjc3NQ==",
    "user": {
      "login": "adridadou",
      "id": 381065,
      "node_id": "MDQ6VXNlcjM4MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/381065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adridadou",
      "html_url": "https://github.com/adridadou",
      "followers_url": "https://api.github.com/users/adridadou/followers",
      "following_url": "https://api.github.com/users/adridadou/following{/other_user}",
      "gists_url": "https://api.github.com/users/adridadou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adridadou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adridadou/subscriptions",
      "organizations_url": "https://api.github.com/users/adridadou/orgs",
      "repos_url": "https://api.github.com/users/adridadou/repos",
      "events_url": "https://api.github.com/users/adridadou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adridadou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T14:49:35Z",
    "updated_at": "2020-08-11T14:49:35Z",
    "author_association": "NONE",
    "body": "for anyone getting here and looking for a solution, here is an example on how to do it:\r\nhttps://ethereum.stackexchange.com/questions/83528/how-can-i-get-the-revert-reason-of-a-call-in-solidity-so-that-i-can-use-it-in-th",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/671992775/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
