{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/9737/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/9737/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/9737/events",
  "html_url": "https://github.com/ethereum/solidity/issues/9737",
  "id": 692417224,
  "node_id": "MDU6SXNzdWU2OTI0MTcyMjQ=",
  "number": 9737,
  "title": "Allow Event Definitions at File Level",
  "user": {
    "login": "mudgen",
    "id": 49092,
    "node_id": "MDQ6VXNlcjQ5MDky",
    "avatar_url": "https://avatars.githubusercontent.com/u/49092?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mudgen",
    "html_url": "https://github.com/mudgen",
    "followers_url": "https://api.github.com/users/mudgen/followers",
    "following_url": "https://api.github.com/users/mudgen/following{/other_user}",
    "gists_url": "https://api.github.com/users/mudgen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mudgen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mudgen/subscriptions",
    "organizations_url": "https://api.github.com/users/mudgen/orgs",
    "repos_url": "https://api.github.com/users/mudgen/repos",
    "events_url": "https://api.github.com/users/mudgen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mudgen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2020-09-03T21:58:22Z",
  "updated_at": "2021-02-23T12:37:34Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "If events can be defined at the file level then free functions can emit events.\r\n\r\nSuggestion by @haltman-at : If all events that are possibly emitted by a contract are added to its ABI, then they should also be added to the AST to be able to find out which events exactly are emitted (by AST ID).",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/9737/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/9737/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689416890",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-689416890",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 689416890,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTQxNjg5MA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-09T08:36:58Z",
    "updated_at": "2020-09-09T08:37:20Z",
    "author_association": "MEMBER",
    "body": "Related: #9765 \r\n\r\nI think that there should be a mechanism to access all events emitted from a contract, not just the ones declared there.\r\n\r\nAny ideas how this could be handled? Should we include all events (and in the future also errors) that are emitted in the already existing abi field or should we introduce a new field (maybe 'effectiveABI' or 'indirectABI')?\r\n\r\n@yann300 @alcuadrado @haltman-at",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689416890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689601590",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-689601590",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 689601590,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTYwMTU5MA==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-09T14:31:03Z",
    "updated_at": "2020-09-09T14:31:03Z",
    "author_association": "MEMBER",
    "body": "> Any ideas how this could be handled? Should we include all events (and in the future also errors) that are emitted in the already existing abi field or should we introduce a new field (maybe 'effectiveABI' or 'indirectABI')?\r\n\r\nWouldn't this always be incomplete? As which contracts are called can change at runtime. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689601590/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689617863",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-689617863",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 689617863,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTYxNzg2Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-09T14:56:42Z",
    "updated_at": "2020-09-09T14:56:42Z",
    "author_association": "MEMBER",
    "body": "@alcuadrado the idea was to include all event calls that are part of the bytecode. Excluding delegatecall, these are all events that can be emitted from that address.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689617863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689659222",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-689659222",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 689659222,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTY1OTIyMg==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-09T16:02:24Z",
    "updated_at": "2020-09-09T16:02:46Z",
    "author_association": "MEMBER",
    "body": "I think I misunderstood you.\r\n\r\nLet's say that you have:\r\n\r\n```solidity\r\ncontract A {\r\n  event EA();\r\n\r\n  function f() public {\r\n    emit EA();\r\n  }\r\n}\r\n\r\ncontract B {\r\n  event EB();\r\n  event EC();\r\n  A a;\r\n\r\n  constructor(A _a) {\r\n    a = _a;\r\n  }\r\n\r\n  function f() public {\r\n    emit EB();\r\n    a.f();\r\n  }\r\n}\r\n```\r\n\r\nThe events for `A` would be `EA`. But what about the `B` ones?\r\n\r\n1. Include all of its events `EB`, `EC`. -- This is what is currently happening.\r\n2. Include all its events and `A`, because it's called from `B`. ie: `EA`, `EB`, EC`. -- This is what I understood.\r\n3. Include the events from `B` that are effectively called: `EB` -- Is this what you meant?\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689659222/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689684507",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-689684507",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 689684507,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTY4NDUwNw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-09T16:46:08Z",
    "updated_at": "2020-09-09T16:46:08Z",
    "author_association": "MEMBER",
    "body": "Yes, I meant 3, or maybe 1 + 3, so all that are defined in the contract plus those that are called. In your example, there is no difference, but take a look here:\r\n\r\n```\r\nlibrary L {\r\n  event LA();\r\n  event LB();\r\n  event LC();\r\n\r\n  function f() internal {\r\n    emit LB();\r\n  }\r\n}\r\n\r\ncontract B {\r\n  event BA();\r\n  function f() public {\r\n    emit BA();\r\n    emit L.LA();\r\n    L.f();\r\n  }\r\n}\r\n```\r\nIn that example, the events for B should be `BA`, `LA` and `LB` (the latter two maybe called `L.LA` and `L.LB`).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689684507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689848121",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-689848121",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 689848121,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTg0ODEyMQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-09T22:08:59Z",
    "updated_at": "2020-09-09T22:08:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hm, this is interesting.  Right now Truffle Decoder already assumes that any contract can emit events from any library (due to delegatecalls).  Roughly speaking -- first it checks the contract's ABI, and for each event scans the corresponding AST for more info (if possible -- if it can't find it then it just uses the info from the ABI).  Then it does the same for all libraries in the project.\r\n\r\nHow to handle free events, if those become allowed, is an interesting question.  \"Effective ABI\" is kind of hacky but it might be the most compatible thing.  I think adding library/free functions to the ABI field proper would be... confusing.  It certainly would cause problems with Truffle Decoder as it is -- I mean, I can alter Truffle Decoder, obviously, but it's not obvious to me what the proper way would be.\r\n\r\nLike, let's say we're trying to decode a library event emitted by a particular contract; imagine this event has been added to the contract's ABI.  Truffle Decoder (as it currently exists) will see the ABI entry, say \"Oh, this event was defined in this contract\", check the AST for it, fail to find it, and say \"Darn, I guess we just have to decode in ABI-only mode\".  When in fact, it could have found the AST information had it checked elsewhere.  And had the event *not* been in the ABI, it would have eventually done so (checking library ABIs, then scanning the appropriate ASTs for more info).  So putting the event in the ABI means we get *less* info out.\r\n\r\nNow, OK, like I said, that's just how Truffle Decoder *currently* works, not necessarily how it *has* to work... but still, you see the trouble, right?  It adds a lot more \"anything can come from anywhere\", if an event given in a particular contract's ABI doesn't have to be defined in that contract or one of its ancestors!\r\n\r\nSo yeah, maybe `effectiveABI` -- or maybe better yet, `extraABI`, which would contain *only* the extra stuff?  And you could combine it with the ordinary ABI to get the full \"effective ABI\".\r\n\r\nI dunno.  If you're doing free events, I guess you have to do something like this.  But if you don't do free events, then it probably makes more sense to leave things as-is at the moment...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689848121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689857654",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-689857654",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 689857654,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTg1NzY1NA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-09T22:33:37Z",
    "updated_at": "2020-09-09T22:33:37Z",
    "author_association": "MEMBER",
    "body": "Thanks for shedding some light on how truffle decoder works with event!\r\n\r\nMaybe one thing to consider before we adding something like 'extraABI`: I think it would be far better to find a solution that maybe needs some implementation work in truffle (as well as solidity) but \"just works\" in a backwards-compatible matter. We could add another field to each ABI entry that is not defined in the contract, for example. I think having to scan two different items in the ABI that might even theoretically conflict with each other is far inferior to scanning a single list and maybe doing some extra work identifying the item in the AST.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/689857654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/690301740",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-690301740",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 690301740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MDMwMTc0MA==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-10T13:49:48Z",
    "updated_at": "2020-09-10T13:49:48Z",
    "author_association": "MEMBER",
    "body": "Thanks for your answer, @chriseth!\r\n\r\nNow I get the difference. This is mostly about libraries and delegate calls, right?\r\n\r\nThis is tangentially related, but I think it will be useful to understand the whole picture: \r\n\r\nA very common problem that people have when testing smart contracts is that lots of times when sending a TX to a smart contract, you also want to decoded another contract's events, because of internal transactions/messages.\r\n\r\nCurrently, this is not trivial with most javascript libraries, but it could be if their design acknowledges this usecase, and doesn't do events decoding on a per-contract basis. I think this would mean trying to decode all the events in the project though.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/690301740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/690325919",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-690325919",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 690325919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MDMyNTkxOQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-10T14:27:07Z",
    "updated_at": "2020-09-10T14:27:07Z",
    "author_association": "MEMBER",
    "body": "@alcuadrado it's not really about delegatecalls, because with delegatecall, we actually don't really know what code will be executed. Concerning decoding events at other addresses: What should be happening is that the tools should take a look at the metadata hash at the event's address, then download the ABI (including the events) from ipfs and doing the decoding.\r\n\r\nWhat do you mean by \"trying to decode all the events in the project\" - the event usually has a signature and you can just select the one that matches.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/690325919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/690522787",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-690522787",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 690522787,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MDUyMjc4Nw==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-10T17:06:18Z",
    "updated_at": "2020-09-10T17:06:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well, you can't *just* select the one that matches by signature, due to the fact that signatures don't take into account which parameters are `indexed`, so say you have two libraries that declare events with the same signature but with different parameters indexed, which poses a bit of a problem...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/690522787/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/690977860",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-690977860",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 690977860,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MDk3Nzg2MA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-11T09:19:17Z",
    "updated_at": "2020-09-11T09:19:17Z",
    "author_association": "MEMBER",
    "body": "I agree that this is a problem, but it is unrelated to this matter, isn't it?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/690977860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/691211394",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-691211394",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 691211394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MTIxMTM5NA==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-11T17:06:59Z",
    "updated_at": "2020-09-11T17:06:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hm, yes, I suppose that is mostly unrelated.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/691211394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/708718629",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-708718629",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 708718629,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODcxODYyOQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-14T23:47:15Z",
    "updated_at": "2020-10-14T23:47:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here's an idea for how to handle this in a way that's more possible for tools like Truffle Decoder to handle.  So, let's say that `abi` is changed to include any events that can be emitted, as discussed above.  (Where here I'm assuming we're ignoring delegate calls, and just listing ones that can be emitted by this particular bytecode without a delegatecall, because that's what's discussed above.)\r\n\r\nMaybe this would be fine if additional corresponding information were added to the AST?  Like right now the AST for a contract has `linearizedBaseContracts`; maybe it could also have `internalizedLibraries` or something, listing all libraries it has inlined code from?\r\n\r\nThat doesn't cover the case of file-level events, but I think those are maybe less of a problem than the library problem?\r\n\r\nAlternatively, maybe one could even put directly in the AST a list of AST IDs of events the contract can emit!  (Where again by \"can emit\" I mean the same thing as above, i.e., these would correspond to the ones listed in the ABI (not necessarily in the same order).)  That doesn't really seem like something that should go in the AST, I'll admit, but it would certainly do the job...\r\n\r\nAnd then these same ideas can be applied to the error case as well, obviously.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/708718629/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/709348608",
    "html_url": "https://github.com/ethereum/solidity/issues/9737#issuecomment-709348608",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9737",
    "id": 709348608,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwOTM0ODYwOA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-15T14:04:56Z",
    "updated_at": "2020-10-15T14:04:56Z",
    "author_association": "MEMBER",
    "body": "Adding the referenced events / errors to the AST sounds like a very good idea!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/709348608/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
